

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>owlapy.owl_reasoner &mdash; OWLAPY 1.6.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=677a9ea0" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css?v=4ae1632d" />
      <link rel="stylesheet" type="text/css" href="../../_static/theme.css?v=ea877efc" />
      <link rel="stylesheet" type="text/css" href="../../_static/theme_tweak.css?v=f0ad19f3" />
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=677a9ea0" />

  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=d6a008b6"></script>
      <script src="../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            OWLAPY
              <img src="../../_static/owlapy_logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../usage/main.html">About owlapy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../usage/usage_examples.html">Basic Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../usage/ontologies.html">Ontologies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../usage/reasoner.html">Reasoners</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../usage/owlapi_synchronization.html">Owlapi Synchronization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../usage/further_resources.html">Further Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../autoapi/owlapy/index.html">owlapy</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">OWLAPY</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Module code</a></li>
      <li class="breadcrumb-item active">owlapy.owl_reasoner</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for owlapy.owl_reasoner</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;OWL Reasoner&quot;&quot;&quot;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">operator</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">logging</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">owlready2</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">os</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">collections</span><span class="w"> </span><span class="kn">import</span> <span class="n">defaultdict</span><span class="p">,</span> <span class="n">Counter</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">functools</span><span class="w"> </span><span class="kn">import</span> <span class="n">singledispatchmethod</span><span class="p">,</span> <span class="n">reduce</span><span class="p">,</span> <span class="n">cached_property</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">itertools</span><span class="w"> </span><span class="kn">import</span> <span class="n">chain</span><span class="p">,</span> <span class="n">repeat</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">types</span><span class="w"> </span><span class="kn">import</span> <span class="n">MappingProxyType</span><span class="p">,</span> <span class="n">FunctionType</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span><span class="n">DefaultDict</span><span class="p">,</span><span class="n">Generator</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">,</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">Mapping</span><span class="p">,</span> <span class="n">Set</span><span class="p">,</span> <span class="n">Type</span><span class="p">,</span> <span class="n">TypeVar</span><span class="p">,</span> <span class="n">Optional</span><span class="p">,</span> <span class="n">FrozenSet</span><span class="p">,</span> <span class="n">Union</span><span class="p">,</span>
                    <span class="n">List</span><span class="p">,</span> <span class="n">Tuple</span><span class="p">)</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">owlapy.class_expression</span><span class="w"> </span><span class="kn">import</span> <span class="n">OWLClassExpression</span><span class="p">,</span> <span class="n">OWLObjectSomeValuesFrom</span><span class="p">,</span> <span class="n">OWLObjectUnionOf</span><span class="p">,</span> \
    <span class="n">OWLObjectIntersectionOf</span><span class="p">,</span> <span class="n">OWLObjectComplementOf</span><span class="p">,</span> <span class="n">OWLObjectAllValuesFrom</span><span class="p">,</span> <span class="n">OWLObjectOneOf</span><span class="p">,</span> <span class="n">OWLObjectHasValue</span><span class="p">,</span> \
    <span class="n">OWLObjectMinCardinality</span><span class="p">,</span> <span class="n">OWLObjectMaxCardinality</span><span class="p">,</span> <span class="n">OWLObjectExactCardinality</span><span class="p">,</span> <span class="n">OWLObjectCardinalityRestriction</span><span class="p">,</span> \
    <span class="n">OWLDataSomeValuesFrom</span><span class="p">,</span> <span class="n">OWLDataOneOf</span><span class="p">,</span> <span class="n">OWLDatatypeRestriction</span><span class="p">,</span> <span class="n">OWLFacetRestriction</span><span class="p">,</span> <span class="n">OWLDataHasValue</span><span class="p">,</span> \
    <span class="n">OWLDataAllValuesFrom</span><span class="p">,</span> <span class="n">OWLNothing</span><span class="p">,</span> <span class="n">OWLThing</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">owlapy.class_expression</span><span class="w"> </span><span class="kn">import</span> <span class="n">OWLClass</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">owlapy.iri</span><span class="w"> </span><span class="kn">import</span> <span class="n">IRI</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">owlapy.owl_axiom</span><span class="w"> </span><span class="kn">import</span> <span class="n">OWLAxiom</span><span class="p">,</span> <span class="n">OWLSubClassOfAxiom</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">owlapy.owl_data_ranges</span><span class="w"> </span><span class="kn">import</span> <span class="n">OWLDataComplementOf</span><span class="p">,</span> <span class="n">OWLDataUnionOf</span><span class="p">,</span> <span class="n">OWLDataIntersectionOf</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">owlapy.owl_datatype</span><span class="w"> </span><span class="kn">import</span> <span class="n">OWLDatatype</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">owlapy.owl_object</span><span class="w"> </span><span class="kn">import</span> <span class="n">OWLEntity</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">owlapy.owl_ontology</span><span class="w"> </span><span class="kn">import</span> <span class="n">Ontology</span><span class="p">,</span> <span class="n">_parse_concept_to_owlapy</span><span class="p">,</span> <span class="n">SyncOntology</span><span class="p">,</span> <span class="n">NeuralOntology</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">owlapy.abstracts.abstract_owl_ontology</span><span class="w"> </span><span class="kn">import</span> <span class="n">AbstractOWLOntology</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">owlapy.owl_property</span><span class="w"> </span><span class="kn">import</span> <span class="n">OWLObjectPropertyExpression</span><span class="p">,</span> <span class="n">OWLDataProperty</span><span class="p">,</span> <span class="n">OWLObjectProperty</span><span class="p">,</span> <span class="n">OWLObjectInverseOf</span><span class="p">,</span> \
    <span class="n">OWLPropertyExpression</span><span class="p">,</span> <span class="n">OWLDataPropertyExpression</span><span class="p">,</span> <span class="n">OWLProperty</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">owlapy.owl_individual</span><span class="w"> </span><span class="kn">import</span> <span class="n">OWLNamedIndividual</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">owlapy.owl_literal</span><span class="w"> </span><span class="kn">import</span> <span class="n">OWLLiteral</span><span class="p">,</span> <span class="n">OWLBottomObjectProperty</span><span class="p">,</span> <span class="n">OWLTopObjectProperty</span><span class="p">,</span> <span class="n">OWLBottomDataProperty</span><span class="p">,</span> \
    <span class="n">OWLTopDataProperty</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">owlapy.utils</span><span class="w"> </span><span class="kn">import</span> <span class="n">run_with_timeout</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">owlapy.abstracts.abstract_owl_reasoner</span><span class="w"> </span><span class="kn">import</span> <span class="n">AbstractOWLReasoner</span>


<span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="n">_P</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s1">&#39;_P&#39;</span><span class="p">,</span> <span class="n">bound</span><span class="o">=</span><span class="n">OWLPropertyExpression</span><span class="p">)</span>


<div class="viewcode-block" id="StructuralReasoner">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.StructuralReasoner">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">StructuralReasoner</span><span class="p">(</span><span class="n">AbstractOWLReasoner</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Tries to check instances fast (but maybe incomplete).&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ontology</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">AbstractOWLOntology</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="o">*</span><span class="p">,</span> <span class="n">class_cache</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
                 <span class="n">property_cache</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">negation_default</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">sub_properties</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Fast instance checker.</span>

<span class="sd">        Args:</span>
<span class="sd">            ontology: Ontology to use.</span>
<span class="sd">            property_cache: Whether to cache property values.</span>
<span class="sd">            negation_default: Whether to assume a missing fact means it is false (&quot;closed world view&quot;).</span>
<span class="sd">            sub_properties: Whether to take sub properties into account for the</span>
<span class="sd">                :func:`StructuralReasoner.instances` retrieval.</span>
<span class="sd">            &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ontology</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">ontology</span> <span class="o">=</span> <span class="n">Ontology</span><span class="p">(</span><span class="n">ontology</span><span class="p">)</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">ontology</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ontology</span><span class="p">,</span> <span class="n">Ontology</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_world</span><span class="p">:</span> <span class="n">owlready2</span><span class="o">.</span><span class="n">World</span> <span class="o">=</span> <span class="n">ontology</span><span class="o">.</span><span class="n">_world</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ontology</span><span class="p">:</span> <span class="n">Ontology</span> <span class="o">=</span> <span class="n">ontology</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">class_cache</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">class_cache</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_property_cache</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">property_cache</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_negation_default</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">negation_default</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_sub_properties</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">sub_properties</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__warned</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_init</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_init</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">class_cache</span><span class="p">:</span>
            <span class="c1"># Class =&gt; individuals</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_cls_to_ind</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="n">OWLClass</span><span class="p">,</span> <span class="n">FrozenSet</span><span class="p">[</span><span class="n">OWLNamedIndividual</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_property_cache</span><span class="p">:</span>
            <span class="c1"># ObjectProperty =&gt; { individual =&gt; individuals }</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_obj_prop</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="n">OWLObjectProperty</span><span class="p">,</span> <span class="n">Mapping</span><span class="p">[</span><span class="n">OWLNamedIndividual</span><span class="p">,</span> <span class="n">Set</span><span class="p">[</span><span class="n">OWLNamedIndividual</span><span class="p">]]]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
            <span class="c1"># ObjectProperty =&gt; { individual =&gt; individuals }</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_obj_prop_inv</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="n">OWLObjectProperty</span><span class="p">,</span> <span class="n">Mapping</span><span class="p">[</span><span class="n">OWLNamedIndividual</span><span class="p">,</span> <span class="n">Set</span><span class="p">[</span><span class="n">OWLNamedIndividual</span><span class="p">]]]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
            <span class="c1"># DataProperty =&gt; { individual =&gt; literals }</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_data_prop</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="n">OWLDataProperty</span><span class="p">,</span> <span class="n">Mapping</span><span class="p">[</span><span class="n">OWLNamedIndividual</span><span class="p">,</span> <span class="n">Set</span><span class="p">[</span><span class="n">OWLLiteral</span><span class="p">]]]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_has_prop</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="n">_P</span><span class="p">],</span> <span class="n">Dict</span><span class="p">[</span><span class="n">_P</span><span class="p">,</span> <span class="n">FrozenSet</span><span class="p">[</span><span class="n">OWLNamedIndividual</span><span class="p">]]]</span> <span class="o">=</span> <span class="p">{</span>
                <span class="n">OWLDataProperty</span><span class="p">:</span> <span class="p">{},</span>
                <span class="n">OWLObjectProperty</span><span class="p">:</span> <span class="p">{},</span>
                <span class="n">OWLObjectInverseOf</span><span class="p">:</span> <span class="p">{},</span>
            <span class="p">}</span>

<div class="viewcode-block" id="StructuralReasoner.reset">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.StructuralReasoner.reset">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The reset method shall reset any cached state.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_init</span><span class="p">()</span></div>


<div class="viewcode-block" id="StructuralReasoner.data_property_domains">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.StructuralReasoner.data_property_domains">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">data_property_domains</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pe</span><span class="p">:</span> <span class="n">OWLDataProperty</span><span class="p">,</span> <span class="n">direct</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">OWLClassExpression</span><span class="p">]:</span>
        <span class="n">domains</span> <span class="o">=</span> <span class="p">{</span><span class="n">d</span><span class="o">.</span><span class="n">get_domain</span><span class="p">()</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_root_ontology</span><span class="p">()</span><span class="o">.</span><span class="n">data_property_domain_axioms</span><span class="p">(</span><span class="n">pe</span><span class="p">)}</span>
        <span class="n">sub_domains</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">chain</span><span class="o">.</span><span class="n">from_iterable</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">sub_classes</span><span class="p">(</span><span class="n">d</span><span class="p">)</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">domains</span><span class="p">]))</span>
        <span class="k">yield from</span> <span class="n">domains</span> <span class="o">-</span> <span class="n">sub_domains</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">direct</span><span class="p">:</span>
            <span class="k">yield from</span> <span class="n">sub_domains</span></div>


<div class="viewcode-block" id="StructuralReasoner.object_property_domains">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.StructuralReasoner.object_property_domains">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">object_property_domains</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pe</span><span class="p">:</span> <span class="n">OWLObjectProperty</span><span class="p">,</span> <span class="n">direct</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">OWLClassExpression</span><span class="p">]:</span>
        <span class="n">domains</span> <span class="o">=</span> <span class="p">{</span><span class="n">d</span><span class="o">.</span><span class="n">get_domain</span><span class="p">()</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_root_ontology</span><span class="p">()</span><span class="o">.</span><span class="n">object_property_domain_axioms</span><span class="p">(</span><span class="n">pe</span><span class="p">)}</span>
        <span class="n">sub_domains</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">chain</span><span class="o">.</span><span class="n">from_iterable</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">sub_classes</span><span class="p">(</span><span class="n">d</span><span class="p">)</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">domains</span><span class="p">]))</span>
        <span class="k">yield from</span> <span class="n">domains</span> <span class="o">-</span> <span class="n">sub_domains</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">direct</span><span class="p">:</span>
            <span class="k">yield from</span> <span class="n">sub_domains</span></div>


<div class="viewcode-block" id="StructuralReasoner.object_property_ranges">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.StructuralReasoner.object_property_ranges">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">object_property_ranges</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pe</span><span class="p">:</span> <span class="n">OWLObjectProperty</span><span class="p">,</span> <span class="n">direct</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">OWLClassExpression</span><span class="p">]:</span>
        <span class="n">ranges</span> <span class="o">=</span> <span class="p">{</span><span class="n">r</span><span class="o">.</span><span class="n">get_range</span><span class="p">()</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_root_ontology</span><span class="p">()</span><span class="o">.</span><span class="n">object_property_range_axioms</span><span class="p">(</span><span class="n">pe</span><span class="p">)}</span>
        <span class="n">sub_ranges</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">chain</span><span class="o">.</span><span class="n">from_iterable</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">sub_classes</span><span class="p">(</span><span class="n">d</span><span class="p">)</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">ranges</span><span class="p">]))</span>
        <span class="k">yield from</span> <span class="n">ranges</span> <span class="o">-</span> <span class="n">sub_ranges</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">direct</span><span class="p">:</span>
            <span class="k">yield from</span> <span class="n">sub_ranges</span></div>


<div class="viewcode-block" id="StructuralReasoner.data_property_ranges">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.StructuralReasoner.data_property_ranges">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">data_property_ranges</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pe</span><span class="p">:</span> <span class="n">OWLDataProperty</span><span class="p">,</span> <span class="n">direct</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">OWLClassExpression</span><span class="p">]:</span>
        <span class="k">if</span> <span class="n">direct</span><span class="p">:</span>
            <span class="k">yield from</span> <span class="p">[</span><span class="n">r</span><span class="o">.</span><span class="n">get_range</span><span class="p">()</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_root_ontology</span><span class="p">()</span><span class="o">.</span><span class="n">data_property_range_axioms</span><span class="p">(</span><span class="n">pe</span><span class="p">)]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># hierarchy of data types is not considered.</span>
            <span class="k">return</span> <span class="bp">NotImplemented</span><span class="p">()</span></div>


<div class="viewcode-block" id="StructuralReasoner.equivalent_classes">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.StructuralReasoner.equivalent_classes">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">equivalent_classes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ce</span><span class="p">:</span> <span class="n">OWLClassExpression</span><span class="p">,</span> <span class="n">only_named</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">OWLClassExpression</span><span class="p">]:</span>
        <span class="n">seen_set</span> <span class="o">=</span> <span class="p">{</span><span class="n">ce</span><span class="p">}</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ce</span><span class="p">,</span> <span class="n">OWLClass</span><span class="p">):</span>
            <span class="n">c_x</span><span class="p">:</span> <span class="n">owlready2</span><span class="o">.</span><span class="n">ThingClass</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_world</span><span class="p">[</span><span class="n">ce</span><span class="o">.</span><span class="n">str</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">eq_x</span> <span class="ow">in</span> <span class="n">c_x</span><span class="o">.</span><span class="n">INDIRECT_equivalent_to</span><span class="p">:</span>
                <span class="n">eq</span> <span class="o">=</span> <span class="n">_parse_concept_to_owlapy</span><span class="p">(</span><span class="n">eq_x</span><span class="p">)</span>
                <span class="k">if</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">eq</span><span class="p">,</span> <span class="n">OWLClass</span><span class="p">)</span> <span class="ow">or</span>
                    <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">eq</span><span class="p">,</span> <span class="n">OWLClassExpression</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">only_named</span><span class="p">))</span> <span class="ow">and</span> <span class="n">eq</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">seen_set</span><span class="p">:</span>
                    <span class="n">seen_set</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">eq</span><span class="p">)</span>
                    <span class="k">yield</span> <span class="n">eq</span>
                <span class="c1"># Workaround for problems in owlready2. It does not always recognize equivalent complex class</span>
                <span class="c1"># expressions through INDIRECT_equivalent_to. Maybe it will work as soon as owlready2 adds support for</span>
                <span class="c1"># EquivalentClasses general class axioms.</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">only_named</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">eq_x</span><span class="p">,</span> <span class="n">owlready2</span><span class="o">.</span><span class="n">ThingClass</span><span class="p">):</span>
                    <span class="k">for</span> <span class="n">eq_2_x</span> <span class="ow">in</span> <span class="n">eq_x</span><span class="o">.</span><span class="n">equivalent_to</span><span class="p">:</span>
                        <span class="n">eq_2</span> <span class="o">=</span> <span class="n">_parse_concept_to_owlapy</span><span class="p">(</span><span class="n">eq_2_x</span><span class="p">)</span>
                        <span class="k">if</span> <span class="n">eq_2</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">seen_set</span><span class="p">:</span>
                            <span class="n">seen_set</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">eq_2</span><span class="p">)</span>
                            <span class="k">yield</span> <span class="n">eq_2</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ce</span><span class="p">,</span> <span class="n">OWLClassExpression</span><span class="p">):</span>
            <span class="c1"># Extend as soon as owlready2 supports EquivalentClasses general class axioms</span>
            <span class="c1"># Slow but works. No better way to do this in owlready2 without using the reasoners at the moment.</span>
            <span class="c1"># Might be able to change this when owlready2 supports general class axioms for EquivalentClasses.</span>
            <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ontology</span><span class="o">.</span><span class="n">classes_in_signature</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">ce</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">equivalent_classes</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">only_named</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="ow">and</span> <span class="n">c</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">seen_set</span><span class="p">:</span>
                    <span class="n">seen_set</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
                    <span class="k">yield</span> <span class="n">c</span>
                    <span class="k">for</span> <span class="n">e_c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">equivalent_classes</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">only_named</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
                        <span class="k">if</span> <span class="n">e_c</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">seen_set</span> <span class="ow">and</span> <span class="p">(</span><span class="ow">not</span> <span class="n">only_named</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">e_c</span><span class="p">,</span> <span class="n">OWLClass</span><span class="p">)):</span>
                            <span class="n">seen_set</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">e_c</span><span class="p">)</span>
                            <span class="k">yield</span> <span class="n">e_c</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Equivalent classes not implemented for: </span><span class="si">{</span><span class="n">ce</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span></div>


    <span class="k">def</span><span class="w"> </span><span class="nf">_find_disjoint_classes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ce</span><span class="p">:</span> <span class="n">OWLClassExpression</span><span class="p">,</span> <span class="n">only_named</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">seen_set</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ce</span><span class="p">,</span> <span class="n">OWLClass</span><span class="p">):</span>
            <span class="n">c_x</span><span class="p">:</span> <span class="n">owlready2</span><span class="o">.</span><span class="n">ThingClass</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_world</span><span class="p">[</span><span class="n">ce</span><span class="o">.</span><span class="n">str</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">d_x</span> <span class="ow">in</span> <span class="n">chain</span><span class="o">.</span><span class="n">from_iterable</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">d</span><span class="p">:</span> <span class="n">d</span><span class="o">.</span><span class="n">entities</span><span class="p">,</span> <span class="n">c_x</span><span class="o">.</span><span class="n">disjoints</span><span class="p">())):</span>
                <span class="k">if</span> <span class="n">d_x</span> <span class="o">!=</span> <span class="n">c_x</span> <span class="ow">and</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">d_x</span><span class="p">,</span> <span class="n">owlready2</span><span class="o">.</span><span class="n">ThingClass</span><span class="p">)</span> <span class="ow">or</span>
                                   <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">d_x</span><span class="p">,</span> <span class="n">owlready2</span><span class="o">.</span><span class="n">ClassConstruct</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">only_named</span><span class="p">)):</span>
                    <span class="n">d_owlapy</span> <span class="o">=</span> <span class="n">_parse_concept_to_owlapy</span><span class="p">(</span><span class="n">d_x</span><span class="p">)</span>
                    <span class="n">seen_set</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">d_owlapy</span><span class="p">)</span>
                    <span class="k">yield</span> <span class="n">d_owlapy</span>
                    <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">equivalent_classes</span><span class="p">(</span><span class="n">d_owlapy</span><span class="p">,</span> <span class="n">only_named</span><span class="o">=</span><span class="n">only_named</span><span class="p">):</span>
                        <span class="k">if</span> <span class="n">c</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">seen_set</span><span class="p">:</span>
                            <span class="n">seen_set</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
                            <span class="k">yield</span> <span class="n">c</span>
                    <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">sub_classes</span><span class="p">(</span><span class="n">d_owlapy</span><span class="p">,</span> <span class="n">only_named</span><span class="o">=</span><span class="n">only_named</span><span class="p">):</span>
                        <span class="k">if</span> <span class="n">c</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">seen_set</span><span class="p">:</span>
                            <span class="n">seen_set</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
                            <span class="k">yield</span> <span class="n">c</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ce</span><span class="p">,</span> <span class="n">OWLClassExpression</span><span class="p">):</span>
            <span class="c1"># Extend as soon as owlready2 supports DisjointClasses general class axioms</span>
            <span class="c1"># Slow but works. No better way to do this in owlready2 without using the reasoners at the moment.</span>
            <span class="c1"># Might be able to change this when owlready2 supports general class axioms for DjsjointClasses</span>
            <span class="k">yield from</span> <span class="p">(</span><span class="n">c</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ontology</span><span class="o">.</span><span class="n">classes_in_signature</span><span class="p">()</span> <span class="k">if</span> <span class="n">ce</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">disjoint_classes</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="kc">False</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Equivalent classes not implemented for: </span><span class="si">{</span><span class="n">ce</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

<div class="viewcode-block" id="StructuralReasoner.disjoint_classes">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.StructuralReasoner.disjoint_classes">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">disjoint_classes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ce</span><span class="p">:</span> <span class="n">OWLClassExpression</span><span class="p">,</span> <span class="n">only_named</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">OWLClassExpression</span><span class="p">]:</span>
        <span class="n">seen_set</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">ce</span> <span class="ow">is</span> <span class="n">OWLNothing</span><span class="p">:</span>
            <span class="k">yield from</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ontology</span><span class="o">.</span><span class="n">classes_in_signature</span><span class="p">()</span>
            <span class="k">yield</span> <span class="n">OWLThing</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="n">ce</span> <span class="ow">is</span> <span class="n">OWLThing</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">OWLNothing</span>
            <span class="k">return</span>
        <span class="k">yield from</span> <span class="bp">self</span><span class="o">.</span><span class="n">_find_disjoint_classes</span><span class="p">(</span><span class="n">ce</span><span class="p">,</span> <span class="n">only_named</span><span class="p">,</span> <span class="n">seen_set</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">super_classes</span><span class="p">(</span><span class="n">ce</span><span class="p">,</span> <span class="n">only_named</span><span class="o">=</span><span class="n">only_named</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">c</span> <span class="o">!=</span> <span class="n">OWLClass</span><span class="p">(</span><span class="n">IRI</span><span class="p">(</span><span class="s1">&#39;http://www.w3.org/2002/07/owl#&#39;</span><span class="p">,</span> <span class="s1">&#39;Thing&#39;</span><span class="p">)):</span>
                <span class="k">yield from</span> <span class="bp">self</span><span class="o">.</span><span class="n">_find_disjoint_classes</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">only_named</span><span class="o">=</span><span class="n">only_named</span><span class="p">,</span> <span class="n">seen_set</span><span class="o">=</span><span class="n">seen_set</span><span class="p">)</span></div>


<div class="viewcode-block" id="StructuralReasoner.different_individuals">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.StructuralReasoner.different_individuals">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">different_individuals</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ind</span><span class="p">:</span> <span class="n">OWLNamedIndividual</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">OWLNamedIndividual</span><span class="p">]:</span>
        <span class="n">i</span><span class="p">:</span> <span class="n">owlready2</span><span class="o">.</span><span class="n">Thing</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_world</span><span class="p">[</span><span class="n">ind</span><span class="o">.</span><span class="n">str</span><span class="p">]</span>
        <span class="k">yield from</span> <span class="p">(</span><span class="n">OWLNamedIndividual</span><span class="p">(</span><span class="n">IRI</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">d_i</span><span class="o">.</span><span class="n">iri</span><span class="p">))</span>
                    <span class="k">for</span> <span class="n">d_i</span> <span class="ow">in</span> <span class="n">chain</span><span class="o">.</span><span class="n">from_iterable</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">entities</span><span class="p">,</span> <span class="n">i</span><span class="o">.</span><span class="n">differents</span><span class="p">()))</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">d_i</span><span class="p">,</span> <span class="n">owlready2</span><span class="o">.</span><span class="n">Thing</span><span class="p">)</span> <span class="ow">and</span> <span class="n">i</span> <span class="o">!=</span> <span class="n">d_i</span><span class="p">)</span></div>


<div class="viewcode-block" id="StructuralReasoner.same_individuals">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.StructuralReasoner.same_individuals">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">same_individuals</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ind</span><span class="p">:</span> <span class="n">OWLNamedIndividual</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">OWLNamedIndividual</span><span class="p">]:</span>
        <span class="n">i</span><span class="p">:</span> <span class="n">owlready2</span><span class="o">.</span><span class="n">Thing</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_world</span><span class="p">[</span><span class="n">ind</span><span class="o">.</span><span class="n">str</span><span class="p">]</span>
        <span class="k">yield from</span> <span class="p">(</span><span class="n">OWLNamedIndividual</span><span class="p">(</span><span class="n">IRI</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">d_i</span><span class="o">.</span><span class="n">iri</span><span class="p">))</span> <span class="k">for</span> <span class="n">d_i</span> <span class="ow">in</span> <span class="n">i</span><span class="o">.</span><span class="n">equivalent_to</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">d_i</span><span class="p">,</span> <span class="n">owlready2</span><span class="o">.</span><span class="n">Thing</span><span class="p">))</span></div>


<div class="viewcode-block" id="StructuralReasoner.data_property_values">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.StructuralReasoner.data_property_values">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">data_property_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">:</span> <span class="n">OWLEntity</span><span class="p">,</span> <span class="n">pe</span><span class="p">:</span> <span class="n">OWLDataProperty</span><span class="p">,</span> <span class="n">direct</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> \
            <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">OWLLiteral</span><span class="p">]:</span>
        <span class="n">i</span><span class="p">:</span> <span class="n">owlready2</span><span class="o">.</span><span class="n">Thing</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_world</span><span class="p">[</span><span class="n">e</span><span class="o">.</span><span class="n">str</span><span class="p">]</span>
        <span class="n">p</span><span class="p">:</span> <span class="n">owlready2</span><span class="o">.</span><span class="n">DataPropertyClass</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_world</span><span class="p">[</span><span class="n">pe</span><span class="o">.</span><span class="n">str</span><span class="p">]</span>
        <span class="n">retrieval_func</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">_get_values_for_individual</span> <span class="k">if</span> <span class="n">direct</span> <span class="k">else</span> <span class="n">p</span><span class="o">.</span><span class="n">_get_indirect_values_for_individual</span>
        <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">retrieval_func</span><span class="p">(</span><span class="n">i</span><span class="p">):</span>
            <span class="k">yield</span> <span class="n">OWLLiteral</span><span class="p">(</span><span class="n">val</span><span class="p">)</span></div>


<div class="viewcode-block" id="StructuralReasoner.all_data_property_values">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.StructuralReasoner.all_data_property_values">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">all_data_property_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pe</span><span class="p">:</span> <span class="n">OWLDataProperty</span><span class="p">,</span> <span class="n">direct</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">OWLLiteral</span><span class="p">]:</span>
        <span class="n">p</span><span class="p">:</span> <span class="n">owlready2</span><span class="o">.</span><span class="n">DataPropertyClass</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_world</span><span class="p">[</span><span class="n">pe</span><span class="o">.</span><span class="n">str</span><span class="p">]</span>
        <span class="n">relations</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">get_relations</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">direct</span><span class="p">:</span>
            <span class="n">indirect_relations</span> <span class="o">=</span> <span class="n">chain</span><span class="o">.</span><span class="n">from_iterable</span><span class="p">(</span>
                <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_world</span><span class="p">[</span><span class="n">x</span><span class="o">.</span><span class="n">str</span><span class="p">]</span><span class="o">.</span><span class="n">get_relations</span><span class="p">(),</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">sub_data_properties</span><span class="p">(</span><span class="n">pe</span><span class="p">,</span> <span class="n">direct</span><span class="o">=</span><span class="kc">False</span><span class="p">)))</span>
            <span class="n">relations</span> <span class="o">=</span> <span class="n">chain</span><span class="p">(</span><span class="n">relations</span><span class="p">,</span> <span class="n">indirect_relations</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">relations</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">OWLLiteral</span><span class="p">(</span><span class="n">val</span><span class="p">)</span></div>


<div class="viewcode-block" id="StructuralReasoner.object_property_values">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.StructuralReasoner.object_property_values">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">object_property_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ind</span><span class="p">:</span> <span class="n">OWLNamedIndividual</span><span class="p">,</span> <span class="n">pe</span><span class="p">:</span> <span class="n">OWLObjectPropertyExpression</span><span class="p">,</span> <span class="n">direct</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> \
            <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">OWLNamedIndividual</span><span class="p">]:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pe</span><span class="p">,</span> <span class="n">OWLObjectProperty</span><span class="p">):</span>
            <span class="n">i</span><span class="p">:</span> <span class="n">owlready2</span><span class="o">.</span><span class="n">Thing</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_world</span><span class="p">[</span><span class="n">ind</span><span class="o">.</span><span class="n">str</span><span class="p">]</span>
            <span class="n">p</span><span class="p">:</span> <span class="n">owlready2</span><span class="o">.</span><span class="n">ObjectPropertyClass</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_world</span><span class="p">[</span><span class="n">pe</span><span class="o">.</span><span class="n">str</span><span class="p">]</span>
            <span class="c1"># Recommended to use direct=False because _get_values_for_individual does not give consistent result</span>
            <span class="c1"># for the case when there are equivalent object properties. At least until this is fixed on owlready2.</span>
            <span class="n">retieval_func</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">_get_values_for_individual</span> <span class="k">if</span> <span class="n">direct</span> <span class="k">else</span> <span class="n">p</span><span class="o">.</span><span class="n">_get_indirect_values_for_individual</span>
            <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">retieval_func</span><span class="p">(</span><span class="n">i</span><span class="p">):</span>
                <span class="k">yield</span> <span class="n">OWLNamedIndividual</span><span class="p">(</span><span class="n">IRI</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">val</span><span class="o">.</span><span class="n">iri</span><span class="p">))</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pe</span><span class="p">,</span> <span class="n">OWLObjectInverseOf</span><span class="p">):</span>
            <span class="n">p</span><span class="p">:</span> <span class="n">owlready2</span><span class="o">.</span><span class="n">ObjectPropertyClass</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_world</span><span class="p">[</span><span class="n">pe</span><span class="o">.</span><span class="n">get_named_property</span><span class="p">()</span><span class="o">.</span><span class="n">str</span><span class="p">]</span>
            <span class="n">inverse_p</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">inverse_property</span>
            <span class="c1"># If the inverse property is explicitly defined we can take shortcut</span>
            <span class="k">if</span> <span class="n">inverse_p</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">yield from</span> <span class="bp">self</span><span class="o">.</span><span class="n">object_property_values</span><span class="p">(</span><span class="n">ind</span><span class="p">,</span> <span class="n">OWLObjectProperty</span><span class="p">(</span><span class="n">IRI</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">inverse_p</span><span class="o">.</span><span class="n">iri</span><span class="p">)),</span> <span class="n">direct</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">direct</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Indirect values of inverse properties are only implemented if the &#39;</span>
                                              <span class="s1">&#39;inverse property is explicitly defined in the ontology.&#39;</span>
                                              <span class="sa">f</span><span class="s1">&#39;Property: </span><span class="si">{</span><span class="n">pe</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">i</span><span class="p">:</span> <span class="n">owlready2</span><span class="o">.</span><span class="n">Thing</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_world</span><span class="p">[</span><span class="n">ind</span><span class="o">.</span><span class="n">str</span><span class="p">]</span>
                <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">p</span><span class="o">.</span><span class="n">_get_inverse_values_for_individual</span><span class="p">(</span><span class="n">i</span><span class="p">):</span>
                    <span class="k">yield</span> <span class="n">OWLNamedIndividual</span><span class="p">(</span><span class="n">IRI</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">val</span><span class="o">.</span><span class="n">iri</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="n">pe</span><span class="p">)</span></div>


    <span class="k">def</span><span class="w"> </span><span class="nf">_instances</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ce</span><span class="p">:</span> <span class="n">OWLClassExpression</span><span class="p">,</span> <span class="n">direct</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">OWLNamedIndividual</span><span class="p">]:</span>
        <span class="k">if</span> <span class="n">direct</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">__warned</span> <span class="o">&amp;</span> <span class="mi">2</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;direct not implemented&quot;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__warned</span> <span class="o">|=</span> <span class="mi">2</span>
        <span class="n">temp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_find_instances</span><span class="p">(</span><span class="n">ce</span><span class="p">)</span>
        <span class="k">yield from</span> <span class="n">temp</span>

<div class="viewcode-block" id="StructuralReasoner.instances">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.StructuralReasoner.instances">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">instances</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ce</span><span class="p">:</span> <span class="n">OWLClassExpression</span><span class="p">,</span> <span class="n">direct</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">timeout</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">run_with_timeout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_instances</span><span class="p">,</span> <span class="n">timeout</span><span class="p">,</span> <span class="p">(</span><span class="n">ce</span><span class="p">,</span> <span class="n">direct</span><span class="p">))</span></div>


    <span class="k">def</span><span class="w"> </span><span class="nf">_sub_classes_recursive</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ce</span><span class="p">:</span> <span class="n">OWLClassExpression</span><span class="p">,</span> <span class="n">seen_set</span><span class="p">:</span> <span class="n">Set</span><span class="p">,</span> <span class="n">only_named</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> \
            <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">OWLClassExpression</span><span class="p">]:</span>

        <span class="c1"># work around issue in class equivalence detection in Owlready2</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="p">[</span><span class="n">ce</span><span class="p">,</span> <span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">equivalent_classes</span><span class="p">(</span><span class="n">ce</span><span class="p">,</span> <span class="n">only_named</span><span class="o">=</span><span class="kc">False</span><span class="p">)]:</span>
            <span class="k">if</span> <span class="n">c</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">seen_set</span><span class="p">:</span>
                <span class="n">seen_set</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
                <span class="k">yield</span> <span class="n">c</span>
            <span class="c1"># First go through all general class axioms, they should only have complex classes as sub_classes.</span>
            <span class="c1"># Done for OWLClass and OWLClassExpression.</span>
            <span class="k">for</span> <span class="n">axiom</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ontology</span><span class="o">.</span><span class="n">general_class_axioms</span><span class="p">():</span>
                <span class="k">if</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">axiom</span><span class="p">,</span> <span class="n">OWLSubClassOfAxiom</span><span class="p">)</span> <span class="ow">and</span> <span class="n">axiom</span><span class="o">.</span><span class="n">get_super_class</span><span class="p">()</span> <span class="o">==</span> <span class="n">c</span>
                        <span class="ow">and</span> <span class="n">axiom</span><span class="o">.</span><span class="n">get_sub_class</span><span class="p">()</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">seen_set</span><span class="p">):</span>
                    <span class="n">seen_set</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">axiom</span><span class="o">.</span><span class="n">get_sub_class</span><span class="p">())</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">only_named</span><span class="p">:</span>
                        <span class="k">yield</span> <span class="n">axiom</span><span class="o">.</span><span class="n">get_sub_class</span><span class="p">()</span>
                    <span class="k">yield from</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sub_classes_recursive</span><span class="p">(</span><span class="n">axiom</span><span class="o">.</span><span class="n">get_sub_class</span><span class="p">(),</span> <span class="n">seen_set</span><span class="p">,</span> <span class="n">only_named</span><span class="p">)</span>

            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">OWLClass</span><span class="p">):</span>
                <span class="n">c_x</span><span class="p">:</span> <span class="n">owlready2</span><span class="o">.</span><span class="n">EntityClass</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_world</span><span class="p">[</span><span class="n">c</span><span class="o">.</span><span class="n">str</span><span class="p">]</span>
                <span class="c1"># Subclasses will only return named classes</span>
                <span class="k">for</span> <span class="n">sc_x</span> <span class="ow">in</span> <span class="n">c_x</span><span class="o">.</span><span class="n">subclasses</span><span class="p">(</span><span class="n">world</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_world</span><span class="p">):</span>
                    <span class="n">sc</span> <span class="o">=</span> <span class="n">_parse_concept_to_owlapy</span><span class="p">(</span><span class="n">sc_x</span><span class="p">)</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">sc</span><span class="p">,</span> <span class="n">OWLClass</span><span class="p">)</span> <span class="ow">and</span> <span class="n">sc</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">seen_set</span><span class="p">:</span>
                        <span class="n">seen_set</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">sc</span><span class="p">)</span>
                        <span class="k">yield</span> <span class="n">sc</span>
                        <span class="k">yield from</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sub_classes_recursive</span><span class="p">(</span><span class="n">sc</span><span class="p">,</span> <span class="n">seen_set</span><span class="p">,</span> <span class="n">only_named</span><span class="o">=</span><span class="n">only_named</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">OWLClassExpression</span><span class="p">):</span>
                <span class="c1"># Slow but works. No better way to do this in owlready2 without using the reasoners at the moment.</span>
                <span class="k">for</span> <span class="n">atomic_c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ontology</span><span class="o">.</span><span class="n">classes_in_signature</span><span class="p">():</span>
                    <span class="k">if</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">super_classes</span><span class="p">(</span><span class="n">atomic_c</span><span class="p">,</span> <span class="n">direct</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">only_named</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="ow">and</span> <span class="n">atomic_c</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">seen_set</span><span class="p">:</span>
                        <span class="n">seen_set</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">atomic_c</span><span class="p">)</span>
                        <span class="k">yield</span> <span class="n">atomic_c</span>
                        <span class="k">yield from</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sub_classes_recursive</span><span class="p">(</span><span class="n">atomic_c</span><span class="p">,</span> <span class="n">seen_set</span><span class="p">,</span> <span class="n">only_named</span><span class="o">=</span><span class="n">only_named</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ce</span><span class="p">,</span> <span class="n">OWLObjectSomeValuesFrom</span><span class="p">):</span>
                    <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">sub_object_properties</span><span class="p">(</span><span class="n">ce</span><span class="o">.</span><span class="n">get_property</span><span class="p">()):</span>
                        <span class="n">osvf</span> <span class="o">=</span> <span class="n">OWLObjectSomeValuesFrom</span><span class="p">(</span><span class="nb">property</span><span class="o">=</span><span class="n">r</span><span class="p">,</span>
                                                       <span class="n">filler</span><span class="o">=</span><span class="n">ce</span><span class="o">.</span><span class="n">get_filler</span><span class="p">())</span>
                        <span class="k">if</span> <span class="n">osvf</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">seen_set</span><span class="p">:</span>
                            <span class="n">seen_set</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">osvf</span><span class="p">)</span>
                            <span class="k">yield</span> <span class="n">osvf</span>
                            <span class="c1"># yield from self._sub_classes_recursive(osvf, seen_set, only_named=only_named)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Sub classes retrieval not implemented for: </span><span class="si">{</span><span class="n">ce</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

<div class="viewcode-block" id="StructuralReasoner.sub_classes">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.StructuralReasoner.sub_classes">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">sub_classes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ce</span><span class="p">:</span> <span class="n">OWLClassExpression</span><span class="p">,</span> <span class="n">direct</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">only_named</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> \
            <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">OWLClassExpression</span><span class="p">]:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">direct</span><span class="p">:</span>
            <span class="n">seen_set</span> <span class="o">=</span> <span class="p">{</span><span class="n">ce</span><span class="p">}</span>
            <span class="k">yield from</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sub_classes_recursive</span><span class="p">(</span><span class="n">ce</span><span class="p">,</span> <span class="n">seen_set</span><span class="p">,</span> <span class="n">only_named</span><span class="o">=</span><span class="n">only_named</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># First go through all general class axioms, they should only have complex classes as sub_classes.</span>
            <span class="c1"># Done for OWLClass and OWLClassExpression.</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">only_named</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">axiom</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ontology</span><span class="o">.</span><span class="n">general_class_axioms</span><span class="p">():</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">axiom</span><span class="p">,</span> <span class="n">OWLSubClassOfAxiom</span><span class="p">)</span> <span class="ow">and</span> <span class="n">axiom</span><span class="o">.</span><span class="n">get_super_class</span><span class="p">()</span> <span class="o">==</span> <span class="n">ce</span><span class="p">:</span>
                        <span class="k">yield</span> <span class="n">axiom</span><span class="o">.</span><span class="n">get_sub_class</span><span class="p">()</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ce</span><span class="p">,</span> <span class="n">OWLClass</span><span class="p">):</span>
                <span class="n">c_x</span><span class="p">:</span> <span class="n">owlready2</span><span class="o">.</span><span class="n">ThingClass</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_world</span><span class="p">[</span><span class="n">ce</span><span class="o">.</span><span class="n">str</span><span class="p">]</span>
                <span class="c1"># Subclasses will only return named classes</span>
                <span class="k">for</span> <span class="n">sc</span> <span class="ow">in</span> <span class="n">c_x</span><span class="o">.</span><span class="n">subclasses</span><span class="p">(</span><span class="n">world</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_world</span><span class="p">):</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">sc</span><span class="p">,</span> <span class="n">owlready2</span><span class="o">.</span><span class="n">ThingClass</span><span class="p">):</span>
                        <span class="k">yield</span> <span class="n">OWLClass</span><span class="p">(</span><span class="n">IRI</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">sc</span><span class="o">.</span><span class="n">iri</span><span class="p">))</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ce</span><span class="p">,</span> <span class="n">OWLClassExpression</span><span class="p">):</span>
                <span class="c1"># Slow but works. No better way to do this in owlready2 without using the reasoners at the moment.</span>
                <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ontology</span><span class="o">.</span><span class="n">classes_in_signature</span><span class="p">():</span>
                    <span class="k">if</span> <span class="n">ce</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">super_classes</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">direct</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">only_named</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
                        <span class="k">yield</span> <span class="n">c</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Sub classes retrieval not implemented for: </span><span class="si">{</span><span class="n">ce</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span></div>


    <span class="k">def</span><span class="w"> </span><span class="nf">_super_classes_recursive</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ce</span><span class="p">:</span> <span class="n">OWLClassExpression</span><span class="p">,</span> <span class="n">seen_set</span><span class="p">:</span> <span class="n">Set</span><span class="p">,</span> <span class="n">only_named</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> \
            <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">OWLClassExpression</span><span class="p">]:</span>
        <span class="c1"># work around issue in class equivalence detection in Owlready2</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="p">[</span><span class="n">ce</span><span class="p">,</span> <span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">equivalent_classes</span><span class="p">(</span><span class="n">ce</span><span class="p">,</span> <span class="n">only_named</span><span class="o">=</span><span class="kc">False</span><span class="p">)]:</span>
            <span class="k">if</span> <span class="n">c</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">seen_set</span><span class="p">:</span>
                <span class="n">seen_set</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
                <span class="k">yield</span> <span class="n">c</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">OWLClass</span><span class="p">):</span>
                <span class="n">c_x</span><span class="p">:</span> <span class="n">owlready2</span><span class="o">.</span><span class="n">EntityClass</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_world</span><span class="p">[</span><span class="n">c</span><span class="o">.</span><span class="n">str</span><span class="p">]</span>
                <span class="k">for</span> <span class="n">sc_x</span> <span class="ow">in</span> <span class="n">c_x</span><span class="o">.</span><span class="n">is_a</span><span class="p">:</span>
                    <span class="n">sc</span> <span class="o">=</span> <span class="n">_parse_concept_to_owlapy</span><span class="p">(</span><span class="n">sc_x</span><span class="p">)</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">sc</span><span class="p">,</span> <span class="n">OWLClass</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">sc</span><span class="p">,</span> <span class="n">OWLClassExpression</span><span class="p">))</span> <span class="ow">and</span> <span class="n">sc</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">seen_set</span><span class="p">:</span>
                        <span class="n">seen_set</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">sc</span><span class="p">)</span>
                        <span class="c1"># Return class expression if it is a named class or complex class expressions should be</span>
                        <span class="c1"># included</span>
                        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">sc</span><span class="p">,</span> <span class="n">OWLClass</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">only_named</span><span class="p">:</span>
                            <span class="k">yield</span> <span class="n">sc</span>
                        <span class="k">yield from</span> <span class="bp">self</span><span class="o">.</span><span class="n">_super_classes_recursive</span><span class="p">(</span><span class="n">sc</span><span class="p">,</span> <span class="n">seen_set</span><span class="p">,</span> <span class="n">only_named</span><span class="o">=</span><span class="n">only_named</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">OWLClassExpression</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">axiom</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ontology</span><span class="o">.</span><span class="n">general_class_axioms</span><span class="p">():</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">axiom</span><span class="p">,</span> <span class="n">OWLSubClassOfAxiom</span><span class="p">)</span> <span class="ow">and</span> <span class="n">axiom</span><span class="o">.</span><span class="n">get_sub_class</span><span class="p">()</span> <span class="o">==</span> <span class="n">c</span>
                            <span class="ow">and</span> <span class="p">(</span><span class="n">axiom</span><span class="o">.</span><span class="n">get_super_class</span><span class="p">()</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">seen_set</span><span class="p">)):</span>
                        <span class="n">super_class</span> <span class="o">=</span> <span class="n">axiom</span><span class="o">.</span><span class="n">get_super_class</span><span class="p">()</span>
                        <span class="n">seen_set</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">super_class</span><span class="p">)</span>
                        <span class="c1"># Return class expression if it is a named class or complex class expressions should be</span>
                        <span class="c1"># included</span>
                        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">super_class</span><span class="p">,</span> <span class="n">OWLClass</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">only_named</span><span class="p">:</span>
                            <span class="k">yield</span> <span class="n">super_class</span>
                        <span class="k">yield from</span> <span class="bp">self</span><span class="o">.</span><span class="n">_super_classes_recursive</span><span class="p">(</span><span class="n">super_class</span><span class="p">,</span> <span class="n">seen_set</span><span class="p">,</span> <span class="n">only_named</span><span class="o">=</span><span class="n">only_named</span><span class="p">)</span>

                <span class="c1"># Slow but works. No better way to do this in owlready2 without using the reasoners at the moment.</span>
                <span class="k">for</span> <span class="n">atomic_c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ontology</span><span class="o">.</span><span class="n">classes_in_signature</span><span class="p">():</span>
                    <span class="k">if</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">sub_classes</span><span class="p">(</span><span class="n">atomic_c</span><span class="p">,</span> <span class="n">direct</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">only_named</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="ow">and</span> <span class="n">atomic_c</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">seen_set</span><span class="p">:</span>
                        <span class="n">seen_set</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">atomic_c</span><span class="p">)</span>
                        <span class="k">yield</span> <span class="n">atomic_c</span>
                        <span class="k">yield from</span> <span class="bp">self</span><span class="o">.</span><span class="n">_super_classes_recursive</span><span class="p">(</span><span class="n">atomic_c</span><span class="p">,</span> <span class="n">seen_set</span><span class="p">,</span> <span class="n">only_named</span><span class="o">=</span><span class="n">only_named</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Super classes retrieval not supported for: </span><span class="si">{</span><span class="n">ce</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

<div class="viewcode-block" id="StructuralReasoner.super_classes">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.StructuralReasoner.super_classes">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">super_classes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ce</span><span class="p">:</span> <span class="n">OWLClassExpression</span><span class="p">,</span> <span class="n">direct</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">only_named</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> \
            <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">OWLClassExpression</span><span class="p">]:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">direct</span><span class="p">:</span>
            <span class="n">seen_set</span> <span class="o">=</span> <span class="p">{</span><span class="n">ce</span><span class="p">}</span>
            <span class="k">yield from</span> <span class="bp">self</span><span class="o">.</span><span class="n">_super_classes_recursive</span><span class="p">(</span><span class="n">ce</span><span class="p">,</span> <span class="n">seen_set</span><span class="p">,</span> <span class="n">only_named</span><span class="o">=</span><span class="n">only_named</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ce</span><span class="p">,</span> <span class="n">OWLClass</span><span class="p">):</span>
                <span class="n">c_x</span><span class="p">:</span> <span class="n">owlready2</span><span class="o">.</span><span class="n">ThingClass</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_world</span><span class="p">[</span><span class="n">ce</span><span class="o">.</span><span class="n">str</span><span class="p">]</span>
                <span class="k">for</span> <span class="n">sc</span> <span class="ow">in</span> <span class="n">c_x</span><span class="o">.</span><span class="n">is_a</span><span class="p">:</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">sc</span><span class="p">,</span> <span class="n">owlready2</span><span class="o">.</span><span class="n">ThingClass</span><span class="p">)</span> <span class="ow">or</span>
                            <span class="p">(</span><span class="ow">not</span> <span class="n">only_named</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">sc</span><span class="p">,</span> <span class="n">owlready2</span><span class="o">.</span><span class="n">ClassConstruct</span><span class="p">))):</span>
                        <span class="k">yield</span> <span class="n">_parse_concept_to_owlapy</span><span class="p">(</span><span class="n">sc</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ce</span><span class="p">,</span> <span class="n">OWLClassExpression</span><span class="p">):</span>
                <span class="n">seen_set</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
                <span class="k">for</span> <span class="n">axiom</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ontology</span><span class="o">.</span><span class="n">general_class_axioms</span><span class="p">():</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">axiom</span><span class="p">,</span> <span class="n">OWLSubClassOfAxiom</span><span class="p">)</span> <span class="ow">and</span> <span class="n">axiom</span><span class="o">.</span><span class="n">get_sub_class</span><span class="p">()</span> <span class="o">==</span> <span class="n">ce</span>
                            <span class="ow">and</span> <span class="p">(</span><span class="ow">not</span> <span class="n">only_named</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">axiom</span><span class="o">.</span><span class="n">get_super_class</span><span class="p">(),</span> <span class="n">OWLClass</span><span class="p">))):</span>
                        <span class="n">seen_set</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">axiom</span><span class="o">.</span><span class="n">get_super_class</span><span class="p">())</span>
                        <span class="k">yield</span> <span class="n">axiom</span><span class="o">.</span><span class="n">get_super_class</span><span class="p">()</span>
                <span class="c1"># Slow but works. No better way to do this in owlready2 without using the reasoners at the moment.</span>
                <span class="c1"># TODO: Might not be needed, in theory the general class axioms above should cover all classes</span>
                <span class="c1"># that can be found here</span>
                <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ontology</span><span class="o">.</span><span class="n">classes_in_signature</span><span class="p">():</span>
                    <span class="k">if</span> <span class="n">ce</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">sub_classes</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">direct</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">only_named</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="ow">and</span> <span class="n">c</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">seen_set</span><span class="p">:</span>
                        <span class="n">seen_set</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
                        <span class="k">yield</span> <span class="n">c</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Super classes retrieval not supported for </span><span class="si">{</span><span class="n">ce</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="StructuralReasoner.equivalent_object_properties">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.StructuralReasoner.equivalent_object_properties">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">equivalent_object_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">op</span><span class="p">:</span> <span class="n">OWLObjectPropertyExpression</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">OWLObjectPropertyExpression</span><span class="p">]:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">op</span><span class="p">,</span> <span class="n">OWLObjectProperty</span><span class="p">):</span>
            <span class="n">p_x</span><span class="p">:</span> <span class="n">owlready2</span><span class="o">.</span><span class="n">ObjectPropertyClass</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_world</span><span class="p">[</span><span class="n">op</span><span class="o">.</span><span class="n">str</span><span class="p">]</span>
            <span class="k">yield from</span> <span class="p">(</span><span class="n">OWLObjectProperty</span><span class="p">(</span><span class="n">IRI</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">ep_x</span><span class="o">.</span><span class="n">iri</span><span class="p">))</span> <span class="k">for</span> <span class="n">ep_x</span> <span class="ow">in</span> <span class="n">p_x</span><span class="o">.</span><span class="n">INDIRECT_equivalent_to</span>
                        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ep_x</span><span class="p">,</span> <span class="n">owlready2</span><span class="o">.</span><span class="n">ObjectPropertyClass</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;equivalent properties of inverse properties not yet implemented&quot;</span><span class="p">,</span> <span class="n">op</span><span class="p">)</span></div>


<div class="viewcode-block" id="StructuralReasoner.equivalent_data_properties">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.StructuralReasoner.equivalent_data_properties">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">equivalent_data_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dp</span><span class="p">:</span> <span class="n">OWLDataProperty</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">OWLDataProperty</span><span class="p">]:</span>
        <span class="n">p_x</span><span class="p">:</span> <span class="n">owlready2</span><span class="o">.</span><span class="n">DataPropertyClass</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_world</span><span class="p">[</span><span class="n">dp</span><span class="o">.</span><span class="n">str</span><span class="p">]</span>
        <span class="k">yield from</span> <span class="p">(</span><span class="n">OWLDataProperty</span><span class="p">(</span><span class="n">IRI</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">ep_x</span><span class="o">.</span><span class="n">iri</span><span class="p">))</span> <span class="k">for</span> <span class="n">ep_x</span> <span class="ow">in</span> <span class="n">p_x</span><span class="o">.</span><span class="n">INDIRECT_equivalent_to</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ep_x</span><span class="p">,</span> <span class="n">owlready2</span><span class="o">.</span><span class="n">DataPropertyClass</span><span class="p">))</span></div>


    <span class="k">def</span><span class="w"> </span><span class="nf">_find_disjoint_object_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">op</span><span class="p">:</span> <span class="n">OWLObjectPropertyExpression</span><span class="p">,</span> <span class="n">seen_set</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> \
            <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">OWLObjectPropertyExpression</span><span class="p">]:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">op</span><span class="p">,</span> <span class="n">OWLObjectProperty</span><span class="p">):</span>
            <span class="n">p_x</span><span class="p">:</span> <span class="n">owlready2</span><span class="o">.</span><span class="n">ObjectPropertyClass</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_world</span><span class="p">[</span><span class="n">op</span><span class="o">.</span><span class="n">str</span><span class="p">]</span>
            <span class="n">ont_x</span><span class="p">:</span> <span class="n">owlready2</span><span class="o">.</span><span class="n">Ontology</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_root_ontology</span><span class="p">()</span><span class="o">.</span><span class="n">_onto</span>
            <span class="k">for</span> <span class="n">disjoint</span> <span class="ow">in</span> <span class="n">ont_x</span><span class="o">.</span><span class="n">disjoint_properties</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">p_x</span> <span class="ow">in</span> <span class="n">disjoint</span><span class="o">.</span><span class="n">entities</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">o_p</span> <span class="ow">in</span> <span class="n">disjoint</span><span class="o">.</span><span class="n">entities</span><span class="p">:</span>
                        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">o_p</span><span class="p">,</span> <span class="n">owlready2</span><span class="o">.</span><span class="n">ObjectPropertyClass</span><span class="p">)</span> <span class="ow">and</span> <span class="n">o_p</span> <span class="o">!=</span> <span class="n">p_x</span><span class="p">:</span>
                            <span class="n">op_owlapy</span> <span class="o">=</span> <span class="n">OWLObjectProperty</span><span class="p">(</span><span class="n">IRI</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">o_p</span><span class="o">.</span><span class="n">iri</span><span class="p">))</span>
                            <span class="n">seen_set</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">op_owlapy</span><span class="p">)</span>
                            <span class="k">yield</span> <span class="n">op_owlapy</span>
                            <span class="k">for</span> <span class="n">o</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">equivalent_object_properties</span><span class="p">(</span><span class="n">op_owlapy</span><span class="p">):</span>
                                <span class="k">if</span> <span class="n">o</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">seen_set</span><span class="p">:</span>
                                    <span class="n">seen_set</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">o</span><span class="p">)</span>
                                    <span class="k">yield</span> <span class="n">o</span>
                            <span class="k">for</span> <span class="n">o</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">sub_object_properties</span><span class="p">(</span><span class="n">op_owlapy</span><span class="p">):</span>
                                <span class="k">if</span> <span class="n">o</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">seen_set</span><span class="p">:</span>
                                    <span class="n">seen_set</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">o</span><span class="p">)</span>
                                    <span class="k">yield</span> <span class="n">o</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;disjoint object properties of inverse properties not yet implemented&quot;</span><span class="p">,</span> <span class="n">op</span><span class="p">)</span>

<div class="viewcode-block" id="StructuralReasoner.disjoint_object_properties">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.StructuralReasoner.disjoint_object_properties">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">disjoint_object_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">op</span><span class="p">:</span> <span class="n">OWLObjectPropertyExpression</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">OWLObjectPropertyExpression</span><span class="p">]:</span>
        <span class="n">seen_set</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">op</span> <span class="ow">is</span> <span class="n">OWLBottomObjectProperty</span><span class="p">:</span>
            <span class="k">yield from</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ontology</span><span class="o">.</span><span class="n">object_properties_in_signature</span><span class="p">()</span>
            <span class="k">yield</span> <span class="n">OWLTopObjectProperty</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="n">op</span> <span class="ow">is</span> <span class="n">OWLTopObjectProperty</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">OWLBottomObjectProperty</span>
            <span class="k">return</span>
        <span class="k">yield from</span> <span class="bp">self</span><span class="o">.</span><span class="n">_find_disjoint_object_properties</span><span class="p">(</span><span class="n">op</span><span class="p">,</span> <span class="n">seen_set</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">o</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">super_object_properties</span><span class="p">(</span><span class="n">op</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">o</span> <span class="o">!=</span> <span class="n">OWLObjectProperty</span><span class="p">(</span><span class="n">IRI</span><span class="p">(</span><span class="s1">&#39;http://www.w3.org/2002/07/owl#&#39;</span><span class="p">,</span> <span class="s1">&#39;ObjectProperty&#39;</span><span class="p">)):</span>
                <span class="k">yield from</span> <span class="bp">self</span><span class="o">.</span><span class="n">_find_disjoint_object_properties</span><span class="p">(</span><span class="n">o</span><span class="p">,</span> <span class="n">seen_set</span><span class="o">=</span><span class="n">seen_set</span><span class="p">)</span></div>


    <span class="k">def</span><span class="w"> </span><span class="nf">_find_disjoint_data_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dp</span><span class="p">:</span> <span class="n">OWLDataProperty</span><span class="p">,</span> <span class="n">seen_set</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">OWLDataProperty</span><span class="p">]:</span>
        <span class="n">p_x</span><span class="p">:</span> <span class="n">owlready2</span><span class="o">.</span><span class="n">DataPropertyClass</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_world</span><span class="p">[</span><span class="n">dp</span><span class="o">.</span><span class="n">str</span><span class="p">]</span>
        <span class="n">ont_x</span><span class="p">:</span> <span class="n">owlready2</span><span class="o">.</span><span class="n">Ontology</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_root_ontology</span><span class="p">()</span><span class="o">.</span><span class="n">_onto</span>
        <span class="k">for</span> <span class="n">disjoint</span> <span class="ow">in</span> <span class="n">ont_x</span><span class="o">.</span><span class="n">disjoint_properties</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">p_x</span> <span class="ow">in</span> <span class="n">disjoint</span><span class="o">.</span><span class="n">entities</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">d_p</span> <span class="ow">in</span> <span class="n">disjoint</span><span class="o">.</span><span class="n">entities</span><span class="p">:</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">d_p</span><span class="p">,</span> <span class="n">owlready2</span><span class="o">.</span><span class="n">DataPropertyClass</span><span class="p">)</span> <span class="ow">and</span> <span class="n">d_p</span> <span class="o">!=</span> <span class="n">p_x</span><span class="p">:</span>
                        <span class="n">dp_owlapy</span> <span class="o">=</span> <span class="n">OWLDataProperty</span><span class="p">(</span><span class="n">IRI</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">d_p</span><span class="o">.</span><span class="n">iri</span><span class="p">))</span>
                        <span class="n">seen_set</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">dp_owlapy</span><span class="p">)</span>
                        <span class="k">yield</span> <span class="n">dp_owlapy</span>
                        <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">equivalent_data_properties</span><span class="p">(</span><span class="n">dp_owlapy</span><span class="p">):</span>
                            <span class="k">if</span> <span class="n">d</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">seen_set</span><span class="p">:</span>
                                <span class="n">seen_set</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
                                <span class="k">yield</span> <span class="n">d</span>
                        <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">sub_data_properties</span><span class="p">(</span><span class="n">dp_owlapy</span><span class="p">):</span>
                            <span class="k">if</span> <span class="n">d</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">seen_set</span><span class="p">:</span>
                                <span class="n">seen_set</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
                                <span class="k">yield</span> <span class="n">d</span>

<div class="viewcode-block" id="StructuralReasoner.disjoint_data_properties">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.StructuralReasoner.disjoint_data_properties">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">disjoint_data_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dp</span><span class="p">:</span> <span class="n">OWLDataProperty</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">OWLDataProperty</span><span class="p">]:</span>
        <span class="n">seen_set</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">dp</span> <span class="ow">is</span> <span class="n">OWLBottomDataProperty</span><span class="p">:</span>
            <span class="k">yield from</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ontology</span><span class="o">.</span><span class="n">data_properties_in_signature</span><span class="p">()</span>
            <span class="k">yield</span> <span class="n">OWLTopDataProperty</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="n">dp</span> <span class="ow">is</span> <span class="n">OWLTopDataProperty</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">OWLBottomDataProperty</span>
            <span class="k">return</span>
        <span class="k">yield from</span> <span class="bp">self</span><span class="o">.</span><span class="n">_find_disjoint_data_properties</span><span class="p">(</span><span class="n">dp</span><span class="p">,</span> <span class="n">seen_set</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">super_data_properties</span><span class="p">(</span><span class="n">dp</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">d</span> <span class="o">!=</span> <span class="n">OWLDataProperty</span><span class="p">(</span><span class="n">IRI</span><span class="p">(</span><span class="s1">&#39;http://www.w3.org/2002/07/owl#&#39;</span><span class="p">,</span> <span class="s1">&#39;DatatypeProperty&#39;</span><span class="p">)):</span>
                <span class="k">yield from</span> <span class="bp">self</span><span class="o">.</span><span class="n">_find_disjoint_data_properties</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">seen_set</span><span class="o">=</span><span class="n">seen_set</span><span class="p">)</span></div>


    <span class="k">def</span><span class="w"> </span><span class="nf">_sup_or_sub_data_properties_recursive</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dp</span><span class="p">:</span> <span class="n">OWLDataProperty</span><span class="p">,</span> <span class="n">seen_set</span><span class="p">:</span> <span class="n">Set</span><span class="p">,</span> <span class="n">super_or_sub</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span> \
            <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">OWLDataProperty</span><span class="p">]:</span>
        <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">equivalent_data_properties</span><span class="p">(</span><span class="n">dp</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">d</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">seen_set</span><span class="p">:</span>
                <span class="n">seen_set</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
                <span class="k">yield</span> <span class="n">d</span>
        <span class="n">p_x</span><span class="p">:</span> <span class="n">owlready2</span><span class="o">.</span><span class="n">DataPropertyClass</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_world</span><span class="p">[</span><span class="n">dp</span><span class="o">.</span><span class="n">str</span><span class="p">]</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">p_x</span><span class="p">,</span> <span class="n">owlready2</span><span class="o">.</span><span class="n">DataPropertyClass</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">super_or_sub</span> <span class="o">==</span> <span class="s2">&quot;super&quot;</span><span class="p">:</span>
            <span class="n">dps</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">p_x</span><span class="o">.</span><span class="n">is_a</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">dps</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">p_x</span><span class="o">.</span><span class="n">subclasses</span><span class="p">(</span><span class="n">world</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_world</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">sp_x</span> <span class="ow">in</span> <span class="n">dps</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">sp_x</span><span class="p">,</span> <span class="n">owlready2</span><span class="o">.</span><span class="n">DataPropertyClass</span><span class="p">):</span>
                <span class="n">sp</span> <span class="o">=</span> <span class="n">OWLDataProperty</span><span class="p">(</span><span class="n">IRI</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">sp_x</span><span class="o">.</span><span class="n">iri</span><span class="p">))</span>
                <span class="k">if</span> <span class="n">sp</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">seen_set</span><span class="p">:</span>
                    <span class="n">seen_set</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">sp</span><span class="p">)</span>
                    <span class="k">yield</span> <span class="n">sp</span>
                    <span class="k">yield from</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sup_or_sub_data_properties_recursive</span><span class="p">(</span><span class="n">sp</span><span class="p">,</span> <span class="n">seen_set</span><span class="p">,</span> <span class="n">super_or_sub</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_sup_or_sub_data_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dp</span><span class="p">:</span> <span class="n">OWLDataProperty</span><span class="p">,</span> <span class="n">direct</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">super_or_sub</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">):</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">dp</span><span class="p">,</span> <span class="n">OWLDataProperty</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">direct</span><span class="p">:</span>
            <span class="n">p_x</span><span class="p">:</span> <span class="n">owlready2</span><span class="o">.</span><span class="n">DataPropertyClass</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_world</span><span class="p">[</span><span class="n">dp</span><span class="o">.</span><span class="n">str</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">super_or_sub</span> <span class="o">==</span> <span class="s2">&quot;super&quot;</span><span class="p">:</span>
                <span class="n">dps</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">p_x</span><span class="o">.</span><span class="n">is_a</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">dps</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">p_x</span><span class="o">.</span><span class="n">subclasses</span><span class="p">(</span><span class="n">world</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_world</span><span class="p">))</span>
            <span class="k">for</span> <span class="n">sp</span> <span class="ow">in</span> <span class="n">dps</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">sp</span><span class="p">,</span> <span class="n">owlready2</span><span class="o">.</span><span class="n">DataPropertyClass</span><span class="p">):</span>
                    <span class="k">yield</span> <span class="n">OWLDataProperty</span><span class="p">(</span><span class="n">IRI</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">sp</span><span class="o">.</span><span class="n">iri</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">seen_set</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
            <span class="k">yield from</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sup_or_sub_data_properties_recursive</span><span class="p">(</span><span class="n">dp</span><span class="p">,</span> <span class="n">seen_set</span><span class="p">,</span> <span class="n">super_or_sub</span><span class="p">)</span>

<div class="viewcode-block" id="StructuralReasoner.super_data_properties">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.StructuralReasoner.super_data_properties">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">super_data_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dp</span><span class="p">:</span> <span class="n">OWLDataProperty</span><span class="p">,</span> <span class="n">direct</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">OWLDataProperty</span><span class="p">]:</span>
        <span class="k">yield from</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sup_or_sub_data_properties</span><span class="p">(</span><span class="n">dp</span><span class="p">,</span> <span class="n">direct</span><span class="p">,</span> <span class="s2">&quot;super&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="StructuralReasoner.sub_data_properties">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.StructuralReasoner.sub_data_properties">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">sub_data_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dp</span><span class="p">:</span> <span class="n">OWLDataProperty</span><span class="p">,</span> <span class="n">direct</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">OWLDataProperty</span><span class="p">]:</span>
        <span class="k">yield from</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sup_or_sub_data_properties</span><span class="p">(</span><span class="n">dp</span><span class="p">,</span> <span class="n">direct</span><span class="p">,</span> <span class="s2">&quot;sub&quot;</span><span class="p">)</span></div>


    <span class="k">def</span><span class="w"> </span><span class="nf">_sup_or_sub_object_properties_recursive</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">op</span><span class="p">:</span> <span class="n">OWLObjectProperty</span><span class="p">,</span> <span class="n">seen_set</span><span class="p">:</span> <span class="n">Set</span><span class="p">,</span> <span class="n">super_or_sub</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">o</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">equivalent_object_properties</span><span class="p">(</span><span class="n">op</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">o</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">seen_set</span><span class="p">:</span>
                <span class="n">seen_set</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">o</span><span class="p">)</span>
                <span class="k">yield</span> <span class="n">o</span>
        <span class="n">p_x</span><span class="p">:</span> <span class="n">owlready2</span><span class="o">.</span><span class="n">ObjectPropertyClass</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_world</span><span class="p">[</span><span class="n">op</span><span class="o">.</span><span class="n">str</span><span class="p">]</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">p_x</span><span class="p">,</span> <span class="n">owlready2</span><span class="o">.</span><span class="n">ObjectPropertyClass</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">super_or_sub</span> <span class="o">==</span> <span class="s2">&quot;super&quot;</span><span class="p">:</span>
            <span class="n">dps</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">p_x</span><span class="o">.</span><span class="n">is_a</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">dps</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">p_x</span><span class="o">.</span><span class="n">subclasses</span><span class="p">(</span><span class="n">world</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_world</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">sp_x</span> <span class="ow">in</span> <span class="n">dps</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">sp_x</span><span class="p">,</span> <span class="n">owlready2</span><span class="o">.</span><span class="n">ObjectPropertyClass</span><span class="p">):</span>
                <span class="n">sp</span> <span class="o">=</span> <span class="n">OWLObjectProperty</span><span class="p">(</span><span class="n">IRI</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">sp_x</span><span class="o">.</span><span class="n">iri</span><span class="p">))</span>
                <span class="k">if</span> <span class="n">sp</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">seen_set</span><span class="p">:</span>
                    <span class="n">seen_set</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">sp</span><span class="p">)</span>
                    <span class="k">yield</span> <span class="n">sp</span>
                    <span class="k">yield from</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sup_or_sub_object_properties_recursive</span><span class="p">(</span><span class="n">sp</span><span class="p">,</span> <span class="n">seen_set</span><span class="p">,</span> <span class="n">super_or_sub</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_sup_or_sub_object_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">op</span><span class="p">:</span> <span class="n">OWLObjectPropertyExpression</span><span class="p">,</span> <span class="n">direct</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">super_or_sub</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span> \
            <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">OWLObjectPropertyExpression</span><span class="p">]:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">op</span><span class="p">,</span> <span class="n">OWLObjectProperty</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">direct</span><span class="p">:</span>
                <span class="n">p_x</span><span class="p">:</span> <span class="n">owlready2</span><span class="o">.</span><span class="n">ObjectPropertyClass</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_world</span><span class="p">[</span><span class="n">op</span><span class="o">.</span><span class="n">str</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">super_or_sub</span> <span class="o">==</span> <span class="s2">&quot;super&quot;</span><span class="p">:</span>
                    <span class="n">dps</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">p_x</span><span class="o">.</span><span class="n">is_a</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">dps</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">p_x</span><span class="o">.</span><span class="n">subclasses</span><span class="p">(</span><span class="n">world</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_world</span><span class="p">))</span>
                <span class="k">for</span> <span class="n">sp</span> <span class="ow">in</span> <span class="n">dps</span><span class="p">:</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">sp</span><span class="p">,</span> <span class="n">owlready2</span><span class="o">.</span><span class="n">ObjectPropertyClass</span><span class="p">):</span>
                        <span class="k">yield</span> <span class="n">OWLObjectProperty</span><span class="p">(</span><span class="n">IRI</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">sp</span><span class="o">.</span><span class="n">iri</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">seen_set</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
                <span class="k">yield from</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sup_or_sub_object_properties_recursive</span><span class="p">(</span><span class="n">op</span><span class="p">,</span> <span class="n">seen_set</span><span class="p">,</span> <span class="n">super_or_sub</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">op</span><span class="p">,</span> <span class="n">OWLObjectInverseOf</span><span class="p">):</span>
            <span class="n">p</span><span class="p">:</span> <span class="n">owlready2</span><span class="o">.</span><span class="n">ObjectPropertyClass</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_world</span><span class="p">[</span><span class="n">op</span><span class="o">.</span><span class="n">get_named_property</span><span class="p">()</span><span class="o">.</span><span class="n">str</span><span class="p">]</span>
            <span class="n">inverse_p</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">inverse_property</span>
            <span class="k">if</span> <span class="n">inverse_p</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">yield from</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sup_or_sub_object_properties</span><span class="p">(</span><span class="n">OWLObjectProperty</span><span class="p">(</span><span class="n">IRI</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">inverse_p</span><span class="o">.</span><span class="n">iri</span><span class="p">)),</span> <span class="n">direct</span><span class="p">,</span>
                                                              <span class="n">super_or_sub</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">super_or_sub</span><span class="si">}</span><span class="s1"> properties of inverse properties are only implemented if the&#39;</span>
                                          <span class="s1">&#39; inverse property is explicitly defined in the ontology. &#39;</span>
                                          <span class="sa">f</span><span class="s1">&#39;Property: </span><span class="si">{</span><span class="n">op</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="n">op</span><span class="p">)</span>

<div class="viewcode-block" id="StructuralReasoner.super_object_properties">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.StructuralReasoner.super_object_properties">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">super_object_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">op</span><span class="p">:</span> <span class="n">OWLObjectPropertyExpression</span><span class="p">,</span> <span class="n">direct</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> \
            <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">OWLObjectPropertyExpression</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets the stream of object properties that are the strict (potentially direct) super properties of the</span>
<span class="sd">         specified object property with respect to the imports closure of the root ontology.</span>

<span class="sd">         Args:</span>
<span class="sd">             op (OWLObjectPropertyExpression): The object property expression whose super properties are to be</span>
<span class="sd">                                                retrieved.</span>
<span class="sd">             direct (bool): Specifies if the direct super properties should be retrieved (True) or if the all</span>
<span class="sd">                            super properties (ancestors) should be retrieved (False).</span>

<span class="sd">         Returns:</span>
<span class="sd">             Iterable of super properties.</span>
<span class="sd">         &quot;&quot;&quot;</span>
        <span class="k">yield from</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sup_or_sub_object_properties</span><span class="p">(</span><span class="n">op</span><span class="p">,</span> <span class="n">direct</span><span class="p">,</span> <span class="s2">&quot;super&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="StructuralReasoner.sub_object_properties">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.StructuralReasoner.sub_object_properties">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">sub_object_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">op</span><span class="p">:</span> <span class="n">OWLObjectPropertyExpression</span><span class="p">,</span> <span class="n">direct</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> \
            <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">OWLObjectPropertyExpression</span><span class="p">]:</span>
        <span class="k">yield from</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sup_or_sub_object_properties</span><span class="p">(</span><span class="n">op</span><span class="p">,</span> <span class="n">direct</span><span class="p">,</span> <span class="s2">&quot;sub&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="StructuralReasoner.types">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.StructuralReasoner.types">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">types</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ind</span><span class="p">:</span> <span class="n">OWLNamedIndividual</span><span class="p">,</span> <span class="n">direct</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">OWLClass</span><span class="p">]:</span>
        <span class="n">i</span><span class="p">:</span> <span class="n">owlready2</span><span class="o">.</span><span class="n">Thing</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_world</span><span class="p">[</span><span class="n">ind</span><span class="o">.</span><span class="n">str</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">direct</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">i</span><span class="o">.</span><span class="n">is_a</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">owlready2</span><span class="o">.</span><span class="n">ThingClass</span><span class="p">):</span>
                    <span class="k">yield</span> <span class="n">OWLClass</span><span class="p">(</span><span class="n">IRI</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">iri</span><span class="p">))</span>
                <span class="c1"># Anonymous classes are ignored</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">i</span><span class="o">.</span><span class="n">INDIRECT_is_a</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">owlready2</span><span class="o">.</span><span class="n">ThingClass</span><span class="p">):</span>
                    <span class="k">yield</span> <span class="n">OWLClass</span><span class="p">(</span><span class="n">IRI</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">iri</span><span class="p">))</span></div>

                <span class="c1"># Anonymous classes are ignored</span>

<div class="viewcode-block" id="StructuralReasoner.get_root_ontology">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.StructuralReasoner.get_root_ontology">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_root_ontology</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AbstractOWLOntology</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ontology</span></div>


    <span class="k">def</span><span class="w"> </span><span class="nf">_lazy_cache_obj_prop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pe</span><span class="p">:</span> <span class="n">OWLObjectPropertyExpression</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get all individuals involved in this object property and put them in a Dict.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pe</span><span class="p">,</span> <span class="n">OWLObjectInverseOf</span><span class="p">):</span>
            <span class="n">inverse</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">if</span> <span class="n">pe</span><span class="o">.</span><span class="n">get_named_property</span><span class="p">()</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_obj_prop_inv</span><span class="p">:</span>
                <span class="k">return</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pe</span><span class="p">,</span> <span class="n">OWLObjectProperty</span><span class="p">):</span>
            <span class="n">inverse</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">if</span> <span class="n">pe</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_obj_prop</span><span class="p">:</span>
                <span class="k">return</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span>

        <span class="c1"># Dict with Individual =&gt; Set[Individual]</span>
        <span class="n">opc</span><span class="p">:</span> <span class="n">DefaultDict</span><span class="p">[</span><span class="n">OWLNamedIndividual</span><span class="p">,</span> <span class="n">Set</span><span class="p">[</span><span class="n">OWLNamedIndividual</span><span class="p">]]</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">set</span><span class="p">)</span>

        <span class="c1"># shortcut for owlready2</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">owlapy.owl_ontology</span><span class="w"> </span><span class="kn">import</span> <span class="n">Ontology</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ontology</span><span class="p">,</span> <span class="n">Ontology</span><span class="p">):</span>
            <span class="kn">import</span><span class="w"> </span><span class="nn">owlready2</span>
            <span class="c1"># _x =&gt; owlready2 objects</span>
            <span class="k">for</span> <span class="n">l_x</span><span class="p">,</span> <span class="n">r_x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_retrieve_triples</span><span class="p">(</span><span class="n">pe</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">inverse</span><span class="p">:</span>
                    <span class="n">o_x</span> <span class="o">=</span> <span class="n">l_x</span>
                    <span class="n">s_x</span> <span class="o">=</span> <span class="n">r_x</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">s_x</span> <span class="o">=</span> <span class="n">l_x</span>
                    <span class="n">o_x</span> <span class="o">=</span> <span class="n">r_x</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">s_x</span><span class="p">,</span> <span class="n">owlready2</span><span class="o">.</span><span class="n">Thing</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">o_x</span><span class="p">,</span> <span class="n">owlready2</span><span class="o">.</span><span class="n">Thing</span><span class="p">):</span>
                    <span class="n">s</span> <span class="o">=</span> <span class="n">OWLNamedIndividual</span><span class="p">(</span><span class="n">IRI</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">s_x</span><span class="o">.</span><span class="n">iri</span><span class="p">))</span>
                    <span class="n">o</span> <span class="o">=</span> <span class="n">OWLNamedIndividual</span><span class="p">(</span><span class="n">IRI</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">o_x</span><span class="o">.</span><span class="n">iri</span><span class="p">))</span>
                    <span class="k">if</span> <span class="n">s</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">opc</span><span class="p">:</span>
                        <span class="n">opc</span><span class="p">[</span><span class="n">s</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
                    <span class="n">opc</span><span class="p">[</span><span class="n">s</span><span class="p">]</span> <span class="o">|=</span> <span class="p">{</span><span class="n">o</span><span class="p">}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">all_</span> <span class="o">=</span> <span class="nb">frozenset</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ontology</span><span class="o">.</span><span class="n">individuals_in_signature</span><span class="p">())</span>
            <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">all_</span><span class="p">:</span>
                <span class="n">individuals</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">object_property_values</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">pe</span><span class="p">,</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sub_properties</span><span class="p">))</span>
                <span class="k">if</span> <span class="n">individuals</span><span class="p">:</span>
                    <span class="n">opc</span><span class="p">[</span><span class="n">s</span><span class="p">]</span> <span class="o">=</span> <span class="n">individuals</span>

        <span class="k">if</span> <span class="n">inverse</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_obj_prop_inv</span><span class="p">[</span><span class="n">pe</span><span class="o">.</span><span class="n">get_named_property</span><span class="p">()]</span> <span class="o">=</span> <span class="n">MappingProxyType</span><span class="p">(</span><span class="n">opc</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_obj_prop</span><span class="p">[</span><span class="n">pe</span><span class="p">]</span> <span class="o">=</span> <span class="n">MappingProxyType</span><span class="p">(</span><span class="n">opc</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_some_values_subject_index</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pe</span><span class="p">:</span> <span class="n">OWLPropertyExpression</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FrozenSet</span><span class="p">[</span><span class="n">OWLNamedIndividual</span><span class="p">]:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pe</span><span class="p">,</span> <span class="n">OWLDataProperty</span><span class="p">):</span>
            <span class="n">typ</span> <span class="o">=</span> <span class="n">OWLDataProperty</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pe</span><span class="p">,</span> <span class="n">OWLObjectProperty</span><span class="p">):</span>
            <span class="n">typ</span> <span class="o">=</span> <span class="n">OWLObjectProperty</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pe</span><span class="p">,</span> <span class="n">OWLObjectInverseOf</span><span class="p">):</span>
            <span class="n">typ</span> <span class="o">=</span> <span class="n">OWLObjectInverseOf</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span>

        <span class="k">if</span> <span class="n">pe</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_has_prop</span><span class="p">[</span><span class="n">typ</span><span class="p">]:</span>
            <span class="n">subs</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>

            <span class="c1"># shortcut for owlready2</span>
            <span class="kn">from</span><span class="w"> </span><span class="nn">owlapy.owl_ontology</span><span class="w"> </span><span class="kn">import</span> <span class="n">Ontology</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ontology</span><span class="p">,</span> <span class="n">Ontology</span><span class="p">):</span>
                <span class="kn">import</span><span class="w"> </span><span class="nn">owlready2</span>
                <span class="c1"># _x =&gt; owlready2 objects</span>
                <span class="k">for</span> <span class="n">s_x</span><span class="p">,</span> <span class="n">o_x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_retrieve_triples</span><span class="p">(</span><span class="n">pe</span><span class="p">):</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pe</span><span class="p">,</span> <span class="n">OWLObjectInverseOf</span><span class="p">):</span>
                        <span class="n">l_x</span> <span class="o">=</span> <span class="n">o_x</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">l_x</span> <span class="o">=</span> <span class="n">s_x</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">l_x</span><span class="p">,</span> <span class="n">owlready2</span><span class="o">.</span><span class="n">Thing</span><span class="p">):</span>
                        <span class="n">subs</span> <span class="o">|=</span> <span class="p">{</span><span class="n">OWLNamedIndividual</span><span class="p">(</span><span class="n">IRI</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">l_x</span><span class="o">.</span><span class="n">iri</span><span class="p">))}</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pe</span><span class="p">,</span> <span class="n">OWLDataProperty</span><span class="p">):</span>
                    <span class="n">func</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_property_values</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">func</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">object_property_values</span>
                <span class="n">all_</span> <span class="o">=</span> <span class="nb">frozenset</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ontology</span><span class="o">.</span><span class="n">individuals_in_signature</span><span class="p">())</span>
                <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">all_</span><span class="p">:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="nb">next</span><span class="p">(</span><span class="nb">iter</span><span class="p">(</span><span class="n">func</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">pe</span><span class="p">,</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sub_properties</span><span class="p">)))</span>
                        <span class="n">subs</span> <span class="o">|=</span> <span class="p">{</span><span class="n">s</span><span class="p">}</span>
                    <span class="k">except</span> <span class="ne">StopIteration</span><span class="p">:</span>
                        <span class="k">pass</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_has_prop</span><span class="p">[</span><span class="n">typ</span><span class="p">][</span><span class="n">pe</span><span class="p">]</span> <span class="o">=</span> <span class="nb">frozenset</span><span class="p">(</span><span class="n">subs</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_has_prop</span><span class="p">[</span><span class="n">typ</span><span class="p">][</span><span class="n">pe</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_find_some_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pe</span><span class="p">:</span> <span class="n">OWLObjectPropertyExpression</span><span class="p">,</span> <span class="n">filler_inds</span><span class="p">:</span> <span class="n">Set</span><span class="p">[</span><span class="n">OWLNamedIndividual</span><span class="p">],</span>
                          <span class="n">min_count</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">max_count</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FrozenSet</span><span class="p">[</span><span class="n">OWLNamedIndividual</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get all individuals that have one of filler_inds as their object property value.&quot;&quot;&quot;</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ontology</span><span class="o">.</span><span class="n">is_modified</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">class_cache</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_property_cache</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">reset_and_disable_cache</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_property_cache</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_lazy_cache_obj_prop</span><span class="p">(</span><span class="n">pe</span><span class="p">)</span>

            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pe</span><span class="p">,</span> <span class="n">OWLObjectInverseOf</span><span class="p">):</span>
                <span class="n">ops</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_obj_prop_inv</span><span class="p">[</span><span class="n">pe</span><span class="o">.</span><span class="n">get_named_property</span><span class="p">()]</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pe</span><span class="p">,</span> <span class="n">OWLObjectProperty</span><span class="p">):</span>
                <span class="n">ops</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_obj_prop</span><span class="p">[</span><span class="n">pe</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span>

            <span class="n">exists_p</span> <span class="o">=</span> <span class="n">min_count</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">max_count</span> <span class="ow">is</span> <span class="kc">None</span>

            <span class="k">for</span> <span class="n">s</span><span class="p">,</span> <span class="n">o_set</span> <span class="ow">in</span> <span class="n">ops</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">exists_p</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">o_set</span> <span class="o">&amp;</span> <span class="n">filler_inds</span><span class="p">:</span>
                        <span class="n">ret</span> <span class="o">|=</span> <span class="p">{</span><span class="n">s</span><span class="p">}</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">o_set</span> <span class="o">&amp;</span> <span class="n">filler_inds</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">count</span> <span class="o">&gt;=</span> <span class="n">min_count</span> <span class="ow">and</span> <span class="p">(</span><span class="n">max_count</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">count</span> <span class="o">&lt;=</span> <span class="n">max_count</span><span class="p">):</span>
                        <span class="n">ret</span> <span class="o">|=</span> <span class="p">{</span><span class="n">s</span><span class="p">}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">subs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_some_values_subject_index</span><span class="p">(</span><span class="n">pe</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">subs</span><span class="p">:</span>
                <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="k">for</span> <span class="n">o</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">object_property_values</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">pe</span><span class="p">,</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sub_properties</span><span class="p">):</span>
                    <span class="k">if</span> <span class="p">{</span><span class="n">o</span><span class="p">}</span> <span class="o">&amp;</span> <span class="n">filler_inds</span><span class="p">:</span>
                        <span class="n">count</span> <span class="o">=</span> <span class="n">count</span> <span class="o">+</span> <span class="mi">1</span>
                        <span class="k">if</span> <span class="n">max_count</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">count</span> <span class="o">&gt;=</span> <span class="n">min_count</span><span class="p">:</span>
                            <span class="k">break</span>
                <span class="k">if</span> <span class="n">count</span> <span class="o">&gt;=</span> <span class="n">min_count</span> <span class="ow">and</span> <span class="p">(</span><span class="n">max_count</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">count</span> <span class="o">&lt;=</span> <span class="n">max_count</span><span class="p">):</span>
                    <span class="n">ret</span> <span class="o">|=</span> <span class="p">{</span><span class="n">s</span><span class="p">}</span>

        <span class="k">return</span> <span class="nb">frozenset</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_lazy_cache_data_prop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pe</span><span class="p">:</span> <span class="n">OWLDataPropertyExpression</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get all individuals and values involved in this data property and put them in a Dict.&quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">pe</span><span class="p">,</span> <span class="n">OWLDataProperty</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">pe</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data_prop</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="n">opc</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="n">OWLNamedIndividual</span><span class="p">,</span> <span class="n">Set</span><span class="p">[</span><span class="n">OWLLiteral</span><span class="p">]]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>

        <span class="c1"># shortcut for owlready2</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">owlapy.owl_ontology</span><span class="w"> </span><span class="kn">import</span> <span class="n">Ontology</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ontology</span><span class="p">,</span> <span class="n">Ontology</span><span class="p">):</span>
            <span class="kn">import</span><span class="w"> </span><span class="nn">owlready2</span>
            <span class="c1"># _x =&gt; owlready2 objects</span>
            <span class="k">for</span> <span class="n">s_x</span><span class="p">,</span> <span class="n">o_x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_retrieve_triples</span><span class="p">(</span><span class="n">pe</span><span class="p">):</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">s_x</span><span class="p">,</span> <span class="n">owlready2</span><span class="o">.</span><span class="n">Thing</span><span class="p">):</span>
                    <span class="n">o_literal</span> <span class="o">=</span> <span class="n">OWLLiteral</span><span class="p">(</span><span class="n">o_x</span><span class="p">)</span>
                    <span class="n">s</span> <span class="o">=</span> <span class="n">OWLNamedIndividual</span><span class="p">(</span><span class="n">IRI</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">s_x</span><span class="o">.</span><span class="n">iri</span><span class="p">))</span>
                    <span class="k">if</span> <span class="n">s</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">opc</span><span class="p">:</span>
                        <span class="n">opc</span><span class="p">[</span><span class="n">s</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
                    <span class="n">opc</span><span class="p">[</span><span class="n">s</span><span class="p">]</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">o_literal</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ind_set</span><span class="p">:</span>
                <span class="n">values</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_property_values</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">pe</span><span class="p">))</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">opc</span><span class="p">[</span><span class="n">s</span><span class="p">]</span> <span class="o">=</span> <span class="n">values</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_data_prop</span><span class="p">[</span><span class="n">pe</span><span class="p">]</span> <span class="o">=</span> <span class="n">MappingProxyType</span><span class="p">(</span><span class="n">opc</span><span class="p">)</span>

    <span class="c1"># single dispatch is still not implemented in mypy, see https://github.com/python/mypy/issues/2904</span>
    <span class="nd">@singledispatchmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_find_instances</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ce</span><span class="p">:</span> <span class="n">OWLClassExpression</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FrozenSet</span><span class="p">[</span><span class="n">OWLNamedIndividual</span><span class="p">]:</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="n">ce</span><span class="p">)</span>

    <span class="nd">@_find_instances</span><span class="o">.</span><span class="n">register</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">c</span><span class="p">:</span> <span class="n">OWLClass</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FrozenSet</span><span class="p">[</span><span class="n">OWLNamedIndividual</span><span class="p">]:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ontology</span><span class="o">.</span><span class="n">is_modified</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">class_cache</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_property_cache</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">reset_and_disable_cache</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">class_cache</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_lazy_cache_class</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cls_to_ind</span><span class="p">[</span><span class="n">c</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">frozenset</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_instances_from_owl_class</span><span class="p">(</span><span class="n">c</span><span class="p">))</span>

    <span class="nd">@_find_instances</span><span class="o">.</span><span class="n">register</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ce</span><span class="p">:</span> <span class="n">OWLObjectUnionOf</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FrozenSet</span><span class="p">[</span><span class="n">OWLNamedIndividual</span><span class="p">]:</span>
        <span class="k">return</span> <span class="n">reduce</span><span class="p">(</span><span class="n">operator</span><span class="o">.</span><span class="n">or_</span><span class="p">,</span> <span class="nb">map</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_find_instances</span><span class="p">,</span> <span class="n">ce</span><span class="o">.</span><span class="n">operands</span><span class="p">()))</span>

    <span class="nd">@_find_instances</span><span class="o">.</span><span class="n">register</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ce</span><span class="p">:</span> <span class="n">OWLObjectIntersectionOf</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FrozenSet</span><span class="p">[</span><span class="n">OWLNamedIndividual</span><span class="p">]:</span>
        <span class="k">return</span> <span class="n">reduce</span><span class="p">(</span><span class="n">operator</span><span class="o">.</span><span class="n">and_</span><span class="p">,</span> <span class="nb">map</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_find_instances</span><span class="p">,</span> <span class="n">ce</span><span class="o">.</span><span class="n">operands</span><span class="p">()))</span>

    <span class="nd">@_find_instances</span><span class="o">.</span><span class="n">register</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ce</span><span class="p">:</span> <span class="n">OWLObjectSomeValuesFrom</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FrozenSet</span><span class="p">[</span><span class="n">OWLNamedIndividual</span><span class="p">]:</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">ce</span><span class="o">.</span><span class="n">get_property</span><span class="p">()</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">OWLObjectPropertyExpression</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_property_cache</span> <span class="ow">and</span> <span class="n">ce</span><span class="o">.</span><span class="n">get_filler</span><span class="p">()</span><span class="o">.</span><span class="n">is_owl_thing</span><span class="p">():</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_some_values_subject_index</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>

        <span class="n">filler_ind</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_find_instances</span><span class="p">(</span><span class="n">ce</span><span class="o">.</span><span class="n">get_filler</span><span class="p">())</span>

        <span class="n">ind</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_find_some_values</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">filler_ind</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">ind</span>

    <span class="nd">@_find_instances</span><span class="o">.</span><span class="n">register</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ce</span><span class="p">:</span> <span class="n">OWLObjectComplementOf</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FrozenSet</span><span class="p">[</span><span class="n">OWLNamedIndividual</span><span class="p">]:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_negation_default</span><span class="p">:</span>
            <span class="n">all_</span> <span class="o">=</span> <span class="nb">frozenset</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ontology</span><span class="o">.</span><span class="n">individuals_in_signature</span><span class="p">())</span>
            <span class="n">complement_ind</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_find_instances</span><span class="p">(</span><span class="n">ce</span><span class="o">.</span><span class="n">get_operand</span><span class="p">())</span>
            <span class="k">return</span> <span class="n">all_</span> <span class="o">^</span> <span class="n">complement_ind</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># TODO! XXX</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">__warned</span> <span class="o">&amp;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Object Complement Of not implemented at </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">ce</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__warned</span> <span class="o">|=</span> <span class="mi">1</span>
            <span class="k">return</span> <span class="nb">frozenset</span><span class="p">()</span>
            <span class="c1"># if self.complement_as_negation:</span>
            <span class="c1">#     ...</span>
            <span class="c1"># else:</span>
            <span class="c1">#     self._lazy_cache_negation</span>

    <span class="nd">@_find_instances</span><span class="o">.</span><span class="n">register</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ce</span><span class="p">:</span> <span class="n">OWLObjectAllValuesFrom</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FrozenSet</span><span class="p">[</span><span class="n">OWLNamedIndividual</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_find_instances</span><span class="p">(</span>
            <span class="n">OWLObjectSomeValuesFrom</span><span class="p">(</span>
                <span class="nb">property</span><span class="o">=</span><span class="n">ce</span><span class="o">.</span><span class="n">get_property</span><span class="p">(),</span>
                <span class="n">filler</span><span class="o">=</span><span class="n">ce</span><span class="o">.</span><span class="n">get_filler</span><span class="p">()</span><span class="o">.</span><span class="n">get_object_complement_of</span><span class="p">()</span><span class="o">.</span><span class="n">get_nnf</span><span class="p">()</span>
            <span class="p">)</span><span class="o">.</span><span class="n">get_object_complement_of</span><span class="p">())</span>

    <span class="nd">@_find_instances</span><span class="o">.</span><span class="n">register</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ce</span><span class="p">:</span> <span class="n">OWLObjectOneOf</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FrozenSet</span><span class="p">[</span><span class="n">OWLNamedIndividual</span><span class="p">]:</span>
        <span class="k">return</span> <span class="nb">frozenset</span><span class="p">(</span><span class="n">ce</span><span class="o">.</span><span class="n">individuals</span><span class="p">())</span>

    <span class="nd">@_find_instances</span><span class="o">.</span><span class="n">register</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ce</span><span class="p">:</span> <span class="n">OWLObjectHasValue</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FrozenSet</span><span class="p">[</span><span class="n">OWLNamedIndividual</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_find_instances</span><span class="p">(</span><span class="n">ce</span><span class="o">.</span><span class="n">as_some_values_from</span><span class="p">())</span>

    <span class="nd">@_find_instances</span><span class="o">.</span><span class="n">register</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ce</span><span class="p">:</span> <span class="n">OWLObjectMinCardinality</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FrozenSet</span><span class="p">[</span><span class="n">OWLNamedIndividual</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_instances_object_card_restriction</span><span class="p">(</span><span class="n">ce</span><span class="p">)</span>

    <span class="nd">@_find_instances</span><span class="o">.</span><span class="n">register</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ce</span><span class="p">:</span> <span class="n">OWLObjectMaxCardinality</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FrozenSet</span><span class="p">[</span><span class="n">OWLNamedIndividual</span><span class="p">]:</span>
        <span class="n">all_</span> <span class="o">=</span> <span class="nb">frozenset</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ontology</span><span class="o">.</span><span class="n">individuals_in_signature</span><span class="p">())</span>
        <span class="n">min_ind</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_find_instances</span><span class="p">(</span><span class="n">OWLObjectMinCardinality</span><span class="p">(</span><span class="n">cardinality</span><span class="o">=</span><span class="n">ce</span><span class="o">.</span><span class="n">get_cardinality</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
                                                               <span class="nb">property</span><span class="o">=</span><span class="n">ce</span><span class="o">.</span><span class="n">get_property</span><span class="p">(),</span>
                                                               <span class="n">filler</span><span class="o">=</span><span class="n">ce</span><span class="o">.</span><span class="n">get_filler</span><span class="p">()))</span>
        <span class="k">return</span> <span class="n">all_</span> <span class="o">^</span> <span class="n">min_ind</span>

    <span class="nd">@_find_instances</span><span class="o">.</span><span class="n">register</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ce</span><span class="p">:</span> <span class="n">OWLObjectExactCardinality</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FrozenSet</span><span class="p">[</span><span class="n">OWLNamedIndividual</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_instances_object_card_restriction</span><span class="p">(</span><span class="n">ce</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_get_instances_object_card_restriction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ce</span><span class="p">:</span> <span class="n">OWLObjectCardinalityRestriction</span><span class="p">):</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">ce</span><span class="o">.</span><span class="n">get_property</span><span class="p">()</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">OWLObjectPropertyExpression</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ce</span><span class="p">,</span> <span class="n">OWLObjectMinCardinality</span><span class="p">):</span>
            <span class="n">min_count</span> <span class="o">=</span> <span class="n">ce</span><span class="o">.</span><span class="n">get_cardinality</span><span class="p">()</span>
            <span class="n">max_count</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ce</span><span class="p">,</span> <span class="n">OWLObjectExactCardinality</span><span class="p">):</span>
            <span class="n">min_count</span> <span class="o">=</span> <span class="n">max_count</span> <span class="o">=</span> <span class="n">ce</span><span class="o">.</span><span class="n">get_cardinality</span><span class="p">()</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ce</span><span class="p">,</span> <span class="n">OWLObjectMaxCardinality</span><span class="p">):</span>
            <span class="n">min_count</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">max_count</span> <span class="o">=</span> <span class="n">ce</span><span class="o">.</span><span class="n">get_cardinality</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ce</span><span class="p">,</span> <span class="n">OWLObjectCardinalityRestriction</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span>
        <span class="k">assert</span> <span class="n">min_count</span> <span class="o">&gt;=</span> <span class="mi">0</span>
        <span class="k">assert</span> <span class="n">max_count</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">max_count</span> <span class="o">&gt;=</span> <span class="mi">0</span>

        <span class="n">filler_ind</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_find_instances</span><span class="p">(</span><span class="n">ce</span><span class="o">.</span><span class="n">get_filler</span><span class="p">())</span>

        <span class="n">ind</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_find_some_values</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">filler_ind</span><span class="p">,</span> <span class="n">min_count</span><span class="o">=</span><span class="n">min_count</span><span class="p">,</span> <span class="n">max_count</span><span class="o">=</span><span class="n">max_count</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">ind</span>

    <span class="nd">@_find_instances</span><span class="o">.</span><span class="n">register</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ce</span><span class="p">:</span> <span class="n">OWLDataSomeValuesFrom</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FrozenSet</span><span class="p">[</span><span class="n">OWLNamedIndividual</span><span class="p">]:</span>
        <span class="n">pe</span> <span class="o">=</span> <span class="n">ce</span><span class="o">.</span><span class="n">get_property</span><span class="p">()</span>
        <span class="n">filler</span> <span class="o">=</span> <span class="n">ce</span><span class="o">.</span><span class="n">get_filler</span><span class="p">()</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pe</span><span class="p">,</span> <span class="n">OWLDataProperty</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ontology</span><span class="o">.</span><span class="n">is_modified</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">class_cache</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_property_cache</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">reset_and_disable_cache</span><span class="p">()</span>
        <span class="n">property_cache</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_property_cache</span>

        <span class="k">if</span> <span class="n">property_cache</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_lazy_cache_data_prop</span><span class="p">(</span><span class="n">pe</span><span class="p">)</span>
            <span class="n">dps</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data_prop</span><span class="p">[</span><span class="n">pe</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">subs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_some_values_subject_index</span><span class="p">(</span><span class="n">pe</span><span class="p">)</span>

        <span class="n">ind</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">filler</span><span class="p">,</span> <span class="n">OWLDatatype</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">property_cache</span><span class="p">:</span>
                <span class="c1"># TODO: Currently we just assume that the values are of the given type (also done in DLLearner)</span>
                <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">dps</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                    <span class="n">ind</span> <span class="o">|=</span> <span class="p">{</span><span class="n">s</span><span class="p">}</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">subs</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">lit</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_property_values</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">pe</span><span class="p">):</span>
                        <span class="k">if</span> <span class="n">lit</span><span class="o">.</span><span class="n">get_datatype</span><span class="p">()</span> <span class="o">==</span> <span class="n">filler</span><span class="p">:</span>
                            <span class="n">ind</span> <span class="o">|=</span> <span class="p">{</span><span class="n">s</span><span class="p">}</span>
                            <span class="k">break</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">filler</span><span class="p">,</span> <span class="n">OWLDataOneOf</span><span class="p">):</span>
            <span class="n">values</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">filler</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
            <span class="k">if</span> <span class="n">property_cache</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">s</span><span class="p">,</span> <span class="n">literals</span> <span class="ow">in</span> <span class="n">dps</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="k">if</span> <span class="n">literals</span> <span class="o">&amp;</span> <span class="n">values</span><span class="p">:</span>
                        <span class="n">ind</span> <span class="o">|=</span> <span class="p">{</span><span class="n">s</span><span class="p">}</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">subs</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">lit</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_property_values</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">pe</span><span class="p">):</span>
                        <span class="k">if</span> <span class="n">lit</span> <span class="ow">in</span> <span class="n">values</span><span class="p">:</span>
                            <span class="n">ind</span> <span class="o">|=</span> <span class="p">{</span><span class="n">s</span><span class="p">}</span>
                            <span class="k">break</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">filler</span><span class="p">,</span> <span class="n">OWLDataComplementOf</span><span class="p">):</span>
            <span class="n">temp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_find_instances</span><span class="p">(</span>
                <span class="n">OWLDataSomeValuesFrom</span><span class="p">(</span><span class="nb">property</span><span class="o">=</span><span class="n">pe</span><span class="p">,</span> <span class="n">filler</span><span class="o">=</span><span class="n">filler</span><span class="o">.</span><span class="n">get_data_range</span><span class="p">()))</span>
            <span class="k">if</span> <span class="n">property_cache</span><span class="p">:</span>
                <span class="n">subs</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
                <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">dps</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                    <span class="n">subs</span> <span class="o">|=</span> <span class="p">{</span><span class="n">s</span><span class="p">}</span>

            <span class="n">ind</span> <span class="o">=</span> <span class="n">subs</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="n">temp</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">filler</span><span class="p">,</span> <span class="n">OWLDataUnionOf</span><span class="p">):</span>
            <span class="n">operands</span> <span class="o">=</span> <span class="p">[</span><span class="n">OWLDataSomeValuesFrom</span><span class="p">(</span><span class="n">pe</span><span class="p">,</span> <span class="n">op</span><span class="p">)</span> <span class="k">for</span> <span class="n">op</span> <span class="ow">in</span> <span class="n">filler</span><span class="o">.</span><span class="n">operands</span><span class="p">()]</span>
            <span class="n">ind</span> <span class="o">=</span> <span class="n">reduce</span><span class="p">(</span><span class="n">operator</span><span class="o">.</span><span class="n">or_</span><span class="p">,</span> <span class="nb">map</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_find_instances</span><span class="p">,</span> <span class="n">operands</span><span class="p">))</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">filler</span><span class="p">,</span> <span class="n">OWLDataIntersectionOf</span><span class="p">):</span>
            <span class="n">operands</span> <span class="o">=</span> <span class="p">[</span><span class="n">OWLDataSomeValuesFrom</span><span class="p">(</span><span class="n">pe</span><span class="p">,</span> <span class="n">op</span><span class="p">)</span> <span class="k">for</span> <span class="n">op</span> <span class="ow">in</span> <span class="n">filler</span><span class="o">.</span><span class="n">operands</span><span class="p">()]</span>
            <span class="n">ind</span> <span class="o">=</span> <span class="n">reduce</span><span class="p">(</span><span class="n">operator</span><span class="o">.</span><span class="n">and_</span><span class="p">,</span> <span class="nb">map</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_find_instances</span><span class="p">,</span> <span class="n">operands</span><span class="p">))</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">filler</span><span class="p">,</span> <span class="n">OWLDatatypeRestriction</span><span class="p">):</span>
            <span class="k">def</span><span class="w"> </span><span class="nf">res_to_callable</span><span class="p">(</span><span class="n">res</span><span class="p">:</span> <span class="n">OWLFacetRestriction</span><span class="p">):</span>
                <span class="n">op</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">get_facet</span><span class="p">()</span><span class="o">.</span><span class="n">operator</span>
                <span class="n">v</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">get_facet_value</span><span class="p">()</span>

                <span class="k">def</span><span class="w"> </span><span class="nf">inner</span><span class="p">(</span><span class="n">lv</span><span class="p">:</span> <span class="n">OWLLiteral</span><span class="p">):</span>
                    <span class="k">return</span> <span class="n">op</span><span class="p">(</span><span class="n">lv</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>

                <span class="k">return</span> <span class="n">inner</span>

            <span class="n">apply</span> <span class="o">=</span> <span class="n">FunctionType</span><span class="o">.</span><span class="fm">__call__</span>

            <span class="n">facet_restrictions</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">res_to_callable</span><span class="p">,</span> <span class="n">filler</span><span class="o">.</span><span class="n">get_facet_restrictions</span><span class="p">()))</span>

            <span class="k">def</span><span class="w"> </span><span class="nf">include</span><span class="p">(</span><span class="n">lv</span><span class="p">:</span> <span class="n">OWLLiteral</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">lv</span><span class="o">.</span><span class="n">get_datatype</span><span class="p">()</span> <span class="o">==</span> <span class="n">filler</span><span class="o">.</span><span class="n">get_datatype</span><span class="p">()</span> <span class="ow">and</span> \
                    <span class="nb">all</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">apply</span><span class="p">,</span> <span class="n">facet_restrictions</span><span class="p">,</span> <span class="n">repeat</span><span class="p">(</span><span class="n">lv</span><span class="p">)))</span>

            <span class="k">if</span> <span class="n">property_cache</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">s</span><span class="p">,</span> <span class="n">literals</span> <span class="ow">in</span> <span class="n">dps</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="k">for</span> <span class="n">lit</span> <span class="ow">in</span> <span class="n">literals</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">include</span><span class="p">(</span><span class="n">lit</span><span class="p">):</span>
                            <span class="n">ind</span> <span class="o">|=</span> <span class="p">{</span><span class="n">s</span><span class="p">}</span>
                            <span class="k">break</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">subs</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">lit</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_property_values</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">pe</span><span class="p">):</span>
                        <span class="k">if</span> <span class="n">include</span><span class="p">(</span><span class="n">lit</span><span class="p">):</span>
                            <span class="n">ind</span> <span class="o">|=</span> <span class="p">{</span><span class="n">s</span><span class="p">}</span>
                            <span class="k">break</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span>

        <span class="n">r</span> <span class="o">=</span> <span class="nb">frozenset</span><span class="p">(</span><span class="n">ind</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">r</span>

    <span class="nd">@_find_instances</span><span class="o">.</span><span class="n">register</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ce</span><span class="p">:</span> <span class="n">OWLDataAllValuesFrom</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FrozenSet</span><span class="p">[</span><span class="n">OWLNamedIndividual</span><span class="p">]:</span>
        <span class="n">filler</span> <span class="o">=</span> <span class="n">ce</span><span class="o">.</span><span class="n">get_filler</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">filler</span><span class="p">,</span> <span class="n">OWLDataComplementOf</span><span class="p">):</span>
            <span class="n">filler</span> <span class="o">=</span> <span class="n">filler</span><span class="o">.</span><span class="n">get_data_range</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">filler</span> <span class="o">=</span> <span class="n">OWLDataComplementOf</span><span class="p">(</span><span class="n">filler</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_find_instances</span><span class="p">(</span>
            <span class="n">OWLDataSomeValuesFrom</span><span class="p">(</span>
                <span class="nb">property</span><span class="o">=</span><span class="n">ce</span><span class="o">.</span><span class="n">get_property</span><span class="p">(),</span>
                <span class="n">filler</span><span class="o">=</span><span class="n">filler</span>
            <span class="p">)</span><span class="o">.</span><span class="n">get_object_complement_of</span><span class="p">())</span>

    <span class="nd">@_find_instances</span><span class="o">.</span><span class="n">register</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ce</span><span class="p">:</span> <span class="n">OWLDataHasValue</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FrozenSet</span><span class="p">[</span><span class="n">OWLNamedIndividual</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_find_instances</span><span class="p">(</span><span class="n">ce</span><span class="o">.</span><span class="n">as_some_values_from</span><span class="p">())</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_lazy_cache_class</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">c</span><span class="p">:</span> <span class="n">OWLClass</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cls_to_ind</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="n">temp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_instances_from_owl_class</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_cls_to_ind</span><span class="p">[</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="nb">frozenset</span><span class="p">(</span><span class="n">temp</span><span class="p">)</span>

<div class="viewcode-block" id="StructuralReasoner.get_instances_from_owl_class">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.StructuralReasoner.get_instances_from_owl_class">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_instances_from_owl_class</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">c</span><span class="p">:</span> <span class="n">OWLClass</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">is_owl_thing</span><span class="p">():</span>
            <span class="k">yield from</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ontology</span><span class="o">.</span><span class="n">individuals_in_signature</span><span class="p">()</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">OWLClass</span><span class="p">):</span>
            <span class="n">c_x</span><span class="p">:</span> <span class="n">owlready2</span><span class="o">.</span><span class="n">ThingClass</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_world</span><span class="p">[</span><span class="n">c</span><span class="o">.</span><span class="n">str</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">c_x</span><span class="o">.</span><span class="n">instances</span><span class="p">(</span><span class="n">world</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_world</span><span class="p">):</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">owlready2</span><span class="o">.</span><span class="n">Thing</span><span class="p">):</span>
                    <span class="k">yield</span> <span class="n">OWLNamedIndividual</span><span class="p">(</span><span class="n">IRI</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">iri</span><span class="p">))</span></div>


    <span class="k">def</span><span class="w"> </span><span class="nf">_retrieve_triples</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pe</span><span class="p">:</span> <span class="n">OWLPropertyExpression</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Retrieve all subject/object pairs for the given property.&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pe</span><span class="p">,</span> <span class="n">OWLObjectPropertyExpression</span><span class="p">):</span>
            <span class="n">retrieval_func</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sub_object_properties</span>
            <span class="n">p_x</span><span class="p">:</span> <span class="n">owlready2</span><span class="o">.</span><span class="n">ObjectProperty</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ontology</span><span class="o">.</span><span class="n">_world</span><span class="p">[</span><span class="n">pe</span><span class="o">.</span><span class="n">get_named_property</span><span class="p">()</span><span class="o">.</span><span class="n">str</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">retrieval_func</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sub_data_properties</span>
            <span class="n">p_x</span><span class="p">:</span> <span class="n">owlready2</span><span class="o">.</span><span class="n">DataProperty</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ontology</span><span class="o">.</span><span class="n">_world</span><span class="p">[</span><span class="n">pe</span><span class="o">.</span><span class="n">str</span><span class="p">]</span>

        <span class="n">relations</span> <span class="o">=</span> <span class="n">p_x</span><span class="o">.</span><span class="n">get_relations</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sub_properties</span><span class="p">:</span>
            <span class="c1"># Retrieve the subject/object pairs for all sub properties of pe</span>
            <span class="n">indirect_relations</span> <span class="o">=</span> <span class="n">chain</span><span class="o">.</span><span class="n">from_iterable</span><span class="p">(</span>
                <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ontology</span><span class="o">.</span><span class="n">_world</span><span class="p">[</span><span class="n">x</span><span class="o">.</span><span class="n">str</span><span class="p">]</span><span class="o">.</span><span class="n">get_relations</span><span class="p">(),</span>
                    <span class="n">retrieval_func</span><span class="p">(</span><span class="n">pe</span><span class="p">,</span> <span class="n">direct</span><span class="o">=</span><span class="kc">False</span><span class="p">)))</span>
            <span class="c1"># If pe is an OWLObjectInverseOf we need to swap the pairs</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pe</span><span class="p">,</span> <span class="n">OWLObjectInverseOf</span><span class="p">):</span>
                <span class="n">indirect_relations</span> <span class="o">=</span> <span class="p">((</span><span class="n">r</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">r</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">indirect_relations</span><span class="p">)</span>
            <span class="n">relations</span> <span class="o">=</span> <span class="n">chain</span><span class="p">(</span><span class="n">relations</span><span class="p">,</span> <span class="n">indirect_relations</span><span class="p">)</span>
        <span class="k">yield from</span> <span class="n">relations</span>

<div class="viewcode-block" id="StructuralReasoner.reset_and_disable_cache">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.StructuralReasoner.reset_and_disable_cache">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">reset_and_disable_cache</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">class_cache</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_property_cache</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span></div>
</div>



<div class="viewcode-block" id="SyncReasoner">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.SyncReasoner">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">SyncReasoner</span><span class="p">(</span><span class="n">AbstractOWLReasoner</span><span class="p">):</span>

<div class="viewcode-block" id="SyncReasoner.create_justifications">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.SyncReasoner.create_justifications">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">create_justifications</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">owl_individuals</span><span class="p">:</span> <span class="n">Set</span><span class="p">[</span><span class="n">OWLNamedIndividual</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                              <span class="n">owl_class_expression</span><span class="p">:</span> <span class="n">OWLClassExpression</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                              <span class="n">save</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Set</span><span class="p">[</span><span class="n">OWLAxiom</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generate multiple justifications for why the given individual(s) are inferred to be instances of the specified class.</span>

<span class="sd">        Args:</span>
<span class="sd">            owl_individuals (Set[OWLNamedIndividual]): Set of individuals to explain.</span>
<span class="sd">            owl_class_expression (OWLClassExpression): Class expression to justify.</span>
<span class="sd">            save (bool): If True, saves all justifications in a new ontology as axioms.</span>

<span class="sd">        Returns:</span>
<span class="sd">            List[Set[OWLAxiom]]: Each item is a justification (set of OWLAxioms).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">owl_individuals</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">owl_class_expression</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Both owl_individuals and owl_class_expression are required.&quot;</span><span class="p">)</span>

        <span class="kn">from</span><span class="w"> </span><span class="nn">com.clarkparsia.owlapi.explanation</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
            <span class="n">BlackBoxExplanation</span><span class="p">,</span> <span class="n">HSTExplanationGenerator</span><span class="p">,</span> <span class="n">SatisfiabilityConverter</span>
        <span class="p">)</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">openllet.owlapi</span><span class="w"> </span><span class="kn">import</span> <span class="n">PelletReasonerFactory</span>

        <span class="n">j_class_expr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mapper</span><span class="o">.</span><span class="n">map_</span><span class="p">(</span><span class="n">owl_class_expression</span><span class="p">)</span>
        <span class="n">j_ontology</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_owlapi_ontology</span>
        <span class="n">j_reasoner</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_owlapi_reasoner</span>
        <span class="n">j_data_factory</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_owlapi_manager</span><span class="o">.</span><span class="n">getOWLDataFactory</span><span class="p">()</span>

        <span class="n">reasoner_factory</span> <span class="o">=</span> <span class="n">PelletReasonerFactory</span><span class="o">.</span><span class="n">getInstance</span><span class="p">()</span>
        <span class="n">blackbox_exp</span> <span class="o">=</span> <span class="n">BlackBoxExplanation</span><span class="p">(</span><span class="n">j_ontology</span><span class="p">,</span> <span class="n">reasoner_factory</span><span class="p">,</span> <span class="n">j_reasoner</span><span class="p">)</span>
        <span class="n">explanation_gen</span> <span class="o">=</span> <span class="n">HSTExplanationGenerator</span><span class="p">(</span><span class="n">blackbox_exp</span><span class="p">)</span>
        <span class="n">converter</span> <span class="o">=</span> <span class="n">SatisfiabilityConverter</span><span class="p">(</span><span class="n">j_data_factory</span><span class="p">)</span>

        <span class="n">justifications</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">ind</span> <span class="ow">in</span> <span class="n">owl_individuals</span><span class="p">:</span>
            <span class="n">j_individual</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mapper</span><span class="o">.</span><span class="n">map_</span><span class="p">(</span><span class="n">ind</span><span class="p">)</span>
            <span class="n">class_assertion_axiom</span> <span class="o">=</span> <span class="n">j_data_factory</span><span class="o">.</span><span class="n">getOWLClassAssertionAxiom</span><span class="p">(</span><span class="n">j_class_expr</span><span class="p">,</span> <span class="n">j_individual</span><span class="p">)</span>
            <span class="n">unsat_class</span> <span class="o">=</span> <span class="n">converter</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="n">class_assertion_axiom</span><span class="p">)</span>

            <span class="n">j_explanations</span> <span class="o">=</span> <span class="n">explanation_gen</span><span class="o">.</span><span class="n">getExplanations</span><span class="p">(</span><span class="n">unsat_class</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">j_expl</span> <span class="ow">in</span> <span class="n">j_explanations</span><span class="p">:</span>
                <span class="n">py_axioms</span> <span class="o">=</span> <span class="p">{</span><span class="bp">self</span><span class="o">.</span><span class="n">mapper</span><span class="o">.</span><span class="n">map_</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span> <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">j_expl</span><span class="p">}</span>
                <span class="n">justifications</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">py_axioms</span><span class="p">)</span>

        <span class="c1"># Save to justifications.owl if requested</span>
        <span class="k">if</span> <span class="n">save</span><span class="p">:</span>
            <span class="kn">from</span><span class="w"> </span><span class="nn">owlapy.owl_ontology</span><span class="w"> </span><span class="kn">import</span> <span class="n">SyncOntology</span>
            <span class="kn">from</span><span class="w"> </span><span class="nn">owlapy.iri</span><span class="w"> </span><span class="kn">import</span> <span class="n">IRI</span>

            <span class="c1"># Create a new in-memory ontology to store justifications</span>
            <span class="n">just_iri</span> <span class="o">=</span> <span class="n">IRI</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="s2">&quot;http://example.org/justifications&quot;</span><span class="p">)</span>
            <span class="n">just_ontology</span> <span class="o">=</span> <span class="n">SyncOntology</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="n">just_iri</span><span class="p">,</span> <span class="n">load</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">axiom_set</span> <span class="ow">in</span> <span class="n">justifications</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">axiom</span> <span class="ow">in</span> <span class="n">axiom_set</span><span class="p">:</span>
                    <span class="n">just_ontology</span><span class="o">.</span><span class="n">add_axiom</span><span class="p">(</span><span class="n">axiom</span><span class="p">)</span>

            <span class="c1"># Save to file</span>
            <span class="n">save_path</span> <span class="o">=</span> <span class="s2">&quot;justifications.owl&quot;</span>
            <span class="n">just_ontology</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">save_path</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Justifications saved to </span><span class="si">{</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">save_path</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">justifications</span></div>


    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ontology</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">SyncOntology</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="n">reasoner</span><span class="o">=</span><span class="s2">&quot;HermiT&quot;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        OWL reasoner that syncs to other reasoners like HermiT,Pellet,etc.</span>

<span class="sd">        Args:</span>
<span class="sd">            ontology(SyncOntology): Ontology that will be used by this reasoner.</span>
<span class="sd">               reasoner: Name of the reasoner. Possible values (case-sensitive): [&quot;HermiT&quot;, &quot;Pellet&quot;, &quot;ELK&quot;, &quot;JFact&quot;,</span>
<span class="sd">               &quot;Openllet&quot;, &quot;Structural&quot;]. Default: &quot;HermiT&quot;.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="n">reasoner</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;HermiT&quot;</span><span class="p">,</span> <span class="s2">&quot;Pellet&quot;</span><span class="p">,</span> <span class="s2">&quot;ELK&quot;</span><span class="p">,</span> <span class="s2">&quot;JFact&quot;</span><span class="p">,</span> <span class="s2">&quot;Openllet&quot;</span><span class="p">,</span> <span class="s2">&quot;Structural&quot;</span><span class="p">],</span> \
            <span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">reasoner</span><span class="si">}</span><span class="s2">&#39; is not implemented. Available reasoners: [&#39;HermiT&#39;, &#39;Pellet&#39;, &#39;ELK&#39;, &#39;JFact&#39;, &#39;Openllet&#39;, &quot;</span>
             <span class="sa">f</span><span class="s2">&quot;&#39;Structural&#39;]. &quot;</span>
             <span class="sa">f</span><span class="s2">&quot;This field is case sensitive.&quot;</span><span class="p">)</span>

        <span class="c1">#  TODO: ELK does not support all reasoning methods. That means that mapping unsupported methods in owlapy will</span>
        <span class="c1">#   also raise NotImplementedError. Check for new release of elk and if any of these method is</span>
        <span class="c1">#   implemented, remove the `raise NotImplementedError` statement for the respective mapping</span>
        <span class="c1">#   implemented in this class. Current version of elk is 0.6.0.</span>
        <span class="c1">#   Maven releases: https://mvnrepository.com/artifact/io.github.liveontologies/elk-owlapi</span>
        <span class="c1">#   ElkReasoner GitHub link: https://github.com/liveontologies/elk-reasoner/blob/main/elk-owlapi/src/main/java/org/semanticweb/elk/owlapi/ElkReasoner.java</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ontology</span><span class="p">,</span> <span class="n">SyncOntology</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ontology</span> <span class="o">=</span> <span class="n">ontology</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ontology</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ontology</span> <span class="o">=</span> <span class="n">SyncOntology</span><span class="p">(</span><span class="n">ontology</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">reasoner_name</span> <span class="o">=</span> <span class="n">reasoner</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_owlapi_manager</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ontology</span><span class="o">.</span><span class="n">owlapi_manager</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_owlapi_ontology</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ontology</span><span class="o">.</span><span class="n">get_owlapi_ontology</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mapper</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ontology</span><span class="o">.</span><span class="n">mapper</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">inference_types_mapping</span> <span class="o">=</span> <span class="n">import_and_include_axioms_generators</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_owlapi_reasoner</span> <span class="o">=</span> <span class="n">initialize_reasoner</span><span class="p">(</span><span class="n">reasoner</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_owlapi_ontology</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_instances</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ce</span><span class="p">:</span> <span class="n">OWLClassExpression</span><span class="p">,</span> <span class="n">direct</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Set</span><span class="p">[</span><span class="n">OWLNamedIndividual</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the instances for a given class expression using HermiT.</span>

<span class="sd">        Args:</span>
<span class="sd">            ce (OWLClassExpression): The class expression in OWLAPY format.</span>
<span class="sd">            direct (bool): Whether to get direct instances or not. Defaults to False.</span>

<span class="sd">        Returns:</span>
<span class="sd">            set: A set of individuals classified by the given class expression.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">mapped_ce</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mapper</span><span class="o">.</span><span class="n">map_</span><span class="p">(</span><span class="n">ce</span><span class="p">)</span>
        <span class="n">instances</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_owlapi_reasoner</span><span class="o">.</span><span class="n">getInstances</span><span class="p">(</span><span class="n">mapped_ce</span><span class="p">,</span> <span class="n">direct</span><span class="p">)</span>
        <span class="n">flattened_instances</span> <span class="o">=</span> <span class="n">instances</span><span class="o">.</span><span class="n">getFlattened</span><span class="p">()</span>
        <span class="k">assert</span> <span class="nb">str</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">flattened_instances</span><span class="p">))</span> <span class="o">==</span> <span class="s2">&quot;&lt;java class &#39;java.util.LinkedHashSet&#39;&gt;&quot;</span>
        <span class="k">return</span> <span class="p">{</span><span class="bp">self</span><span class="o">.</span><span class="n">mapper</span><span class="o">.</span><span class="n">map_</span><span class="p">(</span><span class="n">ind</span><span class="p">)</span> <span class="k">for</span> <span class="n">ind</span> <span class="ow">in</span> <span class="n">flattened_instances</span><span class="p">}</span>

<div class="viewcode-block" id="SyncReasoner.instances">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.SyncReasoner.instances">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">instances</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ce</span><span class="p">:</span> <span class="n">OWLClassExpression</span><span class="p">,</span> <span class="n">direct</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">timeout</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">run_with_timeout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_instances</span><span class="p">,</span> <span class="n">timeout</span><span class="p">,</span> <span class="p">(</span><span class="n">ce</span><span class="p">,</span> <span class="n">direct</span><span class="p">))</span></div>


<div class="viewcode-block" id="SyncReasoner.equivalent_classes">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.SyncReasoner.equivalent_classes">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">equivalent_classes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ce</span><span class="p">:</span> <span class="n">OWLClassExpression</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the set of named classes that are equivalent to the specified class expression with</span>
<span class="sd">        respect to the set of reasoner axioms.</span>

<span class="sd">        Args:</span>
<span class="sd">            ce (OWLClassExpression): The class expression whose equivalent classes are to be retrieved.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Equivalent classes of the given class expression.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">classes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_owlapi_reasoner</span><span class="o">.</span><span class="n">getEquivalentClasses</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mapper</span><span class="o">.</span><span class="n">map_</span><span class="p">(</span><span class="n">ce</span><span class="p">))</span><span class="o">.</span><span class="n">getEntities</span><span class="p">()</span>
        <span class="k">yield from</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">mapper</span><span class="o">.</span><span class="n">map_</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="k">for</span> <span class="bp">cls</span> <span class="ow">in</span> <span class="n">classes</span><span class="p">]</span></div>


<div class="viewcode-block" id="SyncReasoner.disjoint_classes">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.SyncReasoner.disjoint_classes">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">disjoint_classes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ce</span><span class="p">:</span> <span class="n">OWLClassExpression</span><span class="p">,</span> <span class="n">include_bottom_entity</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the classes that are disjoint with the specified class expression.</span>

<span class="sd">        Args:</span>
<span class="sd">            ce (OWLClassExpression): The class expression whose disjoint classes are to be retrieved.</span>
<span class="sd">            include_bottom_entity(bool,optional): Whether to consider OWL Nothing. Defaults to False.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Disjoint classes of the given class expression.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">reasoner_name</span> <span class="o">==</span> <span class="s2">&quot;ELK&quot;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;`getDisjointClasses` is not yet implemented for ELK!&quot;</span><span class="p">)</span>
        <span class="n">classes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_owlapi_reasoner</span><span class="o">.</span><span class="n">getDisjointClasses</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mapper</span><span class="o">.</span><span class="n">map_</span><span class="p">(</span><span class="n">ce</span><span class="p">))</span><span class="o">.</span><span class="n">getFlattened</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">include_bottom_entity</span><span class="p">:</span>
            <span class="k">yield from</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">mapper</span><span class="o">.</span><span class="n">map_</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="k">for</span> <span class="bp">cls</span> <span class="ow">in</span> <span class="n">classes</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">yield from</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">mapper</span><span class="o">.</span><span class="n">map_</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="k">for</span> <span class="bp">cls</span> <span class="ow">in</span> <span class="n">classes</span> <span class="k">if</span> <span class="ow">not</span> <span class="bp">cls</span><span class="o">.</span><span class="n">isBottomEntity</span><span class="p">()]</span></div>


<div class="viewcode-block" id="SyncReasoner.sub_classes">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.SyncReasoner.sub_classes">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">sub_classes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ce</span><span class="p">:</span> <span class="n">OWLClassExpression</span><span class="p">,</span> <span class="n">direct</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">include_bottom_entity</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">         Gets the set of named classes that are the strict (potentially direct) subclasses of the</span>
<span class="sd">         specified class expression with respect to the reasoner axioms.</span>

<span class="sd">         Args:</span>
<span class="sd">             ce (OWLClassExpression): The class expression whose strict (direct) subclasses are to be retrieved.</span>
<span class="sd">             direct (bool, optional): Specifies if the direct subclasses should be retrieved (True) or if</span>
<span class="sd">                all subclasses (descendant) classes should be retrieved (False). Defaults to False.</span>
<span class="sd">             include_bottom_entity (bool, optional): Specifies if owl nothing should be returned or not.</span>
<span class="sd">        Returns:</span>
<span class="sd">            The subclasses of the given class expression depending on `direct` field.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">classes</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_owlapi_reasoner</span><span class="o">.</span><span class="n">getSubClasses</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mapper</span><span class="o">.</span><span class="n">map_</span><span class="p">(</span><span class="n">ce</span><span class="p">),</span> <span class="n">direct</span><span class="p">)</span><span class="o">.</span><span class="n">getFlattened</span><span class="p">())</span>
        <span class="k">if</span> <span class="n">include_bottom_entity</span><span class="p">:</span>
            <span class="k">yield from</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">mapper</span><span class="o">.</span><span class="n">map_</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="k">for</span> <span class="bp">cls</span> <span class="ow">in</span> <span class="n">classes</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">yield from</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">mapper</span><span class="o">.</span><span class="n">map_</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="k">for</span> <span class="bp">cls</span> <span class="ow">in</span> <span class="n">classes</span> <span class="k">if</span> <span class="ow">not</span> <span class="bp">cls</span><span class="o">.</span><span class="n">isBottomEntity</span><span class="p">()]</span></div>


<div class="viewcode-block" id="SyncReasoner.super_classes">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.SyncReasoner.super_classes">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">super_classes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ce</span><span class="p">:</span> <span class="n">OWLClassExpression</span><span class="p">,</span> <span class="n">direct</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the stream of named classes that are the strict (potentially direct) super classes of</span>
<span class="sd">        the specified class expression with respect to the imports closure of the root ontology.</span>

<span class="sd">        Args:</span>
<span class="sd">             ce (OWLClassExpression): The class expression whose strict (direct) subclasses are to be retrieved.</span>
<span class="sd">             direct (bool, optional): Specifies if the direct superclasses should be retrieved (True) or if</span>
<span class="sd">                all superclasses (descendant) classes should be retrieved (False). Defaults to False.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The subclasses of the given class expression depending on `direct` field.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">classes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_owlapi_reasoner</span><span class="o">.</span><span class="n">getSuperClasses</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mapper</span><span class="o">.</span><span class="n">map_</span><span class="p">(</span><span class="n">ce</span><span class="p">),</span> <span class="n">direct</span><span class="p">)</span><span class="o">.</span><span class="n">getFlattened</span><span class="p">()</span>
        <span class="k">yield from</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">mapper</span><span class="o">.</span><span class="n">map_</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="k">for</span> <span class="bp">cls</span> <span class="ow">in</span> <span class="n">classes</span><span class="p">]</span></div>


<div class="viewcode-block" id="SyncReasoner.data_property_domains">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.SyncReasoner.data_property_domains">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">data_property_domains</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">:</span> <span class="n">OWLDataProperty</span><span class="p">,</span> <span class="n">direct</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets the class expressions that are the direct or indirect domains of this property with respect to the</span>
<span class="sd">           imports closure of the root ontology.</span>

<span class="sd">        Args:</span>
<span class="sd">            p: The property expression whose domains are to be retrieved.</span>
<span class="sd">            direct: Specifies if the direct domains should be retrieved (True), or if all domains should be retrieved</span>
<span class="sd">                (False).</span>

<span class="sd">        Returns:</span>
<span class="sd">            :Let N = equivalent_classes(DataSomeValuesFrom(pe rdfs:Literal)). If direct is True: then if N is not</span>
<span class="sd">            empty then the return value is N, else the return value is the result of</span>
<span class="sd">            super_classes(DataSomeValuesFrom(pe rdfs:Literal), true). If direct is False: then the result of</span>
<span class="sd">            super_classes(DataSomeValuesFrom(pe rdfs:Literal), false) together with N if N is non-empty.</span>
<span class="sd">            (Note, rdfs:Literal is the top datatype).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">reasoner_name</span> <span class="o">==</span> <span class="s2">&quot;ELK&quot;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;`getDataPropertyDomains` is not yet implemented by ELK!&quot;</span><span class="p">)</span>
        <span class="k">yield from</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">mapper</span><span class="o">.</span><span class="n">map_</span><span class="p">(</span><span class="n">ce</span><span class="p">)</span> <span class="k">for</span> <span class="n">ce</span> <span class="ow">in</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_owlapi_reasoner</span><span class="o">.</span><span class="n">getDataPropertyDomains</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mapper</span><span class="o">.</span><span class="n">map_</span><span class="p">(</span><span class="n">p</span><span class="p">),</span> <span class="n">direct</span><span class="p">)</span><span class="o">.</span><span class="n">getFlattened</span><span class="p">()]</span></div>


<div class="viewcode-block" id="SyncReasoner.object_property_domains">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.SyncReasoner.object_property_domains">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">object_property_domains</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">:</span> <span class="n">OWLObjectProperty</span><span class="p">,</span> <span class="n">direct</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets the class expressions that are the direct or indirect domains of this property with respect to the</span>
<span class="sd">           imports closure of the root ontology.</span>

<span class="sd">        Args:</span>
<span class="sd">            p: The property expression whose domains are to be retrieved.</span>
<span class="sd">            direct: Specifies if the direct domains should be retrieved (True), or if all domains should be retrieved</span>
<span class="sd">                (False).</span>

<span class="sd">        Returns:</span>
<span class="sd">            :Let N = equivalent_classes(ObjectSomeValuesFrom(pe owl:Thing)). If direct is True: then if N is not empty</span>
<span class="sd">            then the return value is N, else the return value is the result of</span>
<span class="sd">            super_classes(ObjectSomeValuesFrom(pe owl:Thing), true). If direct is False: then the result of</span>
<span class="sd">            super_classes(ObjectSomeValuesFrom(pe owl:Thing), false) together with N if N is non-empty.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">reasoner_name</span> <span class="o">==</span> <span class="s2">&quot;ELK&quot;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;`getObjectPropertyDomains` is not yet implemented by ELK!&quot;</span><span class="p">)</span>
        <span class="k">yield from</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">mapper</span><span class="o">.</span><span class="n">map_</span><span class="p">(</span><span class="n">ce</span><span class="p">)</span> <span class="k">for</span> <span class="n">ce</span> <span class="ow">in</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_owlapi_reasoner</span><span class="o">.</span><span class="n">getObjectPropertyDomains</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mapper</span><span class="o">.</span><span class="n">map_</span><span class="p">(</span><span class="n">p</span><span class="p">),</span> <span class="n">direct</span><span class="p">)</span><span class="o">.</span><span class="n">getFlattened</span><span class="p">()]</span></div>


<div class="viewcode-block" id="SyncReasoner.object_property_ranges">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.SyncReasoner.object_property_ranges">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">object_property_ranges</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">:</span> <span class="n">OWLObjectProperty</span><span class="p">,</span> <span class="n">direct</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets the class expressions that are the direct or indirect ranges of this property with respect to the</span>
<span class="sd">           imports closure of the root ontology.</span>

<span class="sd">        Args:</span>
<span class="sd">            p: The property expression whose ranges are to be retrieved.</span>
<span class="sd">            direct: Specifies if the direct ranges should be retrieved (True), or if all ranges should be retrieved</span>
<span class="sd">                (False).</span>

<span class="sd">        Returns:</span>
<span class="sd">            :Let N = equivalent_classes(ObjectSomeValuesFrom(ObjectInverseOf(pe) owl:Thing)). If direct is True: then</span>
<span class="sd">            if N is not empty then the return value is N, else the return value is the result of</span>
<span class="sd">            super_classes(ObjectSomeValuesFrom(ObjectInverseOf(pe) owl:Thing), true). If direct is False: then</span>
<span class="sd">            the result of super_classes(ObjectSomeValuesFrom(ObjectInverseOf(pe) owl:Thing), false) together with N</span>
<span class="sd">            if N is non-empty.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">reasoner_name</span> <span class="o">==</span> <span class="s2">&quot;ELK&quot;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;`getObjectPropertyRanges` is not yet implemented by ELK!&quot;</span><span class="p">)</span>
        <span class="k">yield from</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">mapper</span><span class="o">.</span><span class="n">map_</span><span class="p">(</span><span class="n">ce</span><span class="p">)</span> <span class="k">for</span> <span class="n">ce</span> <span class="ow">in</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_owlapi_reasoner</span><span class="o">.</span><span class="n">getObjectPropertyRanges</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mapper</span><span class="o">.</span><span class="n">map_</span><span class="p">(</span><span class="n">p</span><span class="p">),</span> <span class="n">direct</span><span class="p">)</span><span class="o">.</span><span class="n">getFlattened</span><span class="p">()]</span></div>


<div class="viewcode-block" id="SyncReasoner.sub_object_properties">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.SyncReasoner.sub_object_properties">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">sub_object_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">:</span> <span class="n">OWLObjectProperty</span><span class="p">,</span> <span class="n">direct</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">include_bottom_entity</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets the stream of simplified object property expressions that are the strict (potentially direct)</span>
<span class="sd">        subproperties of the specified object property expression with respect to the imports closure of the root</span>
<span class="sd">        ontology.</span>

<span class="sd">        Args:</span>
<span class="sd">            p: The object property expression whose strict (direct) subproperties are to be retrieved.</span>
<span class="sd">            direct: Specifies if the direct subproperties should be retrieved (True) or if the all subproperties</span>
<span class="sd">                (descendants) should be retrieved (False).</span>
<span class="sd">            include_bottom_entity (bool, optional): Specifies if the bottomObjectProperty should be returned.</span>

<span class="sd">        Returns:</span>
<span class="sd">            If direct is True, simplified object property expressions, such that for each simplified object property</span>
<span class="sd">            expression, P, the set of reasoner axioms entails DirectSubObjectPropertyOf(P, pe).</span>
<span class="sd">            If direct is False, simplified object property expressions, such that for each simplified object property</span>
<span class="sd">            expression, P, the set of reasoner axioms entails StrictSubObjectPropertyOf(P, pe).</span>
<span class="sd">            If pe is equivalent to owl:bottomObjectProperty then nothing will be returned.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">include_bottom_entity</span><span class="p">:</span>
            <span class="k">yield from</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">mapper</span><span class="o">.</span><span class="n">map_</span><span class="p">(</span><span class="n">pe</span><span class="p">)</span> <span class="k">for</span> <span class="n">pe</span> <span class="ow">in</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_owlapi_reasoner</span><span class="o">.</span><span class="n">getSubObjectProperties</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mapper</span><span class="o">.</span><span class="n">map_</span><span class="p">(</span><span class="n">p</span><span class="p">),</span> <span class="n">direct</span><span class="p">)</span><span class="o">.</span><span class="n">getFlattened</span><span class="p">()]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">yield from</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">mapper</span><span class="o">.</span><span class="n">map_</span><span class="p">(</span><span class="n">pe</span><span class="p">)</span> <span class="k">for</span> <span class="n">pe</span> <span class="ow">in</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_owlapi_reasoner</span><span class="o">.</span><span class="n">getSubObjectProperties</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mapper</span><span class="o">.</span><span class="n">map_</span><span class="p">(</span><span class="n">p</span><span class="p">),</span> <span class="n">direct</span><span class="p">)</span><span class="o">.</span><span class="n">getFlattened</span><span class="p">()</span>
                        <span class="k">if</span> <span class="ow">not</span> <span class="n">pe</span><span class="o">.</span><span class="n">isBottomEntity</span><span class="p">()]</span></div>


<div class="viewcode-block" id="SyncReasoner.super_object_properties">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.SyncReasoner.super_object_properties">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">super_object_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">:</span> <span class="n">OWLObjectProperty</span><span class="p">,</span> <span class="n">direct</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets the stream of object properties that are the strict (potentially direct) super properties of the</span>
<span class="sd">         specified object property with respect to the imports closure of the root ontology.</span>

<span class="sd">         Args:</span>
<span class="sd">             p (OWLObjectPropertyExpression): The object property expression whose super properties are to be</span>
<span class="sd">                                                retrieved.</span>
<span class="sd">             direct (bool): Specifies if the direct super properties should be retrieved (True) or if the all</span>
<span class="sd">                            super properties (ancestors) should be retrieved (False).</span>

<span class="sd">         Returns:</span>
<span class="sd">             Iterable of super properties.</span>
<span class="sd">         &quot;&quot;&quot;</span>
        <span class="k">yield from</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">mapper</span><span class="o">.</span><span class="n">map_</span><span class="p">(</span><span class="n">pe</span><span class="p">)</span> <span class="k">for</span> <span class="n">pe</span> <span class="ow">in</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_owlapi_reasoner</span><span class="o">.</span><span class="n">getSuperObjectProperties</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mapper</span><span class="o">.</span><span class="n">map_</span><span class="p">(</span><span class="n">p</span><span class="p">),</span> <span class="n">direct</span><span class="p">)</span><span class="o">.</span><span class="n">getFlattened</span><span class="p">()]</span></div>


<div class="viewcode-block" id="SyncReasoner.sub_data_properties">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.SyncReasoner.sub_data_properties">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">sub_data_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">:</span> <span class="n">OWLDataProperty</span><span class="p">,</span> <span class="n">direct</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">include_bottom_entity</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets the set of named data properties that are the strict (potentially direct) subproperties of the</span>
<span class="sd">        specified data property expression with respect to the imports closure of the root ontology.</span>

<span class="sd">        Args:</span>
<span class="sd">            p: The data property whose strict (direct) subproperties are to be retrieved.</span>
<span class="sd">            direct: Specifies if the direct subproperties should be retrieved (True) or if the all subproperties</span>
<span class="sd">                (descendants) should be retrieved (False).</span>
<span class="sd">            include_bottom_entity: Specifies if the bottomDataProperty should be returned.</span>

<span class="sd">        Returns:</span>
<span class="sd">            If direct is True, each property P where the set of reasoner axioms entails DirectSubDataPropertyOf(P, pe).</span>
<span class="sd">            If direct is False, each property P where the set of reasoner axioms entails</span>
<span class="sd">            StrictSubDataPropertyOf(P, pe). If pe is equivalent to owl:bottomDataProperty then nothing will be</span>
<span class="sd">            returned.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">reasoner_name</span> <span class="o">==</span> <span class="s2">&quot;ELK&quot;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;`getSubDataProperties` is not yet implemented by ELK!&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">include_bottom_entity</span><span class="p">:</span>
            <span class="k">yield from</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">mapper</span><span class="o">.</span><span class="n">map_</span><span class="p">(</span><span class="n">pe</span><span class="p">)</span> <span class="k">for</span> <span class="n">pe</span> <span class="ow">in</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_owlapi_reasoner</span><span class="o">.</span><span class="n">getSubDataProperties</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mapper</span><span class="o">.</span><span class="n">map_</span><span class="p">(</span><span class="n">p</span><span class="p">),</span> <span class="n">direct</span><span class="p">)</span><span class="o">.</span><span class="n">getFlattened</span><span class="p">()]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">yield from</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">mapper</span><span class="o">.</span><span class="n">map_</span><span class="p">(</span><span class="n">pe</span><span class="p">)</span> <span class="k">for</span> <span class="n">pe</span> <span class="ow">in</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_owlapi_reasoner</span><span class="o">.</span><span class="n">getSubDataProperties</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mapper</span><span class="o">.</span><span class="n">map_</span><span class="p">(</span><span class="n">p</span><span class="p">),</span> <span class="n">direct</span><span class="p">)</span><span class="o">.</span><span class="n">getFlattened</span><span class="p">()</span>
                        <span class="k">if</span> <span class="ow">not</span> <span class="n">pe</span><span class="o">.</span><span class="n">isBottomEntity</span><span class="p">()]</span></div>


<div class="viewcode-block" id="SyncReasoner.super_data_properties">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.SyncReasoner.super_data_properties">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">super_data_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">:</span> <span class="n">OWLDataProperty</span><span class="p">,</span> <span class="n">direct</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets the stream of data properties that are the strict (potentially direct) super properties of the</span>
<span class="sd">         specified data property with respect to the imports closure of the root ontology.</span>

<span class="sd">         Args:</span>
<span class="sd">             p (OWLDataProperty): The data property whose super properties are to be retrieved.</span>
<span class="sd">             direct (bool): Specifies if the direct super properties should be retrieved (True) or if the all</span>
<span class="sd">                            super properties (ancestors) should be retrieved (False).</span>

<span class="sd">         Returns:</span>
<span class="sd">             Iterable of super properties.</span>
<span class="sd">         &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">reasoner_name</span> <span class="o">==</span> <span class="s2">&quot;ELK&quot;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;`getSuperDataProperties` is not yet implemented by ELK!&quot;</span><span class="p">)</span>
        <span class="k">yield from</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">mapper</span><span class="o">.</span><span class="n">map_</span><span class="p">(</span><span class="n">pe</span><span class="p">)</span> <span class="k">for</span> <span class="n">pe</span> <span class="ow">in</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_owlapi_reasoner</span><span class="o">.</span><span class="n">getSuperDataProperties</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mapper</span><span class="o">.</span><span class="n">map_</span><span class="p">(</span><span class="n">p</span><span class="p">),</span> <span class="n">direct</span><span class="p">)</span><span class="o">.</span><span class="n">getFlattened</span><span class="p">()]</span></div>


<div class="viewcode-block" id="SyncReasoner.different_individuals">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.SyncReasoner.different_individuals">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">different_individuals</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">:</span> <span class="n">OWLNamedIndividual</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets the individuals that are different from the specified individual with respect to the set of</span>
<span class="sd">        reasoner axioms.</span>

<span class="sd">        Args:</span>
<span class="sd">            i: The individual whose different individuals are to be retrieved.</span>

<span class="sd">        Returns:</span>
<span class="sd">            All individuals x where the set of reasoner axioms entails DifferentIndividuals(ind x).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">reasoner_name</span> <span class="o">==</span> <span class="s2">&quot;ELK&quot;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;`getDifferentIndividuals` is not yet implemented by ELK!&quot;</span><span class="p">)</span>
        <span class="k">yield from</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">mapper</span><span class="o">.</span><span class="n">map_</span><span class="p">(</span><span class="n">ind</span><span class="p">)</span> <span class="k">for</span> <span class="n">ind</span> <span class="ow">in</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_owlapi_reasoner</span><span class="o">.</span><span class="n">getDifferentIndividuals</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mapper</span><span class="o">.</span><span class="n">map_</span><span class="p">(</span><span class="n">i</span><span class="p">))</span><span class="o">.</span><span class="n">getFlattened</span><span class="p">()]</span></div>


<div class="viewcode-block" id="SyncReasoner.same_individuals">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.SyncReasoner.same_individuals">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">same_individuals</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">:</span> <span class="n">OWLNamedIndividual</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets the individuals that are the same as the specified individual with respect to the set of</span>
<span class="sd">        reasoner axioms.</span>

<span class="sd">        Args:</span>
<span class="sd">            i: The individual whose same individuals are to be retrieved.</span>

<span class="sd">        Returns:</span>
<span class="sd">            All individuals x where the root ontology imports closure entails SameIndividual(ind x).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">yield from</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">mapper</span><span class="o">.</span><span class="n">map_</span><span class="p">(</span><span class="n">ind</span><span class="p">)</span> <span class="k">for</span> <span class="n">ind</span> <span class="ow">in</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">mapper</span><span class="o">.</span><span class="n">to_list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_owlapi_reasoner</span><span class="o">.</span><span class="n">sameIndividuals</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mapper</span><span class="o">.</span><span class="n">map_</span><span class="p">(</span><span class="n">i</span><span class="p">)))]</span></div>


<div class="viewcode-block" id="SyncReasoner.equivalent_object_properties">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.SyncReasoner.equivalent_object_properties">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">equivalent_object_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">:</span> <span class="n">OWLObjectProperty</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets the simplified object properties that are equivalent to the specified object property with respect</span>
<span class="sd">        to the set of reasoner axioms.</span>

<span class="sd">        Args:</span>
<span class="sd">            p: The object property whose equivalent object properties are to be retrieved.</span>

<span class="sd">        Returns:</span>
<span class="sd">            All simplified object properties e where the root ontology imports closure entails</span>
<span class="sd">            EquivalentObjectProperties(op e). If op is unsatisfiable with respect to the set of reasoner axioms</span>
<span class="sd">            then owl:bottomDataProperty will be returned.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">yield from</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">mapper</span><span class="o">.</span><span class="n">map_</span><span class="p">(</span><span class="n">pe</span><span class="p">)</span> <span class="k">for</span> <span class="n">pe</span> <span class="ow">in</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">mapper</span><span class="o">.</span><span class="n">to_list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_owlapi_reasoner</span><span class="o">.</span><span class="n">equivalentObjectProperties</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mapper</span><span class="o">.</span><span class="n">map_</span><span class="p">(</span><span class="n">p</span><span class="p">)))]</span></div>


<div class="viewcode-block" id="SyncReasoner.equivalent_data_properties">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.SyncReasoner.equivalent_data_properties">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">equivalent_data_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">:</span> <span class="n">OWLDataProperty</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets the data properties that are equivalent to the specified data property with respect to the set of</span>
<span class="sd">        reasoner axioms.</span>

<span class="sd">        Args:</span>
<span class="sd">            p: The data property whose equivalent data properties are to be retrieved.</span>

<span class="sd">        Returns:</span>
<span class="sd">            All data properties e where the root ontology imports closure entails EquivalentDataProperties(dp e).</span>
<span class="sd">            If dp is unsatisfiable with respect to the set of reasoner axioms then owl:bottomDataProperty will</span>
<span class="sd">            be returned.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">reasoner_name</span> <span class="o">==</span> <span class="s2">&quot;ELK&quot;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;`getEquivalentDataProperties` is not yet implemented by ELK!&quot;</span><span class="p">)</span>
        <span class="k">yield from</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">mapper</span><span class="o">.</span><span class="n">map_</span><span class="p">(</span><span class="n">pe</span><span class="p">)</span> <span class="k">for</span> <span class="n">pe</span> <span class="ow">in</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">mapper</span><span class="o">.</span><span class="n">to_list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_owlapi_reasoner</span><span class="o">.</span><span class="n">getEquivalentDataProperties</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mapper</span><span class="o">.</span><span class="n">map_</span><span class="p">(</span><span class="n">p</span><span class="p">)))]</span></div>


<div class="viewcode-block" id="SyncReasoner.object_property_values">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.SyncReasoner.object_property_values">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">object_property_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">:</span> <span class="n">OWLNamedIndividual</span><span class="p">,</span> <span class="n">p</span><span class="p">:</span> <span class="n">OWLObjectProperty</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets the object property values for the specified individual and object property expression.</span>

<span class="sd">        Args:</span>
<span class="sd">            i: The individual that is the subject of the object property values.</span>
<span class="sd">            p: The object property expression whose values are to be retrieved for the specified individual.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The named individuals such that for each individual j, the set of reasoner axioms entails</span>
<span class="sd">            ObjectPropertyAssertion(pe ind j).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">reasoner_name</span> <span class="o">==</span> <span class="s2">&quot;ELK&quot;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;`getObjectPropertyValues` is not yet implemented by ELK!&quot;</span><span class="p">)</span>
        <span class="k">yield from</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">mapper</span><span class="o">.</span><span class="n">map_</span><span class="p">(</span><span class="n">ind</span><span class="p">)</span> <span class="k">for</span> <span class="n">ind</span> <span class="ow">in</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_owlapi_reasoner</span><span class="o">.</span><span class="n">getObjectPropertyValues</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mapper</span><span class="o">.</span><span class="n">map_</span><span class="p">(</span><span class="n">i</span><span class="p">),</span>
                                                                  <span class="bp">self</span><span class="o">.</span><span class="n">mapper</span><span class="o">.</span><span class="n">map_</span><span class="p">(</span><span class="n">p</span><span class="p">))</span><span class="o">.</span><span class="n">getFlattened</span><span class="p">()]</span></div>


<div class="viewcode-block" id="SyncReasoner.data_property_values">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.SyncReasoner.data_property_values">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">data_property_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">:</span> <span class="n">OWLEntity</span><span class="p">,</span> <span class="n">p</span><span class="p">:</span> <span class="n">OWLDataProperty</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets the data property values for the specified entity and data property expression.</span>

<span class="sd">        Args:</span>
<span class="sd">            e: The entity (usually an individual) that is the subject of the data property values.</span>
<span class="sd">            p: The data property expression whose values are to be retrieved for the specified individual.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A set of OWLLiterals containing literals such that for each literal l in the set, the set of reasoner</span>
<span class="sd">            axioms entails DataPropertyAssertion(pe ind l).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">yield from</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">mapper</span><span class="o">.</span><span class="n">map_</span><span class="p">(</span><span class="n">literal</span><span class="p">)</span> <span class="k">for</span> <span class="n">literal</span> <span class="ow">in</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">mapper</span><span class="o">.</span><span class="n">to_list</span><span class="p">(</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_owlapi_reasoner</span><span class="o">.</span><span class="n">dataPropertyValues</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mapper</span><span class="o">.</span><span class="n">map_</span><span class="p">(</span><span class="n">e</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">mapper</span><span class="o">.</span><span class="n">map_</span><span class="p">(</span><span class="n">p</span><span class="p">)))]</span></div>


<div class="viewcode-block" id="SyncReasoner.disjoint_object_properties">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.SyncReasoner.disjoint_object_properties">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">disjoint_object_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">:</span> <span class="n">OWLObjectProperty</span><span class="p">,</span> <span class="n">include_bottom_entity</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets the simplified object properties that are disjoint with the specified object property with respect</span>
<span class="sd">        to the set of reasoner axioms.</span>

<span class="sd">        Args:</span>
<span class="sd">            p: The object property whose disjoint object properties are to be retrieved.</span>
<span class="sd">            include_bottom_entity(bool,optional): Whether to consider bottomObjectProperty.</span>

<span class="sd">        Returns:</span>
<span class="sd">            All simplified object properties e where the root ontology imports closure entails</span>
<span class="sd">            EquivalentObjectProperties(e ObjectPropertyComplementOf(op)) or</span>
<span class="sd">            StrictSubObjectPropertyOf(e ObjectPropertyComplementOf(op)).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">reasoner_name</span> <span class="o">==</span> <span class="s2">&quot;ELK&quot;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;`getDisjointObjectProperties` is not yet implemented by ELK!&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">include_bottom_entity</span><span class="p">:</span>
            <span class="k">yield from</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">mapper</span><span class="o">.</span><span class="n">map_</span><span class="p">(</span><span class="n">pe</span><span class="p">)</span> <span class="k">for</span> <span class="n">pe</span> <span class="ow">in</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_owlapi_reasoner</span><span class="o">.</span><span class="n">getDisjointObjectProperties</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mapper</span><span class="o">.</span><span class="n">map_</span><span class="p">(</span><span class="n">p</span><span class="p">))</span><span class="o">.</span><span class="n">getFlattened</span><span class="p">()]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">yield from</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">mapper</span><span class="o">.</span><span class="n">map_</span><span class="p">(</span><span class="n">pe</span><span class="p">)</span> <span class="k">for</span> <span class="n">pe</span> <span class="ow">in</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_owlapi_reasoner</span><span class="o">.</span><span class="n">getDisjointObjectProperties</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mapper</span><span class="o">.</span><span class="n">map_</span><span class="p">(</span><span class="n">p</span><span class="p">))</span><span class="o">.</span><span class="n">getFlattened</span><span class="p">()</span>
                        <span class="k">if</span> <span class="ow">not</span> <span class="n">pe</span><span class="o">.</span><span class="n">isBottomEntity</span><span class="p">()]</span></div>


<div class="viewcode-block" id="SyncReasoner.disjoint_data_properties">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.SyncReasoner.disjoint_data_properties">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">disjoint_data_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">:</span> <span class="n">OWLDataProperty</span><span class="p">,</span> <span class="n">include_bottom_entity</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets the data properties that are disjoint with the specified data property with respect</span>
<span class="sd">        to the set of reasoner axioms.</span>

<span class="sd">        Args:</span>
<span class="sd">            p: The data property whose disjoint data properties are to be retrieved.</span>
<span class="sd">            include_bottom_entity(bool,optional): Whether to consider bottomDataProperty.</span>

<span class="sd">        Returns:</span>
<span class="sd">            All data properties e where the root ontology imports closure entails</span>
<span class="sd">            EquivalentDataProperties(e DataPropertyComplementOf(dp)) or</span>
<span class="sd">            StrictSubDataPropertyOf(e DataPropertyComplementOf(dp)).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">reasoner_name</span> <span class="o">==</span> <span class="s2">&quot;ELK&quot;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;`getDisjointDataProperties` is not yet implemented by ELK!&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">include_bottom_entity</span><span class="p">:</span>
            <span class="k">yield from</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">mapper</span><span class="o">.</span><span class="n">map_</span><span class="p">(</span><span class="n">pe</span><span class="p">)</span> <span class="k">for</span> <span class="n">pe</span> <span class="ow">in</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_owlapi_reasoner</span><span class="o">.</span><span class="n">getDisjointDataProperties</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mapper</span><span class="o">.</span><span class="n">map_</span><span class="p">(</span><span class="n">p</span><span class="p">))</span><span class="o">.</span><span class="n">getFlattened</span><span class="p">()]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">yield from</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">mapper</span><span class="o">.</span><span class="n">map_</span><span class="p">(</span><span class="n">pe</span><span class="p">)</span> <span class="k">for</span> <span class="n">pe</span> <span class="ow">in</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_owlapi_reasoner</span><span class="o">.</span><span class="n">getDisjointDataProperties</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mapper</span><span class="o">.</span><span class="n">map_</span><span class="p">(</span><span class="n">p</span><span class="p">))</span><span class="o">.</span><span class="n">getFlattened</span><span class="p">()</span>
                        <span class="k">if</span> <span class="ow">not</span> <span class="n">pe</span><span class="o">.</span><span class="n">isBottomEntity</span><span class="p">()]</span></div>


<div class="viewcode-block" id="SyncReasoner.types">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.SyncReasoner.types">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">types</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">individual</span><span class="p">:</span> <span class="n">OWLNamedIndividual</span><span class="p">,</span> <span class="n">direct</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets the named classes which are (potentially direct) types of the specified named individual.</span>

<span class="sd">        Args:</span>
<span class="sd">            individual: The individual whose types are to be retrieved.</span>
<span class="sd">            direct: Specifies if the direct types should be retrieved (True), or if all types should be retrieved</span>
<span class="sd">                (False).</span>

<span class="sd">        Returns:</span>
<span class="sd">            If direct is True, each named class C where the set of reasoner axioms entails</span>
<span class="sd">            DirectClassAssertion(C, ind). If direct is False, each named class C where the set of reasoner axioms</span>
<span class="sd">            entails ClassAssertion(C, ind).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">yield from</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">mapper</span><span class="o">.</span><span class="n">map_</span><span class="p">(</span><span class="n">ind</span><span class="p">)</span> <span class="k">for</span> <span class="n">ind</span> <span class="ow">in</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_owlapi_reasoner</span><span class="o">.</span><span class="n">getTypes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mapper</span><span class="o">.</span><span class="n">map_</span><span class="p">(</span><span class="n">individual</span><span class="p">),</span> <span class="n">direct</span><span class="p">)</span><span class="o">.</span><span class="n">getFlattened</span><span class="p">()]</span></div>


<div class="viewcode-block" id="SyncReasoner.has_consistent_ontology">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.SyncReasoner.has_consistent_ontology">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">has_consistent_ontology</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Check if the used ontology is consistent.</span>

<span class="sd">        Returns:</span>
<span class="sd">            bool: True if the ontology used by this reasoner is consistent, False otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_owlapi_reasoner</span><span class="o">.</span><span class="n">isConsistent</span><span class="p">()</span></div>


<div class="viewcode-block" id="SyncReasoner.infer_axioms">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.SyncReasoner.infer_axioms">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">infer_axioms</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inference_types</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">OWLAxiom</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Infer the specified inference type of axioms for the ontology managed by this instance&#39;s reasoner and</span>
<span class="sd">        return them.</span>

<span class="sd">        Args:</span>
<span class="sd">            inference_types: Axiom inference types: Avaliable options (can set more than 1):</span>
<span class="sd">             [&quot;InferredClassAssertionAxiomGenerator&quot;, &quot;InferredSubClassAxiomGenerator&quot;,</span>
<span class="sd">             &quot;InferredDisjointClassesAxiomGenerator&quot;, &quot;InferredEquivalentClassAxiomGenerator&quot;,</span>
<span class="sd">             &quot;InferredEquivalentDataPropertiesAxiomGenerator&quot;,&quot;InferredEquivalentObjectPropertyAxiomGenerator&quot;,</span>
<span class="sd">             &quot;InferredInverseObjectPropertiesAxiomGenerator&quot;,&quot;InferredSubDataPropertyAxiomGenerator&quot;,</span>
<span class="sd">             &quot;InferredSubObjectPropertyAxiomGenerator&quot;,&quot;InferredDataPropertyCharacteristicAxiomGenerator&quot;,</span>
<span class="sd">             &quot;InferredObjectPropertyCharacteristicAxiomGenerator&quot;</span>
<span class="sd">             ]</span>

<span class="sd">        Returns:</span>
<span class="sd">            Iterable of inferred axioms.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># noinspection PyUnresolvedReferences</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">java.util</span><span class="w"> </span><span class="kn">import</span> <span class="n">ArrayList</span>
        <span class="c1"># noinspection PyUnresolvedReferences</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">org.semanticweb.owlapi.util</span><span class="w"> </span><span class="kn">import</span> <span class="n">InferredOntologyGenerator</span>

        <span class="n">generators</span> <span class="o">=</span> <span class="n">ArrayList</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">inference_types</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">java_object</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">inference_types_mapping</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="kc">None</span><span class="p">):</span>
                <span class="n">generators</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">java_object</span><span class="p">)</span>
        <span class="n">iog</span> <span class="o">=</span> <span class="n">InferredOntologyGenerator</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_owlapi_reasoner</span><span class="p">,</span> <span class="n">generators</span><span class="p">)</span>
        <span class="n">inferred_axioms</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">iog</span><span class="o">.</span><span class="n">getAxiomGenerators</span><span class="p">())</span>
        <span class="k">for</span> <span class="n">ia</span> <span class="ow">in</span> <span class="n">inferred_axioms</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">axiom</span> <span class="ow">in</span> <span class="n">ia</span><span class="o">.</span><span class="n">createAxioms</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_owlapi_manager</span><span class="o">.</span><span class="n">getOWLDataFactory</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_owlapi_reasoner</span><span class="p">):</span>
                <span class="k">yield</span> <span class="bp">self</span><span class="o">.</span><span class="n">mapper</span><span class="o">.</span><span class="n">map_</span><span class="p">(</span><span class="n">axiom</span><span class="p">)</span></div>


<div class="viewcode-block" id="SyncReasoner.infer_axioms_and_save">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.SyncReasoner.infer_axioms_and_save">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">infer_axioms_and_save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">output_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">output_format</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                              <span class="n">inference_types</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generates inferred axioms for the ontology managed by this instance&#39;s reasoner and saves them to a file.</span>
<span class="sd">        This function uses the OWL API to generate inferred class assertion axioms based on the ontology and reasoner</span>
<span class="sd">        associated with this instance. The inferred axioms are saved to the specified output file in the desired format.</span>

<span class="sd">        Args:</span>
<span class="sd">            output_path : The name of the file where the inferred axioms will be saved.</span>
<span class="sd">            output_format : The format in which to save the inferred axioms. Supported formats are:</span>
<span class="sd">                - &quot;ttl&quot; or &quot;turtle&quot; for Turtle format</span>
<span class="sd">                - &quot;rdf/xml&quot; for RDF/XML format</span>
<span class="sd">                - &quot;owl/xml&quot; for OWL/XML format</span>
<span class="sd">                If not specified, the format of the original ontology is used.</span>
<span class="sd">            inference_types: Axiom inference types: Avaliable options (can set more than 1):</span>
<span class="sd">             [&quot;InferredClassAssertionAxiomGenerator&quot;, &quot;InferredSubClassAxiomGenerator&quot;,</span>
<span class="sd">             &quot;InferredDisjointClassesAxiomGenerator&quot;, &quot;InferredEquivalentClassAxiomGenerator&quot;,</span>
<span class="sd">             &quot;InferredEquivalentDataPropertiesAxiomGenerator&quot;,&quot;InferredEquivalentObjectPropertyAxiomGenerator&quot;,</span>
<span class="sd">             &quot;InferredInverseObjectPropertiesAxiomGenerator&quot;,&quot;InferredSubDataPropertyAxiomGenerator&quot;,</span>
<span class="sd">             &quot;InferredSubObjectPropertyAxiomGenerator&quot;,&quot;InferredDataPropertyCharacteristicAxiomGenerator&quot;,</span>
<span class="sd">             &quot;InferredObjectPropertyCharacteristicAxiomGenerator&quot;</span>
<span class="sd">             ]</span>

<span class="sd">        Returns:</span>
<span class="sd">            None (the file is saved to the specified directory)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># noinspection PyUnresolvedReferences</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">java.io</span><span class="w"> </span><span class="kn">import</span> <span class="n">File</span><span class="p">,</span> <span class="n">FileOutputStream</span>
        <span class="c1"># noinspection PyUnresolvedReferences</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">java.util</span><span class="w"> </span><span class="kn">import</span> <span class="n">ArrayList</span>
        <span class="c1"># noinspection PyUnresolvedReferences</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">org.semanticweb.owlapi.util</span><span class="w"> </span><span class="kn">import</span> <span class="n">InferredOntologyGenerator</span>
        <span class="c1"># noinspection PyUnresolvedReferences</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">org.semanticweb.owlapi.formats</span><span class="w"> </span><span class="kn">import</span> <span class="n">TurtleDocumentFormat</span><span class="p">,</span> <span class="n">RDFXMLDocumentFormat</span><span class="p">,</span> <span class="n">OWLXMLDocumentFormat</span>
        <span class="k">if</span> <span class="n">output_format</span> <span class="o">==</span> <span class="s2">&quot;ttl&quot;</span> <span class="ow">or</span> <span class="n">output_format</span> <span class="o">==</span> <span class="s2">&quot;turtle&quot;</span><span class="p">:</span>
            <span class="n">document_format</span> <span class="o">=</span> <span class="n">TurtleDocumentFormat</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">output_format</span> <span class="o">==</span> <span class="s2">&quot;rdf/xml&quot;</span><span class="p">:</span>
            <span class="n">document_format</span> <span class="o">=</span> <span class="n">RDFXMLDocumentFormat</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">output_format</span> <span class="o">==</span> <span class="s2">&quot;owl/xml&quot;</span><span class="p">:</span>
            <span class="n">document_format</span> <span class="o">=</span> <span class="n">OWLXMLDocumentFormat</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">document_format</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_owlapi_manager</span><span class="o">.</span><span class="n">getOntologyFormat</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_owlapi_ontology</span><span class="p">)</span>
        <span class="n">generators</span> <span class="o">=</span> <span class="n">ArrayList</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">inference_types</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">java_object</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">inference_types_mapping</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="kc">None</span><span class="p">):</span>
                <span class="n">generators</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">java_object</span><span class="p">)</span>
        <span class="n">iog</span> <span class="o">=</span> <span class="n">InferredOntologyGenerator</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_owlapi_reasoner</span><span class="p">,</span> <span class="n">generators</span><span class="p">)</span>
        <span class="c1"># CD: No need to create a new ontology</span>
        <span class="c1"># inferred_axioms_ontology = self._owlapi_manager.createOntology()</span>
        <span class="n">iog</span><span class="o">.</span><span class="n">fillOntology</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_owlapi_manager</span><span class="o">.</span><span class="n">getOWLDataFactory</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_owlapi_ontology</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_owlapi_manager</span><span class="o">.</span><span class="n">saveOntology</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_owlapi_ontology</span><span class="p">,</span>
                                          <span class="n">document_format</span><span class="p">,</span>
                                          <span class="n">FileOutputStream</span><span class="p">(</span><span class="n">File</span><span class="p">(</span><span class="n">output_path</span><span class="p">)</span><span class="o">.</span><span class="n">getAbsoluteFile</span><span class="p">()))</span></div>


<div class="viewcode-block" id="SyncReasoner.generate_and_save_inferred_class_assertion_axioms">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.SyncReasoner.generate_and_save_inferred_class_assertion_axioms">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">generate_and_save_inferred_class_assertion_axioms</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">output</span><span class="o">=</span><span class="s2">&quot;temp.ttl&quot;</span><span class="p">,</span> <span class="n">output_format</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generates inferred class assertion axioms for the ontology managed by this instance&#39;s reasoner and saves them</span>
<span class="sd">        to a file. This function uses the OWL API to generate inferred class assertion axioms based on the ontology</span>
<span class="sd">        and reasoner associated with this instance. The inferred axioms are saved to the specified output file in</span>
<span class="sd">        the desired format.</span>
<span class="sd">        Parameters:</span>
<span class="sd">        -----------</span>
<span class="sd">        output : str, optional</span>
<span class="sd">            The name of the file where the inferred axioms will be saved. Default is &quot;temp.ttl&quot;.</span>
<span class="sd">        output_format : str, optional</span>
<span class="sd">            The format in which to save the inferred axioms. Supported formats are:</span>
<span class="sd">            - &quot;ttl&quot; or &quot;turtle&quot; for Turtle format</span>
<span class="sd">            - &quot;rdf/xml&quot; for RDF/XML format</span>
<span class="sd">            - &quot;owl/xml&quot; for OWL/XML format</span>
<span class="sd">            If not specified, the format of the original ontology is used.</span>
<span class="sd">        Notes:</span>
<span class="sd">        ------</span>
<span class="sd">        - The function supports saving in multiple formats: Turtle, RDF/XML, and OWL/XML.</span>
<span class="sd">        - The inferred axioms are generated using the reasoner associated with this instance and the OWL API&#39;s</span>
<span class="sd">          InferredClassAssertionAxiomGenerator.</span>
<span class="sd">        - The inferred axioms are added to a new ontology which is then saved in the specified format.</span>
<span class="sd">        Example:</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; instance.generate_and_save_inferred_class_assertion_axioms(output=&quot;inferred_axioms.ttl&quot;, format=&quot;ttl&quot;)</span>
<span class="sd">        This will save the inferred class assertion axioms to the file &quot;inferred_axioms.ttl&quot; in Turtle format.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">infer_axioms_and_save</span><span class="p">(</span><span class="n">output</span><span class="p">,</span> <span class="n">output_format</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;InferredClassAssertionAxiomGenerator&quot;</span><span class="p">])</span></div>


<div class="viewcode-block" id="SyncReasoner.is_entailed">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.SyncReasoner.is_entailed">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">is_entailed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axiom</span><span class="p">:</span> <span class="n">OWLAxiom</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;A convenience method that determines if the specified axiom is entailed by the set of reasoner axioms.</span>

<span class="sd">        Args:</span>
<span class="sd">            axiom: The axiom to check for entailment.</span>

<span class="sd">        Return:</span>
<span class="sd">            True if the axiom is entailed by the reasoner axioms and False otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_owlapi_reasoner</span><span class="o">.</span><span class="n">isEntailed</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mapper</span><span class="o">.</span><span class="n">map_</span><span class="p">(</span><span class="n">axiom</span><span class="p">)))</span></div>


<div class="viewcode-block" id="SyncReasoner.is_satisfiable">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.SyncReasoner.is_satisfiable">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">is_satisfiable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ce</span><span class="p">:</span> <span class="n">OWLClassExpression</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;A convenience method that determines if the specified class expression is satisfiable with respect</span>
<span class="sd">        to the reasoner axioms.</span>

<span class="sd">        Args:</span>
<span class="sd">            ce: The class expression to check for satisfiability.</span>

<span class="sd">        Return:</span>
<span class="sd">            True if the class expression is satisfiable by the reasoner axioms and False otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_owlapi_reasoner</span><span class="o">.</span><span class="n">isSatisfiable</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mapper</span><span class="o">.</span><span class="n">map_</span><span class="p">(</span><span class="n">ce</span><span class="p">)))</span></div>


<div class="viewcode-block" id="SyncReasoner.unsatisfiable_classes">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.SyncReasoner.unsatisfiable_classes">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">unsatisfiable_classes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;A convenience method that obtains the classes in the signature of the root ontology that are</span>
<span class="sd">        unsatisfiable.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">mapper</span><span class="o">.</span><span class="n">map_</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_owlapi_reasoner</span><span class="o">.</span><span class="n">unsatisfiableClasses</span><span class="p">())</span></div>


<div class="viewcode-block" id="SyncReasoner.get_root_ontology">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.SyncReasoner.get_root_ontology">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_root_ontology</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AbstractOWLOntology</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ontology</span></div>
</div>



<div class="viewcode-block" id="initialize_reasoner">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.initialize_reasoner">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">initialize_reasoner</span><span class="p">(</span><span class="n">reasoner</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">owlapi_ontology</span><span class="p">):</span>
    <span class="c1"># () Create a reasoner using the ontology</span>
    <span class="k">if</span> <span class="n">reasoner</span> <span class="o">==</span> <span class="s2">&quot;HermiT&quot;</span><span class="p">:</span>
        <span class="c1"># noinspection PyUnresolvedReferences</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">org.semanticweb.HermiT</span><span class="w"> </span><span class="kn">import</span> <span class="n">ReasonerFactory</span>
        <span class="n">owlapi_reasoner</span> <span class="o">=</span> <span class="n">ReasonerFactory</span><span class="p">()</span><span class="o">.</span><span class="n">createReasoner</span><span class="p">(</span><span class="n">owlapi_ontology</span><span class="p">)</span>
        <span class="k">assert</span> <span class="n">owlapi_reasoner</span><span class="o">.</span><span class="n">getReasonerName</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;HermiT&quot;</span>
    <span class="k">elif</span> <span class="n">reasoner</span> <span class="o">==</span> <span class="s2">&quot;ELK&quot;</span><span class="p">:</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">org.semanticweb.elk.owlapi</span><span class="w"> </span><span class="kn">import</span> <span class="n">ElkReasonerFactory</span>
        <span class="n">owlapi_reasoner</span> <span class="o">=</span> <span class="n">ElkReasonerFactory</span><span class="p">()</span><span class="o">.</span><span class="n">createReasoner</span><span class="p">(</span><span class="n">owlapi_ontology</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">reasoner</span> <span class="o">==</span> <span class="s2">&quot;JFact&quot;</span><span class="p">:</span>
        <span class="c1"># noinspection PyUnresolvedReferences</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">uk.ac.manchester.cs.jfact</span><span class="w"> </span><span class="kn">import</span> <span class="n">JFactFactory</span>
        <span class="n">owlapi_reasoner</span> <span class="o">=</span> <span class="n">JFactFactory</span><span class="p">()</span><span class="o">.</span><span class="n">createReasoner</span><span class="p">(</span><span class="n">owlapi_ontology</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">reasoner</span> <span class="o">==</span> <span class="s2">&quot;Pellet&quot;</span><span class="p">:</span>
        <span class="c1"># noinspection PyUnresolvedReferences</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">openllet.owlapi</span><span class="w"> </span><span class="kn">import</span> <span class="n">PelletReasonerFactory</span>
        <span class="n">owlapi_reasoner</span> <span class="o">=</span> <span class="n">PelletReasonerFactory</span><span class="p">()</span><span class="o">.</span><span class="n">createReasoner</span><span class="p">(</span><span class="n">owlapi_ontology</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">reasoner</span> <span class="o">==</span> <span class="s2">&quot;Openllet&quot;</span><span class="p">:</span>
        <span class="c1"># noinspection PyUnresolvedReferences</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">openllet.owlapi</span><span class="w"> </span><span class="kn">import</span> <span class="n">OpenlletReasonerFactory</span>
        <span class="n">owlapi_reasoner</span> <span class="o">=</span> <span class="n">OpenlletReasonerFactory</span><span class="p">()</span><span class="o">.</span><span class="n">getInstance</span><span class="p">()</span><span class="o">.</span><span class="n">createReasoner</span><span class="p">(</span><span class="n">owlapi_ontology</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">reasoner</span> <span class="o">==</span> <span class="s2">&quot;Structural&quot;</span><span class="p">:</span>
        <span class="c1"># noinspection PyUnresolvedReferences</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">org.semanticweb.owlapi.reasoner.structural</span><span class="w"> </span><span class="kn">import</span> <span class="n">StructuralReasonerFactory</span>
        <span class="n">owlapi_reasoner</span> <span class="o">=</span> <span class="n">StructuralReasonerFactory</span><span class="p">()</span><span class="o">.</span><span class="n">createReasoner</span><span class="p">(</span><span class="n">owlapi_ontology</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;Not implemented&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">owlapi_reasoner</span></div>



<div class="viewcode-block" id="import_and_include_axioms_generators">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.import_and_include_axioms_generators">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">import_and_include_axioms_generators</span><span class="p">():</span>
    <span class="c1"># noinspection PyUnresolvedReferences</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">org.semanticweb.owlapi.util</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span><span class="n">InferredClassAssertionAxiomGenerator</span><span class="p">,</span> <span class="n">InferredSubClassAxiomGenerator</span><span class="p">,</span>
                                             <span class="n">InferredEquivalentClassAxiomGenerator</span><span class="p">,</span>
                                             <span class="n">InferredDisjointClassesAxiomGenerator</span><span class="p">,</span>
                                             <span class="n">InferredEquivalentDataPropertiesAxiomGenerator</span><span class="p">,</span>
                                             <span class="n">InferredEquivalentObjectPropertyAxiomGenerator</span><span class="p">,</span>
                                             <span class="n">InferredInverseObjectPropertiesAxiomGenerator</span><span class="p">,</span>
                                             <span class="n">InferredSubDataPropertyAxiomGenerator</span><span class="p">,</span>
                                             <span class="n">InferredSubObjectPropertyAxiomGenerator</span><span class="p">,</span>
                                             <span class="n">InferredDataPropertyCharacteristicAxiomGenerator</span><span class="p">,</span>
                                             <span class="n">InferredObjectPropertyCharacteristicAxiomGenerator</span><span class="p">)</span>

    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;InferredClassAssertionAxiomGenerator&quot;</span><span class="p">:</span> <span class="n">InferredClassAssertionAxiomGenerator</span><span class="p">(),</span>
            <span class="s2">&quot;InferredSubClassAxiomGenerator&quot;</span><span class="p">:</span> <span class="n">InferredSubClassAxiomGenerator</span><span class="p">(),</span>
            <span class="s2">&quot;InferredDisjointClassesAxiomGenerator&quot;</span><span class="p">:</span> <span class="n">InferredDisjointClassesAxiomGenerator</span><span class="p">(),</span>
            <span class="s2">&quot;InferredEquivalentClassAxiomGenerator&quot;</span><span class="p">:</span> <span class="n">InferredEquivalentClassAxiomGenerator</span><span class="p">(),</span>
            <span class="s2">&quot;InferredInverseObjectPropertiesAxiomGenerator&quot;</span><span class="p">:</span> <span class="n">InferredInverseObjectPropertiesAxiomGenerator</span><span class="p">(),</span>
            <span class="s2">&quot;InferredEquivalentDataPropertiesAxiomGenerator&quot;</span><span class="p">:</span> <span class="n">InferredEquivalentDataPropertiesAxiomGenerator</span><span class="p">(),</span>
            <span class="s2">&quot;InferredEquivalentObjectPropertyAxiomGenerator&quot;</span><span class="p">:</span> <span class="n">InferredEquivalentObjectPropertyAxiomGenerator</span><span class="p">(),</span>
            <span class="s2">&quot;InferredSubDataPropertyAxiomGenerator&quot;</span><span class="p">:</span> <span class="n">InferredSubDataPropertyAxiomGenerator</span><span class="p">(),</span>
            <span class="s2">&quot;InferredSubObjectPropertyAxiomGenerator&quot;</span><span class="p">:</span> <span class="n">InferredSubObjectPropertyAxiomGenerator</span><span class="p">(),</span>
            <span class="s2">&quot;InferredDataPropertyCharacteristicAxiomGenerator&quot;</span><span class="p">:</span> <span class="n">InferredDataPropertyCharacteristicAxiomGenerator</span><span class="p">(),</span>
            <span class="s2">&quot;InferredObjectPropertyCharacteristicAxiomGenerator&quot;</span><span class="p">:</span> <span class="n">InferredObjectPropertyCharacteristicAxiomGenerator</span><span class="p">()}</span></div>



<div class="viewcode-block" id="EBR">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.EBR">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">EBR</span><span class="p">(</span><span class="n">AbstractOWLReasoner</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The Embedding-Based Reasoner uses neural embeddings to retrieve concept instances from knowledge bases. &quot;&quot;&quot;</span>

    <span class="n">STR_IRI_SUBCLASSOF</span> <span class="o">=</span> <span class="s2">&quot;http://www.w3.org/2000/01/rdf-schema#subClassOf&quot;</span>
    <span class="n">STR_IRI_TYPE</span> <span class="o">=</span> <span class="s2">&quot;http://www.w3.org/1999/02/22-rdf-syntax-ns#type&quot;</span>
    <span class="n">STR_IRI_OWL_CLASS</span> <span class="o">=</span> <span class="s2">&quot;http://www.w3.org/2002/07/owl#Class&quot;</span>
    <span class="n">STR_IRI_OBJECT_PROPERTY</span> <span class="o">=</span> <span class="s2">&quot;http://www.w3.org/2002/07/owl#ObjectProperty&quot;</span>
    <span class="n">STR_IRI_RANGE</span> <span class="o">=</span> <span class="s2">&quot;http://www.w3.org/2000/01/rdf-schema#range&quot;</span>
    <span class="n">STR_IRI_DOMAIN</span> <span class="o">=</span> <span class="s2">&quot;http://www.w3.org/2000/01/rdf-schema#domain&quot;</span>
    <span class="n">STR_IRI_DOUBLE</span> <span class="o">=</span> <span class="s2">&quot;http://www.w3.org/2001/XMLSchema#double&quot;</span>
    <span class="n">STR_IRI_BOOLEAN</span> <span class="o">=</span> <span class="s2">&quot;http://www.w3.org/2001/XMLSchema#boolean&quot;</span>
    <span class="n">STR_IRI_DATA_PROPERTY</span> <span class="o">=</span> <span class="s2">&quot;http://www.w3.org/2002/07/owl#DatatypeProperty&quot;</span>
    <span class="n">STR_IRI_SUBPROPERTY</span> <span class="o">=</span> <span class="s2">&quot;http://www.w3.org/2000/01/rdf-schema#subPropertyOf&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ontology</span><span class="p">:</span> <span class="n">NeuralOntology</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">ontology</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span> <span class="o">=</span> <span class="n">ontology</span><span class="o">.</span><span class="n">gamma</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ontology</span> <span class="o">=</span> <span class="n">ontology</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="n">ontology</span><span class="o">.</span><span class="n">model</span>

<div class="viewcode-block" id="EBR.__str__">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.EBR.__str__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Embedding-Based Reasoner using: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">model</span><span class="si">}</span><span class="s2"> with gamma: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="si">}</span><span class="s2">&quot;</span></div>


    <span class="nd">@cached_property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">inferred_object_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">set</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">object_properties_in_signature</span><span class="p">())</span>

    <span class="nd">@cached_property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">inferred_owl_classes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">set</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">classes_in_signature</span><span class="p">())</span>

<div class="viewcode-block" id="EBR.predict">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.EBR.predict">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">predict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">h</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">r</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">t</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ontology</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">h</span><span class="o">=</span><span class="n">h</span><span class="p">,</span> <span class="n">r</span><span class="o">=</span><span class="n">r</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="n">t</span><span class="p">)</span></div>


<div class="viewcode-block" id="EBR.predict_individuals_of_owl_class">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.EBR.predict_individuals_of_owl_class">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">predict_individuals_of_owl_class</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">owl_class</span><span class="p">:</span> <span class="n">OWLClass</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">OWLNamedIndividual</span><span class="p">]:</span>
        <span class="n">top_entities</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="c1"># Find all subconcepts</span>
        <span class="n">owl_classes</span> <span class="o">=</span> <span class="p">[</span><span class="n">owl_class</span><span class="p">]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">sub_classes</span><span class="p">(</span><span class="n">owl_class</span><span class="p">)</span>
        <span class="n">top_entity</span><span class="p">:</span> <span class="nb">str</span>
        <span class="k">for</span> <span class="n">top_entity</span><span class="p">,</span> <span class="n">score</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">h</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                              <span class="n">r</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">STR_IRI_TYPE</span><span class="p">,</span>
                                              <span class="n">t</span><span class="o">=</span><span class="p">[</span><span class="n">c</span><span class="o">.</span><span class="n">iri</span><span class="o">.</span><span class="n">str</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">owl_classes</span><span class="p">]):</span>
            <span class="n">top_entities</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">top_entity</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">OWLNamedIndividual</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">top_entities</span><span class="p">]</span></div>


<div class="viewcode-block" id="EBR.abox">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.EBR.abox">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">abox</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">str_iri</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span>
        <span class="n">Tuple</span><span class="p">[</span>
            <span class="n">Tuple</span><span class="p">[</span><span class="n">OWLNamedIndividual</span><span class="p">,</span> <span class="n">OWLProperty</span><span class="p">,</span> <span class="n">OWLClass</span><span class="p">],</span>
            <span class="n">Tuple</span><span class="p">[</span><span class="n">OWLObjectProperty</span><span class="p">,</span> <span class="n">OWLObjectProperty</span><span class="p">,</span> <span class="n">OWLNamedIndividual</span><span class="p">],</span>
            <span class="n">Tuple</span><span class="p">[</span><span class="n">OWLObjectProperty</span><span class="p">,</span> <span class="n">OWLDataProperty</span><span class="p">,</span> <span class="n">OWLLiteral</span><span class="p">]],</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
        <span class="c1"># Initialize an owl named individual object.</span>
        <span class="n">subject_</span> <span class="o">=</span> <span class="n">OWLNamedIndividual</span><span class="p">(</span><span class="n">str_iri</span><span class="p">)</span>
        <span class="c1"># Return a triple indicating the type.</span>
        <span class="k">for</span> <span class="n">cl</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">types</span><span class="p">(</span><span class="n">subject_</span><span class="p">):</span>
            <span class="k">yield</span> <span class="n">subject_</span><span class="p">,</span> <span class="n">OWLProperty</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">STR_IRI_TYPE</span><span class="p">),</span> <span class="n">cl</span>

        <span class="c1"># Return a triple based on an object property.</span>
        <span class="k">for</span> <span class="n">op</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">object_properties_in_signature</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">o</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">object_property_values</span><span class="p">(</span><span class="n">subject_</span><span class="p">,</span> <span class="n">op</span><span class="p">):</span>
                <span class="k">yield</span> <span class="n">subject_</span><span class="p">,</span> <span class="n">op</span><span class="p">,</span> <span class="n">o</span></div>

        <span class="c1"># TODO: Data properties</span>

<div class="viewcode-block" id="EBR.classes_in_signature">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.EBR.classes_in_signature">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">classes_in_signature</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">OWLClass</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ontology</span><span class="o">.</span><span class="n">classes_in_signature</span><span class="p">()</span></div>


<div class="viewcode-block" id="EBR.individuals_in_signature">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.EBR.individuals_in_signature">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">individuals_in_signature</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">OWLNamedIndividual</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ontology</span><span class="o">.</span><span class="n">individuals_in_signature</span><span class="p">()</span></div>


<div class="viewcode-block" id="EBR.data_properties_in_signature">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.EBR.data_properties_in_signature">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">data_properties_in_signature</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">OWLDataProperty</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ontology</span><span class="o">.</span><span class="n">data_properties_in_signature</span><span class="p">()</span></div>


<div class="viewcode-block" id="EBR.object_properties_in_signature">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.EBR.object_properties_in_signature">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">object_properties_in_signature</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">OWLObjectProperty</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ontology</span><span class="o">.</span><span class="n">object_properties_in_signature</span><span class="p">()</span></div>


<div class="viewcode-block" id="EBR.direct_subconcepts">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.EBR.direct_subconcepts">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">direct_subconcepts</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">named_concept</span><span class="p">:</span> <span class="n">OWLClass</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">OWLClass</span><span class="p">]:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">STR_IRI_SUBCLASSOF</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">relation_to_idx</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[]</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">OWLClass</span><span class="p">(</span><span class="n">top_entity</span><span class="p">)</span> <span class="k">for</span> <span class="n">top_entity</span><span class="p">,</span> <span class="n">score</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">h</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                                                           <span class="n">r</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">STR_IRI_SUBCLASSOF</span><span class="p">,</span>
                                                                           <span class="n">t</span><span class="o">=</span><span class="n">named_concept</span><span class="o">.</span><span class="n">str</span><span class="p">)]</span></div>


<div class="viewcode-block" id="EBR.sub_classes">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.EBR.sub_classes">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">sub_classes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">named_concept</span><span class="p">:</span> <span class="n">OWLClass</span><span class="p">,</span> <span class="n">visited</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">OWLClass</span><span class="p">]:</span>
        <span class="k">if</span> <span class="n">visited</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">visited</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="n">all_subconcepts</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">subconcept</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">direct_subconcepts</span><span class="p">(</span><span class="n">named_concept</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">subconcept</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">classes_in_signature</span><span class="p">()</span> <span class="ow">or</span> <span class="n">subconcept</span> <span class="ow">in</span> <span class="n">visited</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="n">visited</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">subconcept</span><span class="p">)</span>
            <span class="n">all_subconcepts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">subconcept</span><span class="p">)</span>
            <span class="n">all_subconcepts</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sub_classes</span><span class="p">(</span><span class="n">subconcept</span><span class="p">,</span> <span class="n">visited</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">all_subconcepts</span></div>


<div class="viewcode-block" id="EBR.most_general_classes">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.EBR.most_general_classes">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">most_general_classes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">OWLClass</span><span class="p">]:</span>  <span class="c1"># pragma: no cover</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;At least it has single subclass and there is no superclass&quot;&quot;&quot;</span>
        <span class="n">owl_concepts_not_having_parents</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">classes_in_signature</span><span class="p">():</span>
            <span class="n">direct_parents</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_direct_parents</span><span class="p">(</span><span class="n">c</span><span class="p">):</span>
                <span class="c1"># Ignore c if (c subclass x) \in KG.</span>
                <span class="n">direct_parents</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
                <span class="k">break</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">direct_parents</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">sub_c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">sub_classes</span><span class="p">(</span><span class="n">named_concept</span><span class="o">=</span><span class="n">c</span><span class="p">):</span>
                    <span class="n">owl_concepts_not_having_parents</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">sub_c</span><span class="p">)</span>
                    <span class="k">break</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">owl_concepts_not_having_parents</span><span class="p">]</span></div>


<div class="viewcode-block" id="EBR.least_general_named_concepts">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.EBR.least_general_named_concepts">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">least_general_named_concepts</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">OWLClass</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>  <span class="c1"># pragma: no cover</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;At least it has single superclass and there is no subclass&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">_class</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">classes_in_signature</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">concept</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">sub_classes</span><span class="p">(</span>
                    <span class="n">named_concept</span><span class="o">=</span><span class="n">_class</span>
            <span class="p">):</span>
                <span class="k">break</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># checks if superclasses is not empty -&gt; there is at least one superclass</span>
                <span class="k">if</span> <span class="nb">list</span><span class="p">(</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">get_direct_parents</span><span class="p">(</span><span class="n">_class</span><span class="p">)</span>
                <span class="p">):</span>
                    <span class="k">yield</span> <span class="n">_class</span></div>


<div class="viewcode-block" id="EBR.get_direct_parents">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.EBR.get_direct_parents">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_direct_parents</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">named_concept</span><span class="p">:</span> <span class="n">OWLClass</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">OWLClass</span><span class="p">]:</span>  <span class="c1"># pragma: no cover</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">OWLClass</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span> <span class="k">for</span> <span class="n">entity</span><span class="p">,</span> <span class="n">score</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">h</span><span class="o">=</span><span class="n">named_concept</span><span class="o">.</span><span class="n">str</span><span class="p">,</span> <span class="n">r</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">STR_IRI_SUBCLASSOF</span><span class="p">,</span>
                                                                   <span class="n">t</span><span class="o">=</span><span class="kc">None</span><span class="p">)]</span></div>


<div class="viewcode-block" id="EBR.super_classes">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.EBR.super_classes">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">super_classes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ce</span><span class="p">:</span> <span class="n">OWLClassExpression</span><span class="p">,</span> <span class="n">direct</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">OWLClassExpression</span><span class="p">]:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ce</span><span class="p">,</span> <span class="n">OWLClass</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;Only named classes are supported in the embedding-based reasoner&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">direct</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_direct_parents</span><span class="p">(</span><span class="n">ce</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">visited</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
            <span class="n">all_superclasses</span> <span class="o">=</span> <span class="p">[]</span>

            <span class="k">def</span><span class="w"> </span><span class="nf">collect_superclasses</span><span class="p">(</span><span class="n">concept</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">parent</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_direct_parents</span><span class="p">(</span><span class="n">concept</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">parent</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">visited</span><span class="p">:</span>
                        <span class="n">visited</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
                        <span class="n">all_superclasses</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
                        <span class="n">collect_superclasses</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>

            <span class="n">collect_superclasses</span><span class="p">(</span><span class="n">ce</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">all_superclasses</span></div>


<div class="viewcode-block" id="EBR.types">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.EBR.types">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">types</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">individual</span><span class="p">:</span> <span class="n">OWLNamedIndividual</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">OWLClass</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">OWLClass</span><span class="p">(</span><span class="n">top_entity</span><span class="p">)</span> <span class="k">for</span> <span class="n">top_entity</span><span class="p">,</span> <span class="n">score</span> <span class="ow">in</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">h</span><span class="o">=</span><span class="n">individual</span><span class="o">.</span><span class="n">str</span><span class="p">,</span> <span class="n">r</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">STR_IRI_TYPE</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="kc">None</span><span class="p">)]</span></div>


<div class="viewcode-block" id="EBR.boolean_data_properties">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.EBR.boolean_data_properties">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">boolean_data_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">OWLDataProperty</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>  <span class="c1"># pragma: no cover</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">OWLDataProperty</span><span class="p">(</span><span class="n">top_entity</span><span class="p">)</span> <span class="k">for</span> <span class="n">top_entity</span><span class="p">,</span> <span class="n">score</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">h</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">r</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">STR_IRI_RANGE</span><span class="p">,</span>
                                                                                  <span class="n">t</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">STR_IRI_BOOLEAN</span><span class="p">)]</span></div>


<div class="viewcode-block" id="EBR.double_data_properties">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.EBR.double_data_properties">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">double_data_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">OWLDataProperty</span><span class="p">]:</span>  <span class="c1"># pragma: no cover</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">OWLDataProperty</span><span class="p">(</span><span class="n">top_entity</span><span class="p">)</span> <span class="k">for</span> <span class="n">top_entity</span><span class="p">,</span> <span class="n">score</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span>
            <span class="n">h</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">r</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">STR_IRI_RANGE</span><span class="p">,</span>
            <span class="n">t</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">STR_IRI_DOUBLE</span><span class="p">)]</span></div>


<div class="viewcode-block" id="EBR.individuals">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.EBR.individuals">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">individuals</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expression</span><span class="p">:</span> <span class="n">OWLClassExpression</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">named_individuals</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span>
        <span class="n">OWLNamedIndividual</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
        <span class="k">if</span> <span class="n">expression</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">expression</span><span class="o">.</span><span class="n">is_owl_thing</span><span class="p">():</span>
            <span class="k">yield from</span> <span class="bp">self</span><span class="o">.</span><span class="n">individuals_in_signature</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">yield from</span> <span class="bp">self</span><span class="o">.</span><span class="n">instances</span><span class="p">(</span><span class="n">expression</span><span class="p">)</span></div>


<div class="viewcode-block" id="EBR.instances">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.EBR.instances">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">instances</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expression</span><span class="p">:</span> <span class="n">OWLClassExpression</span><span class="p">,</span> <span class="n">direct</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">timeout</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span>
        <span class="n">OWLNamedIndividual</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expression</span><span class="p">,</span> <span class="n">OWLClass</span><span class="p">):</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot; Given an OWLClass A, retrieve its instances Retrieval(A)={ x | phi(x, type, A)   } &quot;&quot;&quot;</span>
            <span class="k">yield from</span> <span class="bp">self</span><span class="o">.</span><span class="n">predict_individuals_of_owl_class</span><span class="p">(</span><span class="n">expression</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expression</span><span class="p">,</span> <span class="n">OWLObjectComplementOf</span><span class="p">):</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot; Handling complement of class expressions:</span>
<span class="sd">            Given an OWLObjectComplementOf A, hence (A is an OWLClass),</span>
<span class="sd">            retrieve its instances =&gt; Retrieval(A)= All Instance Set-DIFF { x | phi(x, type, A)   } &quot;&quot;&quot;</span>
            <span class="n">excluded_individuals</span><span class="p">:</span> <span class="n">Set</span><span class="p">[</span><span class="n">OWLNamedIndividual</span><span class="p">]</span>
            <span class="n">excluded_individuals</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">instances</span><span class="p">(</span><span class="n">expression</span><span class="o">.</span><span class="n">get_operand</span><span class="p">()))</span>
            <span class="n">all_individuals</span> <span class="o">=</span> <span class="p">{</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">individuals_in_signature</span><span class="p">()}</span>
            <span class="k">yield from</span> <span class="n">all_individuals</span> <span class="o">-</span> <span class="n">excluded_individuals</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expression</span><span class="p">,</span> <span class="n">OWLObjectIntersectionOf</span><span class="p">):</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot; Handling intersection of class expressions:</span>
<span class="sd">            Given an OWLObjectIntersectionOf (C  D),  </span>
<span class="sd">            retrieve its instances by intersecting the instance of each operands.</span>
<span class="sd">            {x | phi(x, type, C)  }  {x | phi(x, type, D)  }</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="c1"># Get the class expressions</span>
            <span class="c1">#</span>
            <span class="n">result</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">for</span> <span class="n">op</span> <span class="ow">in</span> <span class="n">expression</span><span class="o">.</span><span class="n">operands</span><span class="p">():</span>
                <span class="n">retrieval_of_op</span> <span class="o">=</span> <span class="p">{</span><span class="n">_</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">instances</span><span class="p">(</span><span class="n">expression</span><span class="o">=</span><span class="n">op</span><span class="p">)}</span>
                <span class="k">if</span> <span class="n">result</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">result</span> <span class="o">=</span> <span class="n">retrieval_of_op</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">result</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">retrieval_of_op</span><span class="p">)</span>
            <span class="k">yield from</span> <span class="n">result</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expression</span><span class="p">,</span> <span class="n">OWLObjectAllValuesFrom</span><span class="p">):</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Given an OWLObjectAllValuesFrom  r.C, retrieve its instances =&gt; </span>
<span class="sd">            Retrieval( r.C) =             </span>
<span class="sd">            Entities \setminus {x |  y: \phi(y, type, C) &lt; \gamma AND \phi(x,r,y)   \gamma } </span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="n">object_property</span> <span class="o">=</span> <span class="n">expression</span><span class="o">.</span><span class="n">get_property</span><span class="p">()</span>
            <span class="n">filler_expression</span> <span class="o">=</span> <span class="n">expression</span><span class="o">.</span><span class="n">get_filler</span><span class="p">()</span>
            <span class="k">yield from</span> <span class="bp">self</span><span class="o">.</span><span class="n">instances</span><span class="p">(</span><span class="n">OWLObjectComplementOf</span><span class="p">(</span>
                <span class="n">OWLObjectSomeValuesFrom</span><span class="p">(</span><span class="n">object_property</span><span class="p">,</span> <span class="n">OWLObjectComplementOf</span><span class="p">(</span><span class="n">filler_expression</span><span class="p">))))</span>

        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expression</span><span class="p">,</span> <span class="n">OWLObjectMinCardinality</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expression</span><span class="p">,</span> <span class="n">OWLObjectSomeValuesFrom</span><span class="p">):</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Given an OWLObjectSomeValuesFrom  r.C, retrieve its instances =&gt; </span>
<span class="sd">            Retrieval( r.C) = </span>
<span class="sd">            {x |  y : phi(y, type, C)  \gamma AND phi(x, r, y)  \gamma }  </span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="n">object_property</span> <span class="o">=</span> <span class="n">expression</span><span class="o">.</span><span class="n">get_property</span><span class="p">()</span>
            <span class="n">filler_expression</span> <span class="o">=</span> <span class="n">expression</span><span class="o">.</span><span class="n">get_filler</span><span class="p">()</span>
            <span class="n">cardinality</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expression</span><span class="p">,</span> <span class="n">OWLObjectMinCardinality</span><span class="p">):</span>
                <span class="n">cardinality</span> <span class="o">=</span> <span class="n">expression</span><span class="o">.</span><span class="n">get_cardinality</span><span class="p">()</span>

            <span class="n">object_individuals</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">instances</span><span class="p">(</span><span class="n">filler_expression</span><span class="p">)</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">()</span>
            <span class="n">subjects</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_individuals_with_object_property</span><span class="p">(</span>
                <span class="n">objs</span><span class="o">=</span><span class="n">object_individuals</span><span class="p">,</span>
                <span class="n">object_property</span><span class="o">=</span><span class="n">object_property</span><span class="p">)</span>
            <span class="c1"># Update the counter for all subjects found</span>
            <span class="n">result</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">subjects</span><span class="p">)</span>
            <span class="c1"># Yield only those individuals who meet the cardinality requirement</span>
            <span class="k">for</span> <span class="n">individual</span><span class="p">,</span> <span class="n">count</span> <span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">count</span> <span class="o">&gt;=</span> <span class="n">cardinality</span><span class="p">:</span>
                    <span class="k">yield</span> <span class="n">individual</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expression</span><span class="p">,</span> <span class="n">OWLObjectMaxCardinality</span><span class="p">):</span>
            <span class="n">object_property</span> <span class="o">=</span> <span class="n">expression</span><span class="o">.</span><span class="n">get_property</span><span class="p">()</span>
            <span class="n">filler_expression</span> <span class="o">=</span> <span class="n">expression</span><span class="o">.</span><span class="n">get_filler</span><span class="p">()</span>
            <span class="n">cardinality</span> <span class="o">=</span> <span class="n">expression</span><span class="o">.</span><span class="n">get_cardinality</span><span class="p">()</span>

            <span class="c1"># Get all individuals that are instances of the filler expression.</span>
            <span class="n">object_individuals</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">instances</span><span class="p">(</span><span class="n">filler_expression</span><span class="p">))</span>

            <span class="c1"># Initialize counts for every subject in the signature.</span>
            <span class="n">counts</span> <span class="o">=</span> <span class="p">{</span><span class="n">ind</span><span class="o">.</span><span class="n">str</span><span class="p">:</span> <span class="p">(</span><span class="n">ind</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="k">for</span> <span class="n">ind</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">individuals_in_signature</span><span class="p">()}</span>

            <span class="c1"># Retrieve all subjects related to any of the object individuals at once.</span>
            <span class="n">subject_individuals</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_individuals_with_object_property</span><span class="p">(</span>
                <span class="n">objs</span><span class="o">=</span><span class="n">object_individuals</span><span class="p">,</span>
                <span class="n">object_property</span><span class="o">=</span><span class="n">object_property</span>
            <span class="p">)</span>

            <span class="c1"># Increment counts for each related subject.</span>
            <span class="k">for</span> <span class="n">subj</span> <span class="ow">in</span> <span class="n">subject_individuals</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">subj</span><span class="o">.</span><span class="n">str</span> <span class="ow">in</span> <span class="n">counts</span><span class="p">:</span>
                    <span class="n">owl_obj</span><span class="p">,</span> <span class="n">cnt</span> <span class="o">=</span> <span class="n">counts</span><span class="p">[</span><span class="n">subj</span><span class="o">.</span><span class="n">str</span><span class="p">]</span>
                    <span class="n">counts</span><span class="p">[</span><span class="n">subj</span><span class="o">.</span><span class="n">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">owl_obj</span><span class="p">,</span> <span class="n">cnt</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>

            <span class="c1"># Yield only those subjects whose count does not exceed the max cardinality.</span>
            <span class="k">yield from</span> <span class="p">{</span>
                <span class="n">ind</span> <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="p">(</span><span class="n">ind</span><span class="p">,</span> <span class="n">cnt</span><span class="p">)</span> <span class="ow">in</span> <span class="n">counts</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">cnt</span> <span class="o">&lt;=</span> <span class="n">cardinality</span>
            <span class="p">}</span>


        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expression</span><span class="p">,</span> <span class="n">OWLObjectUnionOf</span><span class="p">):</span>
            <span class="n">result</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">for</span> <span class="n">op</span> <span class="ow">in</span> <span class="n">expression</span><span class="o">.</span><span class="n">operands</span><span class="p">():</span>
                <span class="n">retrieval_of_op</span> <span class="o">=</span> <span class="p">{</span><span class="n">_</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">instances</span><span class="p">(</span><span class="n">expression</span><span class="o">=</span><span class="n">op</span><span class="p">)}</span>
                <span class="k">if</span> <span class="n">result</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">result</span> <span class="o">=</span> <span class="n">retrieval_of_op</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">result</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="n">retrieval_of_op</span><span class="p">)</span>
            <span class="k">yield from</span> <span class="n">result</span>

        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expression</span><span class="p">,</span> <span class="n">OWLObjectOneOf</span><span class="p">):</span>
            <span class="k">yield from</span> <span class="n">expression</span><span class="o">.</span><span class="n">individuals</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Instances for </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">expression</span><span class="p">)</span><span class="si">}</span><span class="s2"> are not implemented yet&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="EBR.object_property_values">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.EBR.object_property_values">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">object_property_values</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="n">subject</span><span class="p">:</span> <span class="n">OWLNamedIndividual</span><span class="p">,</span> <span class="n">object_property</span><span class="p">:</span> <span class="n">OWLObjectProperty</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">OWLNamedIndividual</span><span class="p">]:</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">object_property</span><span class="p">,</span> <span class="n">OWLObjectProperty</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">object_property</span><span class="p">,</span> <span class="n">OWLObjectInverseOf</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">is_inverse</span> <span class="o">:=</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">object_property</span><span class="p">,</span> <span class="n">OWLObjectInverseOf</span><span class="p">):</span>
            <span class="n">object_property</span> <span class="o">=</span> <span class="n">object_property</span><span class="o">.</span><span class="n">get_inverse</span><span class="p">()</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">OWLNamedIndividual</span><span class="p">(</span><span class="n">top_entity</span><span class="p">)</span> <span class="k">for</span> <span class="n">top_entity</span><span class="p">,</span> <span class="n">score</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span>
            <span class="n">h</span><span class="o">=</span><span class="kc">None</span> <span class="k">if</span> <span class="n">is_inverse</span> <span class="k">else</span> <span class="n">subject</span><span class="o">.</span><span class="n">str</span><span class="p">,</span>
            <span class="n">r</span><span class="o">=</span><span class="n">object_property</span><span class="o">.</span><span class="n">iri</span><span class="o">.</span><span class="n">str</span><span class="p">,</span>
            <span class="n">t</span><span class="o">=</span><span class="n">subject</span><span class="o">.</span><span class="n">str</span> <span class="k">if</span> <span class="n">is_inverse</span> <span class="k">else</span> <span class="kc">None</span><span class="p">)]</span></div>


<div class="viewcode-block" id="EBR.get_individuals_with_object_property">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.EBR.get_individuals_with_object_property">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_individuals_with_object_property</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">object_property</span><span class="p">:</span> <span class="n">OWLObjectProperty</span><span class="p">,</span> <span class="n">objs</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">OWLClass</span><span class="p">])</span> \
            <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">OWLNamedIndividual</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
        <span class="n">is_inverse</span> <span class="o">=</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">object_property</span><span class="p">,</span> <span class="n">OWLObjectInverseOf</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">is_inverse</span><span class="p">:</span>
            <span class="n">object_property</span> <span class="o">=</span> <span class="n">object_property</span><span class="o">.</span><span class="n">get_inverse</span><span class="p">()</span>
        <span class="n">return_subjects</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">entity</span><span class="p">,</span> <span class="n">score</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span>
                <span class="n">h</span><span class="o">=</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">str</span> <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">objs</span><span class="p">]</span> <span class="k">if</span> <span class="n">is_inverse</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
                <span class="n">r</span><span class="o">=</span><span class="n">object_property</span><span class="o">.</span><span class="n">str</span><span class="p">,</span>
                <span class="n">t</span><span class="o">=</span><span class="kc">None</span> <span class="k">if</span> <span class="n">is_inverse</span> <span class="k">else</span> <span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">str</span> <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">objs</span><span class="p">]):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">return_subjects</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">OWLNamedIndividual</span><span class="p">(</span><span class="n">entity</span><span class="p">))</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
                <span class="c1"># Log the invalid IRI</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid IRI detected: </span><span class="si">{</span><span class="n">entity</span><span class="si">}</span><span class="s2">, error: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="k">continue</span>

        <span class="k">return</span> <span class="n">return_subjects</span></div>


<div class="viewcode-block" id="EBR.data_property_domains">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.EBR.data_property_domains">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">data_property_domains</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pe</span><span class="p">:</span> <span class="n">OWLDataProperty</span><span class="p">,</span> <span class="n">direct</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">OWLClassExpression</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets the class expressions that are the direct or indirect domains of this property with respect to the imports closure of the root ontology.</span>

<span class="sd">        Args:</span>
<span class="sd">            pe: The property expression whose domains are to be retrieved.</span>
<span class="sd">            direct: Specifies if the direct domains should be retrieved (True), or if all domains should be retrieved (False).</span>

<span class="sd">        Returns:</span>
<span class="sd">            The class expressions that are the domains of the specified property.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Get all classes that are domains of this property</span>
        <span class="n">domain_classes</span> <span class="o">=</span> <span class="p">[</span><span class="n">OWLClass</span><span class="p">(</span><span class="n">top_entity</span><span class="p">)</span> <span class="k">for</span> <span class="n">top_entity</span><span class="p">,</span> <span class="n">score</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span>
            <span class="n">h</span><span class="o">=</span><span class="n">pe</span><span class="o">.</span><span class="n">str</span><span class="p">,</span>
            <span class="n">r</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">STR_IRI_DOMAIN</span><span class="p">,</span>
            <span class="n">t</span><span class="o">=</span><span class="kc">None</span>
        <span class="p">)]</span>

        <span class="k">if</span> <span class="n">direct</span><span class="p">:</span>
            <span class="c1"># If only direct domains are requested, return them as is</span>
            <span class="k">yield from</span> <span class="n">domain_classes</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># If all domains are requested, also include all superclasses of each domain</span>
            <span class="n">all_domains</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">domain_classes</span><span class="p">)</span>
            <span class="k">for</span> <span class="bp">cls</span> <span class="ow">in</span> <span class="n">domain_classes</span><span class="p">:</span>
                <span class="n">all_domains</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">super_classes</span><span class="p">(</span><span class="bp">cls</span><span class="p">))</span>
            <span class="k">yield from</span> <span class="n">all_domains</span>

            <span class="c1"># If no domain is found, yield OWLThing as the default domain</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">all_domains</span><span class="p">:</span>
                <span class="k">yield</span> <span class="n">OWLThing</span></div>


<div class="viewcode-block" id="EBR.object_property_domains">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.EBR.object_property_domains">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">object_property_domains</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pe</span><span class="p">:</span> <span class="n">OWLObjectProperty</span><span class="p">,</span> <span class="n">direct</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">OWLClassExpression</span><span class="p">]:</span>
        <span class="c1"># Check if the property is inverse</span>
        <span class="n">is_inverse</span> <span class="o">=</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pe</span><span class="p">,</span> <span class="n">OWLObjectInverseOf</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">is_inverse</span><span class="p">:</span>
            <span class="c1"># For inverse properties, the domains are the ranges of the original property</span>
            <span class="n">original_property</span> <span class="o">=</span> <span class="n">pe</span><span class="o">.</span><span class="n">get_inverse</span><span class="p">()</span>
            <span class="k">yield from</span> <span class="bp">self</span><span class="o">.</span><span class="n">object_property_ranges</span><span class="p">(</span><span class="n">original_property</span><span class="p">,</span> <span class="n">direct</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Get all classes that are domains of this property</span>
            <span class="n">domain_classes</span> <span class="o">=</span> <span class="p">[</span><span class="n">OWLClass</span><span class="p">(</span><span class="n">top_entity</span><span class="p">)</span> <span class="k">for</span> <span class="n">top_entity</span><span class="p">,</span> <span class="n">score</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span>
                <span class="n">h</span><span class="o">=</span><span class="n">pe</span><span class="o">.</span><span class="n">str</span><span class="p">,</span>
                <span class="n">r</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">STR_IRI_DOMAIN</span><span class="p">,</span>
                <span class="n">t</span><span class="o">=</span><span class="kc">None</span>
            <span class="p">)]</span>

            <span class="k">if</span> <span class="n">direct</span><span class="p">:</span>
                <span class="c1"># If only direct domains are requested, return them as is</span>
                <span class="k">yield from</span> <span class="n">domain_classes</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># If all domains are requested, also include all superclasses of each domain</span>
                <span class="n">all_domains</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">domain_classes</span><span class="p">)</span>
                <span class="k">for</span> <span class="bp">cls</span> <span class="ow">in</span> <span class="n">domain_classes</span><span class="p">:</span>
                    <span class="n">all_domains</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">super_classes</span><span class="p">(</span><span class="bp">cls</span><span class="p">))</span>
                <span class="k">yield from</span> <span class="n">all_domains</span>

                <span class="c1"># If no domain is found, yield OWLThing as the default domain</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">all_domains</span><span class="p">:</span>
                    <span class="k">yield</span> <span class="n">OWLThing</span></div>


<div class="viewcode-block" id="EBR.object_property_ranges">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.EBR.object_property_ranges">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">object_property_ranges</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pe</span><span class="p">:</span> <span class="n">OWLObjectProperty</span><span class="p">,</span> <span class="n">direct</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">OWLClassExpression</span><span class="p">]:</span>
        <span class="c1"># Check if the property is inverse</span>
        <span class="n">is_inverse</span> <span class="o">=</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pe</span><span class="p">,</span> <span class="n">OWLObjectInverseOf</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">is_inverse</span><span class="p">:</span>
            <span class="n">pe</span> <span class="o">=</span> <span class="n">pe</span><span class="o">.</span><span class="n">get_inverse</span><span class="p">()</span>
            <span class="c1"># For inverse properties, the ranges are the domains of the original property</span>
            <span class="k">if</span> <span class="n">direct</span><span class="p">:</span>
                <span class="k">yield from</span> <span class="p">[</span><span class="n">OWLClass</span><span class="p">(</span><span class="n">top_entity</span><span class="p">)</span> <span class="k">for</span> <span class="n">top_entity</span><span class="p">,</span> <span class="n">score</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span>
                    <span class="n">h</span><span class="o">=</span><span class="n">pe</span><span class="o">.</span><span class="n">str</span><span class="p">,</span>
                    <span class="n">r</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">STR_IRI_DOMAIN</span><span class="p">,</span>
                    <span class="n">t</span><span class="o">=</span><span class="kc">None</span>
                <span class="p">)]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># Get all domains and their superclasses</span>
                <span class="n">domain_classes</span> <span class="o">=</span> <span class="p">[</span><span class="n">OWLClass</span><span class="p">(</span><span class="n">top_entity</span><span class="p">)</span> <span class="k">for</span> <span class="n">top_entity</span><span class="p">,</span> <span class="n">score</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span>
                    <span class="n">h</span><span class="o">=</span><span class="n">pe</span><span class="o">.</span><span class="n">str</span><span class="p">,</span>
                    <span class="n">r</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">STR_IRI_DOMAIN</span><span class="p">,</span>
                    <span class="n">t</span><span class="o">=</span><span class="kc">None</span>
                <span class="p">)]</span>
                <span class="n">all_domains</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">domain_classes</span><span class="p">)</span>
                <span class="k">for</span> <span class="bp">cls</span> <span class="ow">in</span> <span class="n">domain_classes</span><span class="p">:</span>
                    <span class="n">all_domains</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">super_classes</span><span class="p">(</span><span class="bp">cls</span><span class="p">))</span>
                <span class="k">yield from</span> <span class="n">all_domains</span>

                <span class="c1"># If no range is found, yield OWLThing as the default range</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">all_domains</span><span class="p">:</span>
                    <span class="k">yield</span> <span class="n">OWLThing</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># For regular properties, get ranges directly</span>
            <span class="n">range_classes</span> <span class="o">=</span> <span class="p">[</span><span class="n">OWLClass</span><span class="p">(</span><span class="n">top_entity</span><span class="p">)</span> <span class="k">for</span> <span class="n">top_entity</span><span class="p">,</span> <span class="n">score</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span>
                <span class="n">h</span><span class="o">=</span><span class="n">pe</span><span class="o">.</span><span class="n">str</span><span class="p">,</span>
                <span class="n">r</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">STR_IRI_RANGE</span><span class="p">,</span>
                <span class="n">t</span><span class="o">=</span><span class="kc">None</span>
            <span class="p">)]</span>

            <span class="k">if</span> <span class="n">direct</span><span class="p">:</span>
                <span class="c1"># If only direct ranges are requested, return them as is</span>
                <span class="k">yield from</span> <span class="n">range_classes</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># If all ranges are requested, also include all superclasses of each range</span>
                <span class="n">all_ranges</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">range_classes</span><span class="p">)</span>
                <span class="k">for</span> <span class="bp">cls</span> <span class="ow">in</span> <span class="n">range_classes</span><span class="p">:</span>
                    <span class="n">all_ranges</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">super_classes</span><span class="p">(</span><span class="bp">cls</span><span class="p">))</span>
                <span class="k">yield from</span> <span class="n">all_ranges</span>

                <span class="c1"># If no range is found, yield OWLThing as the default range</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">all_ranges</span><span class="p">:</span>
                    <span class="k">yield</span> <span class="n">OWLThing</span></div>


<div class="viewcode-block" id="EBR.equivalent_classes">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.EBR.equivalent_classes">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">equivalent_classes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ce</span><span class="p">:</span> <span class="n">OWLClassExpression</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">OWLClassExpression</span><span class="p">]:</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;Equivalent classes are not implemented for the embedding-based reasoner&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="EBR.disjoint_classes">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.EBR.disjoint_classes">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">disjoint_classes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ce</span><span class="p">:</span> <span class="n">OWLClassExpression</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">OWLClassExpression</span><span class="p">]:</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;Disjoint classes are not implemented for the embedding-based reasoner&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="EBR.different_individuals">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.EBR.different_individuals">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">different_individuals</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ind</span><span class="p">:</span> <span class="n">OWLNamedIndividual</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">OWLNamedIndividual</span><span class="p">]:</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;Different individuals are not implemented for the embedding-based reasoner&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="EBR.same_individuals">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.EBR.same_individuals">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">same_individuals</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ind</span><span class="p">:</span> <span class="n">OWLNamedIndividual</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">OWLNamedIndividual</span><span class="p">]:</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;Same individuals are not implemented for the embedding-based reasoner&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="EBR.equivalent_object_properties">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.EBR.equivalent_object_properties">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">equivalent_object_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">op</span><span class="p">:</span> <span class="n">OWLObjectPropertyExpression</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">OWLObjectPropertyExpression</span><span class="p">]:</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;Equivalent object properties are not implemented for the embedding-based reasoner&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="EBR.equivalent_data_properties">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.EBR.equivalent_data_properties">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">equivalent_data_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dp</span><span class="p">:</span> <span class="n">OWLDataProperty</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">OWLDataProperty</span><span class="p">]:</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;Equivalent data properties are not implemented for the embedding-based reasoner&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="EBR.data_property_values">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.EBR.data_property_values">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">data_property_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">:</span> <span class="n">OWLEntity</span><span class="p">,</span> <span class="n">pe</span><span class="p">:</span> <span class="n">OWLDataProperty</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="s1">&#39;OWLLiteral&#39;</span><span class="p">]:</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;Data property values are not implemented for the embedding-based reasoner&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="EBR.disjoint_object_properties">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.EBR.disjoint_object_properties">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">disjoint_object_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">op</span><span class="p">:</span> <span class="n">OWLObjectPropertyExpression</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">OWLObjectPropertyExpression</span><span class="p">]:</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;Disjoint object properties are not implemented for the embedding-based reasoner&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="EBR.disjoint_data_properties">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.EBR.disjoint_data_properties">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">disjoint_data_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dp</span><span class="p">:</span> <span class="n">OWLDataProperty</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">OWLDataProperty</span><span class="p">]:</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;Disjoint data properties are not implemented for the embedding-based reasoner&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="EBR.sub_data_properties">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.EBR.sub_data_properties">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">sub_data_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dp</span><span class="p">:</span> <span class="n">OWLDataProperty</span><span class="p">,</span> <span class="n">direct</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">OWLDataProperty</span><span class="p">]:</span>
        <span class="c1"># Get direct sub properties</span>
        <span class="n">sub_properties</span> <span class="o">=</span> <span class="p">[</span><span class="n">OWLDataProperty</span><span class="p">(</span><span class="n">top_entity</span><span class="p">)</span> <span class="k">for</span> <span class="n">top_entity</span><span class="p">,</span> <span class="n">score</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span>
            <span class="n">h</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">r</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">STR_IRI_SUBPROPERTY</span><span class="p">,</span>
            <span class="n">t</span><span class="o">=</span><span class="n">dp</span><span class="o">.</span><span class="n">str</span>
        <span class="p">)]</span>

        <span class="k">if</span> <span class="n">direct</span><span class="p">:</span>
            <span class="c1"># If only direct sub properties are requested, return them as is</span>
            <span class="k">yield from</span> <span class="n">sub_properties</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># If all sub properties are requested, also include all sub properties of each sub property</span>
            <span class="n">visited</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
            <span class="n">all_sub_properties</span> <span class="o">=</span> <span class="p">[]</span>

            <span class="k">def</span><span class="w"> </span><span class="nf">collect_sub_properties</span><span class="p">(</span><span class="n">property_</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">sub_prop</span> <span class="ow">in</span> <span class="p">[</span><span class="n">OWLDataProperty</span><span class="p">(</span><span class="n">top_entity</span><span class="p">)</span> <span class="k">for</span> <span class="n">top_entity</span><span class="p">,</span> <span class="n">score</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span>
                        <span class="n">h</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                        <span class="n">r</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">STR_IRI_SUBPROPERTY</span><span class="p">,</span>
                        <span class="n">t</span><span class="o">=</span><span class="n">property_</span><span class="o">.</span><span class="n">str</span>
                <span class="p">)]:</span>
                    <span class="k">if</span> <span class="n">sub_prop</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">visited</span><span class="p">:</span>
                        <span class="n">visited</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">sub_prop</span><span class="p">)</span>
                        <span class="n">all_sub_properties</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sub_prop</span><span class="p">)</span>
                        <span class="n">collect_sub_properties</span><span class="p">(</span><span class="n">sub_prop</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">prop</span> <span class="ow">in</span> <span class="n">sub_properties</span><span class="p">:</span>
                <span class="n">visited</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span>
                <span class="n">all_sub_properties</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span>
                <span class="n">collect_sub_properties</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span>

            <span class="k">yield from</span> <span class="n">all_sub_properties</span></div>


<div class="viewcode-block" id="EBR.super_data_properties">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.EBR.super_data_properties">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">super_data_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dp</span><span class="p">:</span> <span class="n">OWLDataProperty</span><span class="p">,</span> <span class="n">direct</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">OWLDataProperty</span><span class="p">]:</span>
        <span class="c1"># Get direct super properties</span>
        <span class="n">super_properties</span> <span class="o">=</span> <span class="p">[</span><span class="n">OWLDataProperty</span><span class="p">(</span><span class="n">top_entity</span><span class="p">)</span> <span class="k">for</span> <span class="n">top_entity</span><span class="p">,</span> <span class="n">score</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span>
            <span class="n">h</span><span class="o">=</span><span class="n">dp</span><span class="o">.</span><span class="n">str</span><span class="p">,</span>
            <span class="n">r</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">STR_IRI_SUBPROPERTY</span><span class="p">,</span>
            <span class="n">t</span><span class="o">=</span><span class="kc">None</span>
        <span class="p">)]</span>

        <span class="k">if</span> <span class="n">direct</span><span class="p">:</span>
            <span class="c1"># If only direct super properties are requested, return them as is</span>
            <span class="k">yield from</span> <span class="n">super_properties</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># If all super properties are requested, also include all super properties of each super property</span>
            <span class="n">visited</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
            <span class="n">all_super_properties</span> <span class="o">=</span> <span class="p">[]</span>

            <span class="k">def</span><span class="w"> </span><span class="nf">collect_super_properties</span><span class="p">(</span><span class="n">property_</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">super_prop</span> <span class="ow">in</span> <span class="p">[</span><span class="n">OWLDataProperty</span><span class="p">(</span><span class="n">top_entity</span><span class="p">)</span> <span class="k">for</span> <span class="n">top_entity</span><span class="p">,</span> <span class="n">score</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span>
                        <span class="n">h</span><span class="o">=</span><span class="n">property_</span><span class="o">.</span><span class="n">str</span><span class="p">,</span>
                        <span class="n">r</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">STR_IRI_SUBPROPERTY</span><span class="p">,</span>
                        <span class="n">t</span><span class="o">=</span><span class="kc">None</span>
                <span class="p">)]:</span>
                    <span class="k">if</span> <span class="n">super_prop</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">visited</span><span class="p">:</span>
                        <span class="n">visited</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">super_prop</span><span class="p">)</span>
                        <span class="n">all_super_properties</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">super_prop</span><span class="p">)</span>
                        <span class="n">collect_super_properties</span><span class="p">(</span><span class="n">super_prop</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">prop</span> <span class="ow">in</span> <span class="n">super_properties</span><span class="p">:</span>
                <span class="n">visited</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span>
                <span class="n">all_super_properties</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span>
                <span class="n">collect_super_properties</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span>

            <span class="k">yield from</span> <span class="n">all_super_properties</span></div>


<div class="viewcode-block" id="EBR.sub_object_properties">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.EBR.sub_object_properties">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">sub_object_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">op</span><span class="p">:</span> <span class="n">OWLObjectPropertyExpression</span><span class="p">,</span> <span class="n">direct</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span>
        <span class="n">OWLObjectPropertyExpression</span><span class="p">]:</span>
        <span class="c1"># Check if the property is inverse</span>
        <span class="n">is_inverse</span> <span class="o">=</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">op</span><span class="p">,</span> <span class="n">OWLObjectInverseOf</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">is_inverse</span><span class="p">:</span>
            <span class="c1"># For inverse properties, the sub properties are the inverse of the super properties of the original property</span>
            <span class="n">original_property</span> <span class="o">=</span> <span class="n">op</span><span class="o">.</span><span class="n">get_inverse</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">super_prop</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">super_object_properties</span><span class="p">(</span><span class="n">original_property</span><span class="p">,</span> <span class="n">direct</span><span class="p">):</span>
                <span class="k">yield</span> <span class="n">OWLObjectInverseOf</span><span class="p">(</span><span class="n">super_prop</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Get direct sub properties</span>
            <span class="n">sub_properties</span> <span class="o">=</span> <span class="p">[</span><span class="n">OWLObjectProperty</span><span class="p">(</span><span class="n">top_entity</span><span class="p">)</span> <span class="k">for</span> <span class="n">top_entity</span><span class="p">,</span> <span class="n">score</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span>
                <span class="n">h</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                <span class="n">r</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">STR_IRI_SUBPROPERTY</span><span class="p">,</span>
                <span class="n">t</span><span class="o">=</span><span class="n">op</span><span class="o">.</span><span class="n">str</span>
            <span class="p">)]</span>

            <span class="k">if</span> <span class="n">direct</span><span class="p">:</span>
                <span class="c1"># If only direct sub properties are requested, return them as is</span>
                <span class="k">yield from</span> <span class="n">sub_properties</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># If all sub properties are requested, also include all sub properties of each sub property</span>
                <span class="n">visited</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
                <span class="n">all_sub_properties</span> <span class="o">=</span> <span class="p">[]</span>

                <span class="k">def</span><span class="w"> </span><span class="nf">collect_sub_properties</span><span class="p">(</span><span class="n">property_</span><span class="p">):</span>
                    <span class="k">for</span> <span class="n">sub_prop</span> <span class="ow">in</span> <span class="p">[</span><span class="n">OWLObjectProperty</span><span class="p">(</span><span class="n">top_entity</span><span class="p">)</span> <span class="k">for</span> <span class="n">top_entity</span><span class="p">,</span> <span class="n">score</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span>
                            <span class="n">h</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                            <span class="n">r</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">STR_IRI_SUBPROPERTY</span><span class="p">,</span>
                            <span class="n">t</span><span class="o">=</span><span class="n">property_</span><span class="o">.</span><span class="n">str</span>
                    <span class="p">)]:</span>
                        <span class="k">if</span> <span class="n">sub_prop</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">visited</span><span class="p">:</span>
                            <span class="n">visited</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">sub_prop</span><span class="p">)</span>
                            <span class="n">all_sub_properties</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sub_prop</span><span class="p">)</span>
                            <span class="n">collect_sub_properties</span><span class="p">(</span><span class="n">sub_prop</span><span class="p">)</span>

                <span class="k">for</span> <span class="n">prop</span> <span class="ow">in</span> <span class="n">sub_properties</span><span class="p">:</span>
                    <span class="n">visited</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span>
                    <span class="n">all_sub_properties</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span>
                    <span class="n">collect_sub_properties</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span>

                <span class="k">yield from</span> <span class="n">all_sub_properties</span></div>


<div class="viewcode-block" id="EBR.super_object_properties">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.EBR.super_object_properties">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">super_object_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">op</span><span class="p">:</span> <span class="n">OWLObjectPropertyExpression</span><span class="p">,</span> <span class="n">direct</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span>
        <span class="n">OWLObjectPropertyExpression</span><span class="p">]:</span>
        <span class="c1"># Check if the property is inverse</span>
        <span class="n">is_inverse</span> <span class="o">=</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">op</span><span class="p">,</span> <span class="n">OWLObjectInverseOf</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">is_inverse</span><span class="p">:</span>
            <span class="c1"># For inverse properties, the super properties are the inverse of the sub properties of the original property</span>
            <span class="n">original_property</span> <span class="o">=</span> <span class="n">op</span><span class="o">.</span><span class="n">get_inverse</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">sub_prop</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">sub_object_properties</span><span class="p">(</span><span class="n">original_property</span><span class="p">,</span> <span class="n">direct</span><span class="p">):</span>
                <span class="k">yield</span> <span class="n">OWLObjectInverseOf</span><span class="p">(</span><span class="n">sub_prop</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Get direct super properties</span>
            <span class="n">super_properties</span> <span class="o">=</span> <span class="p">[</span><span class="n">OWLObjectProperty</span><span class="p">(</span><span class="n">top_entity</span><span class="p">)</span> <span class="k">for</span> <span class="n">top_entity</span><span class="p">,</span> <span class="n">score</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span>
                <span class="n">h</span><span class="o">=</span><span class="n">op</span><span class="o">.</span><span class="n">str</span><span class="p">,</span>
                <span class="n">r</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">STR_IRI_SUBPROPERTY</span><span class="p">,</span>
                <span class="n">t</span><span class="o">=</span><span class="kc">None</span>
            <span class="p">)]</span>

            <span class="k">if</span> <span class="n">direct</span><span class="p">:</span>
                <span class="c1"># If only direct super properties are requested, return them as is</span>
                <span class="k">yield from</span> <span class="n">super_properties</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># If all super properties are requested, also include all super properties of each super property</span>
                <span class="n">visited</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
                <span class="n">all_super_properties</span> <span class="o">=</span> <span class="p">[]</span>

                <span class="k">def</span><span class="w"> </span><span class="nf">collect_super_properties</span><span class="p">(</span><span class="n">property_</span><span class="p">):</span>
                    <span class="k">for</span> <span class="n">super_prop</span> <span class="ow">in</span> <span class="p">[</span><span class="n">OWLObjectProperty</span><span class="p">(</span><span class="n">top_entity</span><span class="p">)</span> <span class="k">for</span> <span class="n">top_entity</span><span class="p">,</span> <span class="n">score</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span>
                            <span class="n">h</span><span class="o">=</span><span class="n">property_</span><span class="o">.</span><span class="n">str</span><span class="p">,</span>
                            <span class="n">r</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">STR_IRI_SUBPROPERTY</span><span class="p">,</span>
                            <span class="n">t</span><span class="o">=</span><span class="kc">None</span>
                    <span class="p">)]:</span>
                        <span class="k">if</span> <span class="n">super_prop</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">visited</span><span class="p">:</span>
                            <span class="n">visited</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">super_prop</span><span class="p">)</span>
                            <span class="n">all_super_properties</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">super_prop</span><span class="p">)</span>
                            <span class="n">collect_super_properties</span><span class="p">(</span><span class="n">super_prop</span><span class="p">)</span>

                <span class="k">for</span> <span class="n">prop</span> <span class="ow">in</span> <span class="n">super_properties</span><span class="p">:</span>
                    <span class="n">visited</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span>
                    <span class="n">all_super_properties</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span>
                    <span class="n">collect_super_properties</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span>

                <span class="k">yield from</span> <span class="n">all_super_properties</span></div>


<div class="viewcode-block" id="EBR.get_root_ontology">
<a class="viewcode-back" href="../../autoapi/owlapy/owl_reasoner/index.html#owlapy.owl_reasoner.EBR.get_root_ontology">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_root_ontology</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">NeuralOntology</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ontology</span></div>
</div>

</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright .</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>